const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/login-sJSnfE4P.js","assets/ui-BHvTlzFh.js","assets/vendor-ykmxpjHB.js","assets/eye-GVZSwsOY.js","assets/signup-CSsp5mA2.js"])))=>i.map(i=>d[i]);
var Oo=r=>{throw TypeError(r)};var Sa=(r,e,t)=>e.has(r)||Oo("Cannot "+t);var S=(r,e,t)=>(Sa(r,e,"read from private field"),t?t.call(r):e.get(r)),te=(r,e,t)=>e.has(r)?Oo("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),K=(r,e,t,s)=>(Sa(r,e,"write to private field"),s?s.call(r,t):e.set(r,t),t),ce=(r,e,t)=>(Sa(r,e,"access private method"),t);var kn=(r,e,t,s)=>({set _(n){K(r,e,n,t)},get _(){return S(r,e,s)}});import{j as o,c as an,a as Fh,u as Ss,B as Uh,P as st,b as Oi,d as Ai,e as Pe,f as Fn,V as gc,R as Bh,g as zh,h as qh,i as Wh,k as yc,D as Kh,C as Hh,l as Vh,m as Gh,A as Yh,n as Qh,S as Jh,O as vc,o as Xh,p as xc,q as Zh,T as bc,r as wc,s as ef,t as kc,I as tf,v as jc,w as Sc,x as rf,y as _c,z as sf,L as Ec,E as Nc,F as nf,G as af,H as Cc,J as of,K as lf,M as Rc,N as Dc}from"./ui-BHvTlzFh.js";import{a as Mi,r as f,c as cf,g as df,d as Ke,R as uf,e as Gn}from"./vendor-ykmxpjHB.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function t(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=t(n);fetch(n.href,a)}})();var Tc,Ao=Mi;Tc=Ao.createRoot,Ao.hydrateRoot;var _s=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(r){return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Fr=typeof window>"u"||"Deno"in globalThis;function dt(){}function hf(r,e){return typeof r=="function"?r(e):r}function Ha(r){return typeof r=="number"&&r>=0&&r!==1/0}function Pc(r,e){return Math.max(r+(e||0)-Date.now(),0)}function as(r,e){return typeof r=="function"?r(e):r}function gt(r,e){return typeof r=="function"?r(e):r}function Mo(r,e){const{type:t="all",exact:s,fetchStatus:n,predicate:a,queryKey:i,stale:l}=r;if(i){if(s){if(e.queryHash!==Ii(i,e.options))return!1}else if(!Qs(e.queryKey,i))return!1}if(t!=="all"){const c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||n&&n!==e.state.fetchStatus||a&&!a(e))}function Io(r,e){const{exact:t,status:s,predicate:n,mutationKey:a}=r;if(a){if(!e.options.mutationKey)return!1;if(t){if(Ur(e.options.mutationKey)!==Ur(a))return!1}else if(!Qs(e.options.mutationKey,a))return!1}return!(s&&e.state.status!==s||n&&!n(e))}function Ii(r,e){return((e==null?void 0:e.queryKeyHashFn)||Ur)(r)}function Ur(r){return JSON.stringify(r,(e,t)=>Va(t)?Object.keys(t).sort().reduce((s,n)=>(s[n]=t[n],s),{}):t)}function Qs(r,e){return r===e?!0:typeof r!=typeof e?!1:r&&e&&typeof r=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!Qs(r[t],e[t])):!1}function Oc(r,e){if(r===e)return r;const t=$o(r)&&$o(e);if(t||Va(r)&&Va(e)){const s=t?r:Object.keys(r),n=s.length,a=t?e:Object.keys(e),i=a.length,l=t?[]:{};let c=0;for(let d=0;d<i;d++){const u=t?d:a[d];(!t&&s.includes(u)||t)&&r[u]===void 0&&e[u]===void 0?(l[u]=void 0,c++):(l[u]=Oc(r[u],e[u]),l[u]===r[u]&&r[u]!==void 0&&c++)}return n===i&&c===n?r:l}return e}function Un(r,e){if(!e||Object.keys(r).length!==Object.keys(e).length)return!1;for(const t in r)if(r[t]!==e[t])return!1;return!0}function $o(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function Va(r){if(!Lo(r))return!1;const e=r.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!Lo(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(r)!==Object.prototype)}function Lo(r){return Object.prototype.toString.call(r)==="[object Object]"}function ff(r){return new Promise(e=>{setTimeout(e,r)})}function Ga(r,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(r,e):t.structuralSharing!==!1?Oc(r,e):e}function mf(r,e,t=0){const s=[...r,e];return t&&s.length>t?s.slice(1):s}function pf(r,e,t=0){const s=[e,...r];return t&&s.length>t?s.slice(0,-1):s}var $i=Symbol();function Ac(r,e){return!r.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!r.queryFn||r.queryFn===$i?()=>Promise.reject(new Error(`Missing queryFn: '${r.queryHash}'`)):r.queryFn}var Tr,sr,cs,ic,gf=(ic=class extends _s{constructor(){super();te(this,Tr);te(this,sr);te(this,cs);K(this,cs,e=>{if(!Fr&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){S(this,sr)||this.setEventListener(S(this,cs))}onUnsubscribe(){var e;this.hasListeners()||((e=S(this,sr))==null||e.call(this),K(this,sr,void 0))}setEventListener(e){var t;K(this,cs,e),(t=S(this,sr))==null||t.call(this),K(this,sr,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){S(this,Tr)!==e&&(K(this,Tr,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof S(this,Tr)=="boolean"?S(this,Tr):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Tr=new WeakMap,sr=new WeakMap,cs=new WeakMap,ic),Li=new gf,ds,nr,us,oc,yf=(oc=class extends _s{constructor(){super();te(this,ds,!0);te(this,nr);te(this,us);K(this,us,e=>{if(!Fr&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}})}onSubscribe(){S(this,nr)||this.setEventListener(S(this,us))}onUnsubscribe(){var e;this.hasListeners()||((e=S(this,nr))==null||e.call(this),K(this,nr,void 0))}setEventListener(e){var t;K(this,us,e),(t=S(this,nr))==null||t.call(this),K(this,nr,e(this.setOnline.bind(this)))}setOnline(e){S(this,ds)!==e&&(K(this,ds,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return S(this,ds)}},ds=new WeakMap,nr=new WeakMap,us=new WeakMap,oc),Bn=new yf;function Ya(){let r,e;const t=new Promise((n,a)=>{r=n,e=a});t.status="pending",t.catch(()=>{});function s(n){Object.assign(t,n),delete t.resolve,delete t.reject}return t.resolve=n=>{s({status:"fulfilled",value:n}),r(n)},t.reject=n=>{s({status:"rejected",reason:n}),e(n)},t}function vf(r){return Math.min(1e3*2**r,3e4)}function Mc(r){return(r??"online")==="online"?Bn.isOnline():!0}var Ic=class extends Error{constructor(r){super("CancelledError"),this.revert=r==null?void 0:r.revert,this.silent=r==null?void 0:r.silent}};function _a(r){return r instanceof Ic}function $c(r){let e=!1,t=0,s=!1,n;const a=Ya(),i=v=>{var g;s||(m(new Ic(v)),(g=r.abort)==null||g.call(r))},l=()=>{e=!0},c=()=>{e=!1},d=()=>Li.isFocused()&&(r.networkMode==="always"||Bn.isOnline())&&r.canRun(),u=()=>Mc(r.networkMode)&&r.canRun(),h=v=>{var g;s||(s=!0,(g=r.onSuccess)==null||g.call(r,v),n==null||n(),a.resolve(v))},m=v=>{var g;s||(s=!0,(g=r.onError)==null||g.call(r,v),n==null||n(),a.reject(v))},p=()=>new Promise(v=>{var g;n=x=>{(s||d())&&v(x)},(g=r.onPause)==null||g.call(r)}).then(()=>{var v;n=void 0,s||(v=r.onContinue)==null||v.call(r)}),y=()=>{if(s)return;let v;const g=t===0?r.initialPromise:void 0;try{v=g??r.fn()}catch(x){v=Promise.reject(x)}Promise.resolve(v).then(h).catch(x=>{var D;if(s)return;const b=r.retry??(Fr?0:3),w=r.retryDelay??vf,E=typeof w=="function"?w(t,x):w,R=b===!0||typeof b=="number"&&t<b||typeof b=="function"&&b(t,x);if(e||!R){m(x);return}t++,(D=r.onFail)==null||D.call(r,t,x),ff(E).then(()=>d()?void 0:p()).then(()=>{e?m(x):y()})})};return{promise:a,cancel:i,continue:()=>(n==null||n(),a),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?y():p().then(y),a)}}function xf(){let r=[],e=0,t=l=>{l()},s=l=>{l()},n=l=>setTimeout(l,0);const a=l=>{e?r.push(l):n(()=>{t(l)})},i=()=>{const l=r;r=[],l.length&&n(()=>{s(()=>{l.forEach(c=>{t(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||i()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{t=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{n=l}}}var Oe=xf(),Pr,lc,Lc=(lc=class{constructor(){te(this,Pr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ha(this.gcTime)&&K(this,Pr,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(r){this.gcTime=Math.max(this.gcTime||0,r??(Fr?1/0:5*60*1e3))}clearGcTimeout(){S(this,Pr)&&(clearTimeout(S(this,Pr)),K(this,Pr,void 0))}},Pr=new WeakMap,lc),hs,fs,ct,ze,tn,Or,mt,Pt,cc,bf=(cc=class extends Lc{constructor(e){super();te(this,mt);te(this,hs);te(this,fs);te(this,ct);te(this,ze);te(this,tn);te(this,Or);K(this,Or,!1),K(this,tn,e.defaultOptions),this.setOptions(e.options),this.observers=[],K(this,ct,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,K(this,hs,wf(this.options)),this.state=e.state??S(this,hs),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=S(this,ze))==null?void 0:e.promise}setOptions(e){this.options={...S(this,tn),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&S(this,ct).remove(this)}setData(e,t){const s=Ga(this.state.data,e,this.options);return ce(this,mt,Pt).call(this,{data:s,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),s}setState(e,t){ce(this,mt,Pt).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var s,n;const t=(s=S(this,ze))==null?void 0:s.promise;return(n=S(this,ze))==null||n.cancel(e),t?t.then(dt).catch(dt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(S(this,hs))}isActive(){return this.observers.some(e=>gt(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===$i||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!Pc(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=S(this,ze))==null||t.continue()}onOnline(){var t;const e=this.observers.find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=S(this,ze))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),S(this,ct).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(S(this,ze)&&(S(this,Or)?S(this,ze).cancel({revert:!0}):S(this,ze).cancelRetry()),this.scheduleGc()),S(this,ct).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ce(this,mt,Pt).call(this,{type:"invalidate"})}fetch(e,t){var c,d,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(S(this,ze))return S(this,ze).continueRetry(),S(this,ze).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(m=>m.options.queryFn);h&&this.setOptions(h.options)}const s=new AbortController,n=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(K(this,Or,!0),s.signal)})},a=()=>{const h=Ac(this.options,t),m={queryKey:this.queryKey,meta:this.meta};return n(m),K(this,Or,!1),this.options.persister?this.options.persister(h,m,this):h(m)},i={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};n(i),(c=this.options.behavior)==null||c.onFetch(i,this),K(this,fs,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=i.fetchOptions)==null?void 0:d.meta))&&ce(this,mt,Pt).call(this,{type:"fetch",meta:(u=i.fetchOptions)==null?void 0:u.meta});const l=h=>{var m,p,y,v;_a(h)&&h.silent||ce(this,mt,Pt).call(this,{type:"error",error:h}),_a(h)||((p=(m=S(this,ct).config).onError)==null||p.call(m,h,this),(v=(y=S(this,ct).config).onSettled)==null||v.call(y,this.state.data,h,this)),this.scheduleGc()};return K(this,ze,$c({initialPromise:t==null?void 0:t.initialPromise,fn:i.fetchFn,abort:s.abort.bind(s),onSuccess:h=>{var m,p,y,v;if(h===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(g){l(g);return}(p=(m=S(this,ct).config).onSuccess)==null||p.call(m,h,this),(v=(y=S(this,ct).config).onSettled)==null||v.call(y,h,this.state.error,this),this.scheduleGc()},onError:l,onFail:(h,m)=>{ce(this,mt,Pt).call(this,{type:"failed",failureCount:h,error:m})},onPause:()=>{ce(this,mt,Pt).call(this,{type:"pause"})},onContinue:()=>{ce(this,mt,Pt).call(this,{type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0})),S(this,ze).start()}},hs=new WeakMap,fs=new WeakMap,ct=new WeakMap,ze=new WeakMap,tn=new WeakMap,Or=new WeakMap,mt=new WeakSet,Pt=function(e){const t=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...Fc(s.data,this.options),fetchMeta:e.meta??null};case"success":return{...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=e.error;return _a(n)&&n.revert&&S(this,fs)?{...S(this,fs),fetchStatus:"idle"}:{...s,error:n,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=t(this.state),Oe.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),S(this,ct).notify({query:this,type:"updated",action:e})})},cc);function Fc(r,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Mc(e.networkMode)?"fetching":"paused",...r===void 0&&{error:null,status:"pending"}}}function wf(r){const e=typeof r.initialData=="function"?r.initialData():r.initialData,t=e!==void 0,s=t?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var wt,dc,kf=(dc=class extends _s{constructor(e={}){super();te(this,wt);this.config=e,K(this,wt,new Map)}build(e,t,s){const n=t.queryKey,a=t.queryHash??Ii(n,t);let i=this.get(a);return i||(i=new bf({cache:this,queryKey:n,queryHash:a,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(n)}),this.add(i)),i}add(e){S(this,wt).has(e.queryHash)||(S(this,wt).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=S(this,wt).get(e.queryHash);t&&(e.destroy(),t===e&&S(this,wt).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Oe.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return S(this,wt).get(e)}getAll(){return[...S(this,wt).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(s=>Mo(t,s))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(s=>Mo(e,s)):t}notify(e){Oe.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Oe.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Oe.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},wt=new WeakMap,dc),kt,Ve,Ar,jt,Xt,uc,jf=(uc=class extends Lc{constructor(e){super();te(this,jt);te(this,kt);te(this,Ve);te(this,Ar);this.mutationId=e.mutationId,K(this,Ve,e.mutationCache),K(this,kt,[]),this.state=e.state||Uc(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){S(this,kt).includes(e)||(S(this,kt).push(e),this.clearGcTimeout(),S(this,Ve).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){K(this,kt,S(this,kt).filter(t=>t!==e)),this.scheduleGc(),S(this,Ve).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){S(this,kt).length||(this.state.status==="pending"?this.scheduleGc():S(this,Ve).remove(this))}continue(){var e;return((e=S(this,Ar))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var n,a,i,l,c,d,u,h,m,p,y,v,g,x,b,w,E,R,D,j;K(this,Ar,$c({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:($,N)=>{ce(this,jt,Xt).call(this,{type:"failed",failureCount:$,error:N})},onPause:()=>{ce(this,jt,Xt).call(this,{type:"pause"})},onContinue:()=>{ce(this,jt,Xt).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>S(this,Ve).canRun(this)}));const t=this.state.status==="pending",s=!S(this,Ar).canStart();try{if(!t){ce(this,jt,Xt).call(this,{type:"pending",variables:e,isPaused:s}),await((a=(n=S(this,Ve).config).onMutate)==null?void 0:a.call(n,e,this));const N=await((l=(i=this.options).onMutate)==null?void 0:l.call(i,e));N!==this.state.context&&ce(this,jt,Xt).call(this,{type:"pending",context:N,variables:e,isPaused:s})}const $=await S(this,Ar).start();return await((d=(c=S(this,Ve).config).onSuccess)==null?void 0:d.call(c,$,e,this.state.context,this)),await((h=(u=this.options).onSuccess)==null?void 0:h.call(u,$,e,this.state.context)),await((p=(m=S(this,Ve).config).onSettled)==null?void 0:p.call(m,$,null,this.state.variables,this.state.context,this)),await((v=(y=this.options).onSettled)==null?void 0:v.call(y,$,null,e,this.state.context)),ce(this,jt,Xt).call(this,{type:"success",data:$}),$}catch($){try{throw await((x=(g=S(this,Ve).config).onError)==null?void 0:x.call(g,$,e,this.state.context,this)),await((w=(b=this.options).onError)==null?void 0:w.call(b,$,e,this.state.context)),await((R=(E=S(this,Ve).config).onSettled)==null?void 0:R.call(E,void 0,$,this.state.variables,this.state.context,this)),await((j=(D=this.options).onSettled)==null?void 0:j.call(D,void 0,$,e,this.state.context)),$}finally{ce(this,jt,Xt).call(this,{type:"error",error:$})}}finally{S(this,Ve).runNext(this)}}},kt=new WeakMap,Ve=new WeakMap,Ar=new WeakMap,jt=new WeakSet,Xt=function(e){const t=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Oe.batch(()=>{S(this,kt).forEach(s=>{s.onMutationUpdate(e)}),S(this,Ve).notify({mutation:this,type:"updated",action:e})})},uc);function Uc(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var at,rn,hc,Sf=(hc=class extends _s{constructor(e={}){super();te(this,at);te(this,rn);this.config=e,K(this,at,new Map),K(this,rn,Date.now())}build(e,t,s){const n=new jf({mutationCache:this,mutationId:++kn(this,rn)._,options:e.defaultMutationOptions(t),state:s});return this.add(n),n}add(e){const t=jn(e),s=S(this,at).get(t)??[];s.push(e),S(this,at).set(t,s),this.notify({type:"added",mutation:e})}remove(e){var s;const t=jn(e);if(S(this,at).has(t)){const n=(s=S(this,at).get(t))==null?void 0:s.filter(a=>a!==e);n&&(n.length===0?S(this,at).delete(t):S(this,at).set(t,n))}this.notify({type:"removed",mutation:e})}canRun(e){var s;const t=(s=S(this,at).get(jn(e)))==null?void 0:s.find(n=>n.state.status==="pending");return!t||t===e}runNext(e){var s;const t=(s=S(this,at).get(jn(e)))==null?void 0:s.find(n=>n!==e&&n.state.isPaused);return(t==null?void 0:t.continue())??Promise.resolve()}clear(){Oe.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...S(this,at).values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(s=>Io(t,s))}findAll(e={}){return this.getAll().filter(t=>Io(e,t))}notify(e){Oe.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Oe.batch(()=>Promise.all(e.map(t=>t.continue().catch(dt))))}},at=new WeakMap,rn=new WeakMap,hc);function jn(r){var e;return((e=r.options.scope)==null?void 0:e.id)??String(r.mutationId)}function Fo(r){return{onFetch:(e,t)=>{var u,h,m,p,y;const s=e.options,n=(m=(h=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:m.direction,a=((p=e.state.data)==null?void 0:p.pages)||[],i=((y=e.state.data)==null?void 0:y.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let v=!1;const g=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},x=Ac(e.options,e.fetchOptions),b=async(w,E,R)=>{if(v)return Promise.reject();if(E==null&&w.pages.length)return Promise.resolve(w);const D={queryKey:e.queryKey,pageParam:E,direction:R?"backward":"forward",meta:e.options.meta};g(D);const j=await x(D),{maxPages:$}=e.options,N=R?pf:mf;return{pages:N(w.pages,j,$),pageParams:N(w.pageParams,E,$)}};if(n&&a.length){const w=n==="backward",E=w?_f:Uo,R={pages:a,pageParams:i},D=E(s,R);l=await b(R,D,w)}else{const w=r??a.length;do{const E=c===0?i[0]??s.initialPageParam:Uo(s,l);if(c>0&&E==null)break;l=await b(l,E),c++}while(c<w)}return l};e.options.persister?e.fetchFn=()=>{var v,g;return(g=(v=e.options).persister)==null?void 0:g.call(v,d,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=d}}}function Uo(r,{pages:e,pageParams:t}){const s=e.length-1;return e.length>0?r.getNextPageParam(e[s],e,t[s],t):void 0}function _f(r,{pages:e,pageParams:t}){var s;return e.length>0?(s=r.getPreviousPageParam)==null?void 0:s.call(r,e[0],e,t[0],t):void 0}var Ee,ar,ir,ms,ps,or,gs,ys,fc,Ef=(fc=class{constructor(r={}){te(this,Ee);te(this,ar);te(this,ir);te(this,ms);te(this,ps);te(this,or);te(this,gs);te(this,ys);K(this,Ee,r.queryCache||new kf),K(this,ar,r.mutationCache||new Sf),K(this,ir,r.defaultOptions||{}),K(this,ms,new Map),K(this,ps,new Map),K(this,or,0)}mount(){kn(this,or)._++,S(this,or)===1&&(K(this,gs,Li.subscribe(async r=>{r&&(await this.resumePausedMutations(),S(this,Ee).onFocus())})),K(this,ys,Bn.subscribe(async r=>{r&&(await this.resumePausedMutations(),S(this,Ee).onOnline())})))}unmount(){var r,e;kn(this,or)._--,S(this,or)===0&&((r=S(this,gs))==null||r.call(this),K(this,gs,void 0),(e=S(this,ys))==null||e.call(this),K(this,ys,void 0))}isFetching(r){return S(this,Ee).findAll({...r,fetchStatus:"fetching"}).length}isMutating(r){return S(this,ar).findAll({...r,status:"pending"}).length}getQueryData(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=S(this,Ee).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(r){const e=this.getQueryData(r.queryKey);if(e===void 0)return this.fetchQuery(r);{const t=this.defaultQueryOptions(r),s=S(this,Ee).build(this,t);return r.revalidateIfStale&&s.isStaleByTime(as(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(e)}}getQueriesData(r){return S(this,Ee).findAll(r).map(({queryKey:e,state:t})=>{const s=t.data;return[e,s]})}setQueryData(r,e,t){const s=this.defaultQueryOptions({queryKey:r}),n=S(this,Ee).get(s.queryHash),a=n==null?void 0:n.state.data,i=hf(e,a);if(i!==void 0)return S(this,Ee).build(this,s).setData(i,{...t,manual:!0})}setQueriesData(r,e,t){return Oe.batch(()=>S(this,Ee).findAll(r).map(({queryKey:s})=>[s,this.setQueryData(s,e,t)]))}getQueryState(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=S(this,Ee).get(e.queryHash))==null?void 0:t.state}removeQueries(r){const e=S(this,Ee);Oe.batch(()=>{e.findAll(r).forEach(t=>{e.remove(t)})})}resetQueries(r,e){const t=S(this,Ee),s={type:"active",...r};return Oe.batch(()=>(t.findAll(r).forEach(n=>{n.reset()}),this.refetchQueries(s,e)))}cancelQueries(r={},e={}){const t={revert:!0,...e},s=Oe.batch(()=>S(this,Ee).findAll(r).map(n=>n.cancel(t)));return Promise.all(s).then(dt).catch(dt)}invalidateQueries(r={},e={}){return Oe.batch(()=>{if(S(this,Ee).findAll(r).forEach(s=>{s.invalidate()}),r.refetchType==="none")return Promise.resolve();const t={...r,type:r.refetchType??r.type??"active"};return this.refetchQueries(t,e)})}refetchQueries(r={},e){const t={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},s=Oe.batch(()=>S(this,Ee).findAll(r).filter(n=>!n.isDisabled()).map(n=>{let a=n.fetch(void 0,t);return t.throwOnError||(a=a.catch(dt)),n.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(s).then(dt)}fetchQuery(r){const e=this.defaultQueryOptions(r);e.retry===void 0&&(e.retry=!1);const t=S(this,Ee).build(this,e);return t.isStaleByTime(as(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(r){return this.fetchQuery(r).then(dt).catch(dt)}fetchInfiniteQuery(r){return r.behavior=Fo(r.pages),this.fetchQuery(r)}prefetchInfiniteQuery(r){return this.fetchInfiniteQuery(r).then(dt).catch(dt)}ensureInfiniteQueryData(r){return r.behavior=Fo(r.pages),this.ensureQueryData(r)}resumePausedMutations(){return Bn.isOnline()?S(this,ar).resumePausedMutations():Promise.resolve()}getQueryCache(){return S(this,Ee)}getMutationCache(){return S(this,ar)}getDefaultOptions(){return S(this,ir)}setDefaultOptions(r){K(this,ir,r)}setQueryDefaults(r,e){S(this,ms).set(Ur(r),{queryKey:r,defaultOptions:e})}getQueryDefaults(r){const e=[...S(this,ms).values()];let t={};return e.forEach(s=>{Qs(r,s.queryKey)&&(t={...t,...s.defaultOptions})}),t}setMutationDefaults(r,e){S(this,ps).set(Ur(r),{mutationKey:r,defaultOptions:e})}getMutationDefaults(r){const e=[...S(this,ps).values()];let t={};return e.forEach(s=>{Qs(r,s.mutationKey)&&(t={...t,...s.defaultOptions})}),t}defaultQueryOptions(r){if(r._defaulted)return r;const e={...S(this,ir).queries,...this.getQueryDefaults(r.queryKey),...r,_defaulted:!0};return e.queryHash||(e.queryHash=Ii(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===$i&&(e.enabled=!1),e}defaultMutationOptions(r){return r!=null&&r._defaulted?r:{...S(this,ir).mutations,...(r==null?void 0:r.mutationKey)&&this.getMutationDefaults(r.mutationKey),...r,_defaulted:!0}}clear(){S(this,Ee).clear(),S(this,ar).clear()}},Ee=new WeakMap,ar=new WeakMap,ir=new WeakMap,ms=new WeakMap,ps=new WeakMap,or=new WeakMap,gs=new WeakMap,ys=new WeakMap,fc),et,ge,sn,Ge,Mr,vs,lr,St,nn,xs,bs,Ir,$r,cr,ws,xe,Bs,Qa,Ja,Xa,Za,ei,ti,ri,Bc,mc,Nf=(mc=class extends _s{constructor(e,t){super();te(this,xe);te(this,et);te(this,ge);te(this,sn);te(this,Ge);te(this,Mr);te(this,vs);te(this,lr);te(this,St);te(this,nn);te(this,xs);te(this,bs);te(this,Ir);te(this,$r);te(this,cr);te(this,ws,new Set);this.options=t,K(this,et,e),K(this,St,null),K(this,lr,Ya()),this.options.experimental_prefetchInRender||S(this,lr).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(S(this,ge).addObserver(this),Bo(S(this,ge),this.options)?ce(this,xe,Bs).call(this):this.updateResult(),ce(this,xe,Za).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return si(S(this,ge),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return si(S(this,ge),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ce(this,xe,ei).call(this),ce(this,xe,ti).call(this),S(this,ge).removeObserver(this)}setOptions(e,t){const s=this.options,n=S(this,ge);if(this.options=S(this,et).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof gt(this.options.enabled,S(this,ge))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ce(this,xe,ri).call(this),S(this,ge).setOptions(this.options),s._defaulted&&!Un(this.options,s)&&S(this,et).getQueryCache().notify({type:"observerOptionsUpdated",query:S(this,ge),observer:this});const a=this.hasListeners();a&&zo(S(this,ge),n,this.options,s)&&ce(this,xe,Bs).call(this),this.updateResult(t),a&&(S(this,ge)!==n||gt(this.options.enabled,S(this,ge))!==gt(s.enabled,S(this,ge))||as(this.options.staleTime,S(this,ge))!==as(s.staleTime,S(this,ge)))&&ce(this,xe,Qa).call(this);const i=ce(this,xe,Ja).call(this);a&&(S(this,ge)!==n||gt(this.options.enabled,S(this,ge))!==gt(s.enabled,S(this,ge))||i!==S(this,cr))&&ce(this,xe,Xa).call(this,i)}getOptimisticResult(e){const t=S(this,et).getQueryCache().build(S(this,et),e),s=this.createResult(t,e);return Rf(this,s)&&(K(this,Ge,s),K(this,vs,this.options),K(this,Mr,S(this,ge).state)),s}getCurrentResult(){return S(this,Ge)}trackResult(e,t){const s={};return Object.keys(e).forEach(n=>{Object.defineProperty(s,n,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(n),t==null||t(n),e[n])})}),s}trackProp(e){S(this,ws).add(e)}getCurrentQuery(){return S(this,ge)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=S(this,et).defaultQueryOptions(e),s=S(this,et).getQueryCache().build(S(this,et),t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){return ce(this,xe,Bs).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),S(this,Ge)))}createResult(e,t){var $;const s=S(this,ge),n=this.options,a=S(this,Ge),i=S(this,Mr),l=S(this,vs),d=e!==s?e.state:S(this,sn),{state:u}=e;let h={...u},m=!1,p;if(t._optimisticResults){const N=this.hasListeners(),A=!N&&Bo(e,t),F=N&&zo(e,s,t,n);(A||F)&&(h={...h,...Fc(u.data,e.options)}),t._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:y,errorUpdatedAt:v,status:g}=h;if(t.select&&h.data!==void 0)if(a&&h.data===(i==null?void 0:i.data)&&t.select===S(this,nn))p=S(this,xs);else try{K(this,nn,t.select),p=t.select(h.data),p=Ga(a==null?void 0:a.data,p,t),K(this,xs,p),K(this,St,null)}catch(N){K(this,St,N)}else p=h.data;if(t.placeholderData!==void 0&&p===void 0&&g==="pending"){let N;if(a!=null&&a.isPlaceholderData&&t.placeholderData===(l==null?void 0:l.placeholderData))N=a.data;else if(N=typeof t.placeholderData=="function"?t.placeholderData(($=S(this,bs))==null?void 0:$.state.data,S(this,bs)):t.placeholderData,t.select&&N!==void 0)try{N=t.select(N),K(this,St,null)}catch(A){K(this,St,A)}N!==void 0&&(g="success",p=Ga(a==null?void 0:a.data,N,t),m=!0)}S(this,St)&&(y=S(this,St),p=S(this,xs),v=Date.now(),g="error");const x=h.fetchStatus==="fetching",b=g==="pending",w=g==="error",E=b&&x,R=p!==void 0,j={status:g,fetchStatus:h.fetchStatus,isPending:b,isSuccess:g==="success",isError:w,isInitialLoading:E,isLoading:E,data:p,dataUpdatedAt:h.dataUpdatedAt,error:y,errorUpdatedAt:v,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:x,isRefetching:x&&!b,isLoadingError:w&&!R,isPaused:h.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:w&&R,isStale:Fi(e,t),refetch:this.refetch,promise:S(this,lr)};if(this.options.experimental_prefetchInRender){const N=T=>{j.status==="error"?T.reject(j.error):j.data!==void 0&&T.resolve(j.data)},A=()=>{const T=K(this,lr,j.promise=Ya());N(T)},F=S(this,lr);switch(F.status){case"pending":e.queryHash===s.queryHash&&N(F);break;case"fulfilled":(j.status==="error"||j.data!==F.value)&&A();break;case"rejected":(j.status!=="error"||j.error!==F.reason)&&A();break}}return j}updateResult(e){const t=S(this,Ge),s=this.createResult(S(this,ge),this.options);if(K(this,Mr,S(this,ge).state),K(this,vs,this.options),S(this,Mr).data!==void 0&&K(this,bs,S(this,ge)),Un(s,t))return;K(this,Ge,s);const n={},a=()=>{if(!t)return!0;const{notifyOnChangeProps:i}=this.options,l=typeof i=="function"?i():i;if(l==="all"||!l&&!S(this,ws).size)return!0;const c=new Set(l??S(this,ws));return this.options.throwOnError&&c.add("error"),Object.keys(S(this,Ge)).some(d=>{const u=d;return S(this,Ge)[u]!==t[u]&&c.has(u)})};(e==null?void 0:e.listeners)!==!1&&a()&&(n.listeners=!0),ce(this,xe,Bc).call(this,{...n,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ce(this,xe,Za).call(this)}},et=new WeakMap,ge=new WeakMap,sn=new WeakMap,Ge=new WeakMap,Mr=new WeakMap,vs=new WeakMap,lr=new WeakMap,St=new WeakMap,nn=new WeakMap,xs=new WeakMap,bs=new WeakMap,Ir=new WeakMap,$r=new WeakMap,cr=new WeakMap,ws=new WeakMap,xe=new WeakSet,Bs=function(e){ce(this,xe,ri).call(this);let t=S(this,ge).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(dt)),t},Qa=function(){ce(this,xe,ei).call(this);const e=as(this.options.staleTime,S(this,ge));if(Fr||S(this,Ge).isStale||!Ha(e))return;const s=Pc(S(this,Ge).dataUpdatedAt,e)+1;K(this,Ir,setTimeout(()=>{S(this,Ge).isStale||this.updateResult()},s))},Ja=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(S(this,ge)):this.options.refetchInterval)??!1},Xa=function(e){ce(this,xe,ti).call(this),K(this,cr,e),!(Fr||gt(this.options.enabled,S(this,ge))===!1||!Ha(S(this,cr))||S(this,cr)===0)&&K(this,$r,setInterval(()=>{(this.options.refetchIntervalInBackground||Li.isFocused())&&ce(this,xe,Bs).call(this)},S(this,cr)))},Za=function(){ce(this,xe,Qa).call(this),ce(this,xe,Xa).call(this,ce(this,xe,Ja).call(this))},ei=function(){S(this,Ir)&&(clearTimeout(S(this,Ir)),K(this,Ir,void 0))},ti=function(){S(this,$r)&&(clearInterval(S(this,$r)),K(this,$r,void 0))},ri=function(){const e=S(this,et).getQueryCache().build(S(this,et),this.options);if(e===S(this,ge))return;const t=S(this,ge);K(this,ge,e),K(this,sn,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},Bc=function(e){Oe.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(S(this,Ge))}),S(this,et).getQueryCache().notify({query:S(this,ge),type:"observerResultsUpdated"})})},mc);function Cf(r,e){return gt(e.enabled,r)!==!1&&r.state.data===void 0&&!(r.state.status==="error"&&e.retryOnMount===!1)}function Bo(r,e){return Cf(r,e)||r.state.data!==void 0&&si(r,e,e.refetchOnMount)}function si(r,e,t){if(gt(e.enabled,r)!==!1){const s=typeof t=="function"?t(r):t;return s==="always"||s!==!1&&Fi(r,e)}return!1}function zo(r,e,t,s){return(r!==e||gt(s.enabled,r)===!1)&&(!t.suspense||r.state.status!=="error")&&Fi(r,t)}function Fi(r,e){return gt(e.enabled,r)!==!1&&r.isStaleByTime(as(e.staleTime,r))}function Rf(r,e){return!Un(r.getCurrentResult(),e)}var dr,ur,tt,$t,Bt,On,ni,pc,Df=(pc=class extends _s{constructor(t,s){super();te(this,Bt);te(this,dr);te(this,ur);te(this,tt);te(this,$t);K(this,dr,t),this.setOptions(s),this.bindMethods(),ce(this,Bt,On).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var n;const s=this.options;this.options=S(this,dr).defaultMutationOptions(t),Un(this.options,s)||S(this,dr).getMutationCache().notify({type:"observerOptionsUpdated",mutation:S(this,tt),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&Ur(s.mutationKey)!==Ur(this.options.mutationKey)?this.reset():((n=S(this,tt))==null?void 0:n.state.status)==="pending"&&S(this,tt).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=S(this,tt))==null||t.removeObserver(this)}onMutationUpdate(t){ce(this,Bt,On).call(this),ce(this,Bt,ni).call(this,t)}getCurrentResult(){return S(this,ur)}reset(){var t;(t=S(this,tt))==null||t.removeObserver(this),K(this,tt,void 0),ce(this,Bt,On).call(this),ce(this,Bt,ni).call(this)}mutate(t,s){var n;return K(this,$t,s),(n=S(this,tt))==null||n.removeObserver(this),K(this,tt,S(this,dr).getMutationCache().build(S(this,dr),this.options)),S(this,tt).addObserver(this),S(this,tt).execute(t)}},dr=new WeakMap,ur=new WeakMap,tt=new WeakMap,$t=new WeakMap,Bt=new WeakSet,On=function(){var s;const t=((s=S(this,tt))==null?void 0:s.state)??Uc();K(this,ur,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},ni=function(t){Oe.batch(()=>{var s,n,a,i,l,c,d,u;if(S(this,$t)&&this.hasListeners()){const h=S(this,ur).variables,m=S(this,ur).context;(t==null?void 0:t.type)==="success"?((n=(s=S(this,$t)).onSuccess)==null||n.call(s,t.data,h,m),(i=(a=S(this,$t)).onSettled)==null||i.call(a,t.data,null,h,m)):(t==null?void 0:t.type)==="error"&&((c=(l=S(this,$t)).onError)==null||c.call(l,t.error,h,m),(u=(d=S(this,$t)).onSettled)==null||u.call(d,void 0,t.error,h,m))}this.listeners.forEach(h=>{h(S(this,ur))})})},pc),zc=f.createContext(void 0),vt=r=>{const e=f.useContext(zc);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Tf=({client:r,children:e})=>(f.useEffect(()=>(r.mount(),()=>{r.unmount()}),[r]),o.jsx(zc.Provider,{value:r,children:e})),qc=f.createContext(!1),Pf=()=>f.useContext(qc);qc.Provider;function Of(){let r=!1;return{clearReset:()=>{r=!1},reset:()=>{r=!0},isReset:()=>r}}var Af=f.createContext(Of()),Mf=()=>f.useContext(Af);function Wc(r,e){return typeof r=="function"?r(...e):!!r}function ai(){}var If=(r,e)=>{(r.suspense||r.throwOnError||r.experimental_prefetchInRender)&&(e.isReset()||(r.retryOnMount=!1))},$f=r=>{f.useEffect(()=>{r.clearReset()},[r])},Lf=({result:r,errorResetBoundary:e,throwOnError:t,query:s})=>r.isError&&!e.isReset()&&!r.isFetching&&s&&Wc(t,[r.error,s]),Ff=r=>{r.suspense&&(r.staleTime===void 0&&(r.staleTime=1e3),typeof r.gcTime=="number"&&(r.gcTime=Math.max(r.gcTime,1e3)))},Uf=(r,e)=>r.isLoading&&r.isFetching&&!e,Bf=(r,e)=>(r==null?void 0:r.suspense)&&e.isPending,qo=(r,e,t)=>e.fetchOptimistic(r).catch(()=>{t.clearReset()});function zf(r,e,t){var u,h,m,p,y;const s=vt(),n=Pf(),a=Mf(),i=s.defaultQueryOptions(r);(h=(u=s.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||h.call(u,i),i._optimisticResults=n?"isRestoring":"optimistic",Ff(i),If(i,a),$f(a);const l=!s.getQueryCache().get(i.queryHash),[c]=f.useState(()=>new e(s,i)),d=c.getOptimisticResult(i);if(f.useSyncExternalStore(f.useCallback(v=>{const g=n?ai:c.subscribe(Oe.batchCalls(v));return c.updateResult(),g},[c,n]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),f.useEffect(()=>{c.setOptions(i,{listeners:!1})},[i,c]),Bf(i,d))throw qo(i,c,a);if(Lf({result:d,errorResetBoundary:a,throwOnError:i.throwOnError,query:s.getQueryCache().get(i.queryHash)}))throw d.error;if((p=(m=s.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||p.call(m,i,d),i.experimental_prefetchInRender&&!Fr&&Uf(d,n)){const v=l?qo(i,c,a):(y=s.getQueryCache().get(i.queryHash))==null?void 0:y.promise;v==null||v.catch(ai).finally(()=>{c.updateResult()})}return i.notifyOnChangeProps?d:c.trackResult(d)}function Nt(r,e){return zf(r,Nf)}function Wr(r,e){const t=vt(),[s]=f.useState(()=>new Df(t,r));f.useEffect(()=>{s.setOptions(r)},[s,r]);const n=f.useSyncExternalStore(f.useCallback(i=>s.subscribe(Oe.batchCalls(i)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),a=f.useCallback((i,l)=>{s.mutate(i,l).catch(ai)},[s]);if(n.error&&Wc(s.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:a,mutateAsync:n.mutate}}async function qf(r){if(!r.ok){const e=await r.text()||r.statusText;throw new Error(`${r.status}: ${e}`)}}const Wf=({on401:r})=>async({queryKey:e})=>{const t=await fetch(e.join("/"),{credentials:"include"});return await qf(t),await t.json()},Kf=new Ef({defaultOptions:{queries:{queryFn:Wf({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),Hf=1,Vf=1e6;let Ea=0;function Gf(){return Ea=(Ea+1)%Number.MAX_SAFE_INTEGER,Ea.toString()}const Na=new Map,Wo=r=>{if(Na.has(r))return;const e=setTimeout(()=>{Na.delete(r),Ks({type:"REMOVE_TOAST",toastId:r})},Vf);Na.set(r,e)},Yf=(r,e)=>{switch(e.type){case"ADD_TOAST":return{...r,toasts:[e.toast,...r.toasts].slice(0,Hf)};case"UPDATE_TOAST":return{...r,toasts:r.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?Wo(t):r.toasts.forEach(s=>{Wo(s.id)}),{...r,toasts:r.toasts.map(s=>s.id===t||t===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return e.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(t=>t.id!==e.toastId)}}},An=[];let Mn={toasts:[]};function Ks(r){Mn=Yf(Mn,r),An.forEach(e=>{e(Mn)})}function Qf({...r}){const e=Gf(),t=n=>Ks({type:"UPDATE_TOAST",toast:{...n,id:e}}),s=()=>Ks({type:"DISMISS_TOAST",toastId:e});return Ks({type:"ADD_TOAST",toast:{...r,id:e,open:!0,onOpenChange:n=>{n||s()}}}),{id:e,dismiss:s,update:t}}function Kr(){const[r,e]=f.useState(Mn);return f.useEffect(()=>(An.push(e),()=>{const t=An.indexOf(e);t>-1&&An.splice(t,1)}),[r]),{...r,toast:Qf,dismiss:t=>Ks({type:"DISMISS_TOAST",toastId:t})}}var Ui="ToastProvider",[Bi,Jf,Xf]=Fh("Toast"),[Kc]=an("Toast",[Xf]),[Zf,Yn]=Kc(Ui),Hc=r=>{const{__scopeToast:e,label:t="Notification",duration:s=5e3,swipeDirection:n="right",swipeThreshold:a=50,children:i}=r,[l,c]=f.useState(null),[d,u]=f.useState(0),h=f.useRef(!1),m=f.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${Ui}\`. Expected non-empty \`string\`.`),o.jsx(Bi.Provider,{scope:e,children:o.jsx(Zf,{scope:e,label:t,duration:s,swipeDirection:n,swipeThreshold:a,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:f.useCallback(()=>u(p=>p+1),[]),onToastRemove:f.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:m,children:i})})};Hc.displayName=Ui;var Vc="ToastViewport",em=["F8"],ii="toast.viewportPause",oi="toast.viewportResume",Gc=f.forwardRef((r,e)=>{const{__scopeToast:t,hotkey:s=em,label:n="Notifications ({hotkey})",...a}=r,i=Yn(Vc,t),l=Jf(t),c=f.useRef(null),d=f.useRef(null),u=f.useRef(null),h=f.useRef(null),m=Ss(e,h,i.onViewportChange),p=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=i.toastCount>0;f.useEffect(()=>{const g=x=>{var w;s.length!==0&&s.every(E=>x[E]||x.code===E)&&((w=h.current)==null||w.focus())};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[s]),f.useEffect(()=>{const g=c.current,x=h.current;if(y&&g&&x){const b=()=>{if(!i.isClosePausedRef.current){const D=new CustomEvent(ii);x.dispatchEvent(D),i.isClosePausedRef.current=!0}},w=()=>{if(i.isClosePausedRef.current){const D=new CustomEvent(oi);x.dispatchEvent(D),i.isClosePausedRef.current=!1}},E=D=>{!g.contains(D.relatedTarget)&&w()},R=()=>{g.contains(document.activeElement)||w()};return g.addEventListener("focusin",b),g.addEventListener("focusout",E),g.addEventListener("pointermove",b),g.addEventListener("pointerleave",R),window.addEventListener("blur",b),window.addEventListener("focus",w),()=>{g.removeEventListener("focusin",b),g.removeEventListener("focusout",E),g.removeEventListener("pointermove",b),g.removeEventListener("pointerleave",R),window.removeEventListener("blur",b),window.removeEventListener("focus",w)}}},[y,i.isClosePausedRef]);const v=f.useCallback(({tabbingDirection:g})=>{const b=l().map(w=>{const E=w.ref.current,R=[E,...fm(E)];return g==="forwards"?R:R.reverse()});return(g==="forwards"?b.reverse():b).flat()},[l]);return f.useEffect(()=>{const g=h.current;if(g){const x=b=>{var R,D,j;const w=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!w){const $=document.activeElement,N=b.shiftKey;if(b.target===g&&N){(R=d.current)==null||R.focus();return}const T=v({tabbingDirection:N?"backwards":"forwards"}),q=T.findIndex(P=>P===$);Ca(T.slice(q+1))?b.preventDefault():N?(D=d.current)==null||D.focus():(j=u.current)==null||j.focus()}};return g.addEventListener("keydown",x),()=>g.removeEventListener("keydown",x)}},[l,v]),o.jsxs(Uh,{ref:c,role:"region","aria-label":n.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&o.jsx(li,{ref:d,onFocusFromOutsideViewport:()=>{const g=v({tabbingDirection:"forwards"});Ca(g)}}),o.jsx(Bi.Slot,{scope:t,children:o.jsx(st.ol,{tabIndex:-1,...a,ref:m})}),y&&o.jsx(li,{ref:u,onFocusFromOutsideViewport:()=>{const g=v({tabbingDirection:"backwards"});Ca(g)}})]})});Gc.displayName=Vc;var Yc="ToastFocusProxy",li=f.forwardRef((r,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:s,...n}=r,a=Yn(Yc,t);return o.jsx(gc,{"aria-hidden":!0,tabIndex:0,...n,ref:e,style:{position:"fixed"},onFocus:i=>{var d;const l=i.relatedTarget;!((d=a.viewport)!=null&&d.contains(l))&&s()}})});li.displayName=Yc;var Qn="Toast",tm="toast.swipeStart",rm="toast.swipeMove",sm="toast.swipeCancel",nm="toast.swipeEnd",Qc=f.forwardRef((r,e)=>{const{forceMount:t,open:s,defaultOpen:n,onOpenChange:a,...i}=r,[l=!0,c]=Oi({prop:s,defaultProp:n,onChange:a});return o.jsx(Ai,{present:t||l,children:o.jsx(om,{open:l,...i,ref:e,onClose:()=>c(!1),onPause:Fn(r.onPause),onResume:Fn(r.onResume),onSwipeStart:Pe(r.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Pe(r.onSwipeMove,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Pe(r.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Pe(r.onSwipeEnd,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});Qc.displayName=Qn;var[am,im]=Kc(Qn,{onClose(){}}),om=f.forwardRef((r,e)=>{const{__scopeToast:t,type:s="foreground",duration:n,open:a,onClose:i,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:m,onSwipeEnd:p,...y}=r,v=Yn(Qn,t),[g,x]=f.useState(null),b=Ss(e,P=>x(P)),w=f.useRef(null),E=f.useRef(null),R=n||v.duration,D=f.useRef(0),j=f.useRef(R),$=f.useRef(0),{onToastAdd:N,onToastRemove:A}=v,F=Fn(()=>{var I;(g==null?void 0:g.contains(document.activeElement))&&((I=v.viewport)==null||I.focus()),i()}),T=f.useCallback(P=>{!P||P===1/0||(window.clearTimeout($.current),D.current=new Date().getTime(),$.current=window.setTimeout(F,P))},[F]);f.useEffect(()=>{const P=v.viewport;if(P){const I=()=>{T(j.current),d==null||d()},O=()=>{const U=new Date().getTime()-D.current;j.current=j.current-U,window.clearTimeout($.current),c==null||c()};return P.addEventListener(ii,O),P.addEventListener(oi,I),()=>{P.removeEventListener(ii,O),P.removeEventListener(oi,I)}}},[v.viewport,R,c,d,T]),f.useEffect(()=>{a&&!v.isClosePausedRef.current&&T(R)},[a,R,v.isClosePausedRef,T]),f.useEffect(()=>(N(),()=>A()),[N,A]);const q=f.useMemo(()=>g?sd(g):null,[g]);return v.viewport?o.jsxs(o.Fragment,{children:[q&&o.jsx(lm,{__scopeToast:t,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:q}),o.jsx(am,{scope:t,onClose:F,children:Mi.createPortal(o.jsx(Bi.ItemSlot,{scope:t,children:o.jsx(Bh,{asChild:!0,onEscapeKeyDown:Pe(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||F(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(st.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":v.swipeDirection,...y,ref:b,style:{userSelect:"none",touchAction:"none",...r.style},onKeyDown:Pe(r.onKeyDown,P=>{P.key==="Escape"&&(l==null||l(P.nativeEvent),P.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,F()))}),onPointerDown:Pe(r.onPointerDown,P=>{P.button===0&&(w.current={x:P.clientX,y:P.clientY})}),onPointerMove:Pe(r.onPointerMove,P=>{if(!w.current)return;const I=P.clientX-w.current.x,O=P.clientY-w.current.y,U=!!E.current,M=["left","right"].includes(v.swipeDirection),z=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,W=M?z(0,I):0,G=M?0:z(0,O),ne=P.pointerType==="touch"?10:2,ue={x:W,y:G},pe={originalEvent:P,delta:ue};U?(E.current=ue,Sn(rm,h,pe,{discrete:!1})):Ko(ue,v.swipeDirection,ne)?(E.current=ue,Sn(tm,u,pe,{discrete:!1}),P.target.setPointerCapture(P.pointerId)):(Math.abs(I)>ne||Math.abs(O)>ne)&&(w.current=null)}),onPointerUp:Pe(r.onPointerUp,P=>{const I=E.current,O=P.target;if(O.hasPointerCapture(P.pointerId)&&O.releasePointerCapture(P.pointerId),E.current=null,w.current=null,I){const U=P.currentTarget,M={originalEvent:P,delta:I};Ko(I,v.swipeDirection,v.swipeThreshold)?Sn(nm,p,M,{discrete:!0}):Sn(sm,m,M,{discrete:!0}),U.addEventListener("click",z=>z.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),lm=r=>{const{__scopeToast:e,children:t,...s}=r,n=Yn(Qn,e),[a,i]=f.useState(!1),[l,c]=f.useState(!1);return um(()=>i(!0)),f.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:o.jsx(zh,{asChild:!0,children:o.jsx(gc,{...s,children:a&&o.jsxs(o.Fragment,{children:[n.label," ",t]})})})},cm="ToastTitle",Jc=f.forwardRef((r,e)=>{const{__scopeToast:t,...s}=r;return o.jsx(st.div,{...s,ref:e})});Jc.displayName=cm;var dm="ToastDescription",Xc=f.forwardRef((r,e)=>{const{__scopeToast:t,...s}=r;return o.jsx(st.div,{...s,ref:e})});Xc.displayName=dm;var Zc="ToastAction",ed=f.forwardRef((r,e)=>{const{altText:t,...s}=r;return t.trim()?o.jsx(rd,{altText:t,asChild:!0,children:o.jsx(zi,{...s,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Zc}\`. Expected non-empty \`string\`.`),null)});ed.displayName=Zc;var td="ToastClose",zi=f.forwardRef((r,e)=>{const{__scopeToast:t,...s}=r,n=im(td,t);return o.jsx(rd,{asChild:!0,children:o.jsx(st.button,{type:"button",...s,ref:e,onClick:Pe(r.onClick,n.onClose)})})});zi.displayName=td;var rd=f.forwardRef((r,e)=>{const{__scopeToast:t,altText:s,...n}=r;return o.jsx(st.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...n,ref:e})});function sd(r){const e=[];return Array.from(r.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&e.push(s.textContent),hm(s)){const n=s.ariaHidden||s.hidden||s.style.display==="none",a=s.dataset.radixToastAnnounceExclude==="";if(!n)if(a){const i=s.dataset.radixToastAnnounceAlt;i&&e.push(i)}else e.push(...sd(s))}}),e}function Sn(r,e,t,{discrete:s}){const n=t.originalEvent.currentTarget,a=new CustomEvent(r,{bubbles:!0,cancelable:!0,detail:t});e&&n.addEventListener(r,e,{once:!0}),s?Wh(n,a):n.dispatchEvent(a)}var Ko=(r,e,t=0)=>{const s=Math.abs(r.x),n=Math.abs(r.y),a=s>n;return e==="left"||e==="right"?a&&s>t:!a&&n>t};function um(r=()=>{}){const e=Fn(r);qh(()=>{let t=0,s=0;return t=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(s)}},[e])}function hm(r){return r.nodeType===r.ELEMENT_NODE}function fm(r){const e=[],t=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const n=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||n?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Ca(r){const e=document.activeElement;return r.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var mm=Hc,nd=Gc,ad=Qc,id=Jc,od=Xc,ld=ed,cd=zi;function dd(r){var e,t,s="";if(typeof r=="string"||typeof r=="number")s+=r;else if(typeof r=="object")if(Array.isArray(r)){var n=r.length;for(e=0;e<n;e++)r[e]&&(t=dd(r[e]))&&(s&&(s+=" "),s+=t)}else for(t in r)r[t]&&(s&&(s+=" "),s+=t);return s}function ud(){for(var r,e,t=0,s="",n=arguments.length;t<n;t++)(r=arguments[t])&&(e=dd(r))&&(s&&(s+=" "),s+=e);return s}const Ho=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,Vo=ud,Jn=(r,e)=>t=>{var s;if((e==null?void 0:e.variants)==null)return Vo(r,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:n,defaultVariants:a}=e,i=Object.keys(n).map(d=>{const u=t==null?void 0:t[d],h=a==null?void 0:a[d];if(u===null)return null;const m=Ho(u)||Ho(h);return n[d][m]}),l=t&&Object.entries(t).reduce((d,u)=>{let[h,m]=u;return m===void 0||(d[h]=m),d},{}),c=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((d,u)=>{let{class:h,className:m,...p}=u;return Object.entries(p).every(y=>{let[v,g]=y;return Array.isArray(g)?g.includes({...a,...l}[v]):{...a,...l}[v]===g})?[...d,h,m]:d},[]);return Vo(r,i,c,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pm=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),hd=(...r)=>r.filter((e,t,s)=>!!e&&s.indexOf(e)===t).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gm={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ym=f.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:n="",children:a,iconNode:i,...l},c)=>f.createElement("svg",{ref:c,...gm,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:hd("lucide",n),...l},[...i.map(([d,u])=>f.createElement(d,u)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=(r,e)=>{const t=f.forwardRef(({className:s,...n},a)=>f.createElement(ym,{ref:a,iconNode:e,className:hd(`lucide-${pm(r)}`,s),...n}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fd=ee("Armchair",[["path",{d:"M19 9V6a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v3",key:"irtipd"}],["path",{d:"M3 16a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v1.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V11a2 2 0 0 0-4 0z",key:"1qyhux"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=ee("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ci=ee("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vm=ee("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xm=ee("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=ee("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=ee("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bm=ee("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qi=ee("CalendarRange",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=ee("CalendarX",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m14 14-4 4",key:"rymu2i"}],["path",{d:"m10 14 4 4",key:"3sz06r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=ee("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=ee("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=ee("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=ee("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wm=ee("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const km=ee("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=ee("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=ee("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vd=ee("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jm=ee("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sm=ee("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=ee("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=ee("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=ee("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Em=ee("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=ee("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=ee("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=ee("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=ee("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=ee("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nm=ee("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cm=ee("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rm=ee("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=ee("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=ee("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=ee("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=ee("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tm=ee("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=ee("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=ee("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Om=ee("Sofa",[["path",{d:"M20 9V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3",key:"1dgpiv"}],["path",{d:"M2 16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v1.5a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5V11a2 2 0 0 0-4 0z",key:"xacw8m"}],["path",{d:"M4 18v2",key:"jwo5n2"}],["path",{d:"M20 18v2",key:"1ar1qi"}],["path",{d:"M12 4v9",key:"oqhhn3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Am=ee("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=ee("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=ee("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im=ee("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $m=ee("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lm=ee("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=ee("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=ee("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=ee("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=ee("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=ee("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=ee("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Yi="-",Fm=r=>{const e=Bm(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=r;return{getClassGroupId:i=>{const l=i.split(Yi);return l[0]===""&&l.length!==1&&l.shift(),kd(l,e)||Um(i)},getConflictingClassGroupIds:(i,l)=>{const c=t[i]||[];return l&&s[i]?[...c,...s[i]]:c}}},kd=(r,e)=>{var i;if(r.length===0)return e.classGroupId;const t=r[0],s=e.nextPart.get(t),n=s?kd(r.slice(1),s):void 0;if(n)return n;if(e.validators.length===0)return;const a=r.join(Yi);return(i=e.validators.find(({validator:l})=>l(a)))==null?void 0:i.classGroupId},Jo=/^\[(.+)\]$/,Um=r=>{if(Jo.test(r)){const e=Jo.exec(r)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},Bm=r=>{const{theme:e,prefix:t}=r,s={nextPart:new Map,validators:[]};return qm(Object.entries(r.classGroups),t).forEach(([a,i])=>{hi(i,s,a,e)}),s},hi=(r,e,t,s)=>{r.forEach(n=>{if(typeof n=="string"){const a=n===""?e:Xo(e,n);a.classGroupId=t;return}if(typeof n=="function"){if(zm(n)){hi(n(s),e,t,s);return}e.validators.push({validator:n,classGroupId:t});return}Object.entries(n).forEach(([a,i])=>{hi(i,Xo(e,a),t,s)})})},Xo=(r,e)=>{let t=r;return e.split(Yi).forEach(s=>{t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t},zm=r=>r.isThemeGetter,qm=(r,e)=>e?r.map(([t,s])=>{const n=s.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([i,l])=>[e+i,l])):a);return[t,n]}):r,Wm=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,s=new Map;const n=(a,i)=>{t.set(a,i),e++,e>r&&(e=0,s=t,t=new Map)};return{get(a){let i=t.get(a);if(i!==void 0)return i;if((i=s.get(a))!==void 0)return n(a,i),i},set(a,i){t.has(a)?t.set(a,i):n(a,i)}}},jd="!",Km=r=>{const{separator:e,experimentalParseClassName:t}=r,s=e.length===1,n=e[0],a=e.length,i=l=>{const c=[];let d=0,u=0,h;for(let g=0;g<l.length;g++){let x=l[g];if(d===0){if(x===n&&(s||l.slice(g,g+a)===e)){c.push(l.slice(u,g)),u=g+a;continue}if(x==="/"){h=g;continue}}x==="["?d++:x==="]"&&d--}const m=c.length===0?l:l.substring(u),p=m.startsWith(jd),y=p?m.substring(1):m,v=h&&h>u?h-u:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:y,maybePostfixModifierPosition:v}};return t?l=>t({className:l,parseClassName:i}):i},Hm=r=>{if(r.length<=1)return r;const e=[];let t=[];return r.forEach(s=>{s[0]==="["?(e.push(...t.sort(),s),t=[]):t.push(s)}),e.push(...t.sort()),e},Vm=r=>({cache:Wm(r.cacheSize),parseClassName:Km(r),...Fm(r)}),Gm=/\s+/,Ym=(r,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:n}=e,a=[],i=r.trim().split(Gm);let l="";for(let c=i.length-1;c>=0;c-=1){const d=i[c],{modifiers:u,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:p}=t(d);let y=!!p,v=s(y?m.substring(0,p):m);if(!v){if(!y){l=d+(l.length>0?" "+l:l);continue}if(v=s(m),!v){l=d+(l.length>0?" "+l:l);continue}y=!1}const g=Hm(u).join(":"),x=h?g+jd:g,b=x+v;if(a.includes(b))continue;a.push(b);const w=n(v,y);for(let E=0;E<w.length;++E){const R=w[E];a.push(x+R)}l=d+(l.length>0?" "+l:l)}return l};function Qm(){let r=0,e,t,s="";for(;r<arguments.length;)(e=arguments[r++])&&(t=Sd(e))&&(s&&(s+=" "),s+=t);return s}const Sd=r=>{if(typeof r=="string")return r;let e,t="";for(let s=0;s<r.length;s++)r[s]&&(e=Sd(r[s]))&&(t&&(t+=" "),t+=e);return t};function Jm(r,...e){let t,s,n,a=i;function i(c){const d=e.reduce((u,h)=>h(u),r());return t=Vm(d),s=t.cache.get,n=t.cache.set,a=l,l(c)}function l(c){const d=s(c);if(d)return d;const u=Ym(c,t);return n(c,u),u}return function(){return a(Qm.apply(null,arguments))}}const Se=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},_d=/^\[(?:([a-z-]+):)?(.+)\]$/i,Xm=/^\d+\/\d+$/,Zm=new Set(["px","full","screen"]),ep=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,tp=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,rp=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,sp=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,np=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Tt=r=>is(r)||Zm.has(r)||Xm.test(r),Yt=r=>Es(r,"length",hp),is=r=>!!r&&!Number.isNaN(Number(r)),Ra=r=>Es(r,"number",is),Ms=r=>!!r&&Number.isInteger(Number(r)),ap=r=>r.endsWith("%")&&is(r.slice(0,-1)),le=r=>_d.test(r),Qt=r=>ep.test(r),ip=new Set(["length","size","percentage"]),op=r=>Es(r,ip,Ed),lp=r=>Es(r,"position",Ed),cp=new Set(["image","url"]),dp=r=>Es(r,cp,mp),up=r=>Es(r,"",fp),Is=()=>!0,Es=(r,e,t)=>{const s=_d.exec(r);return s?s[1]?typeof e=="string"?s[1]===e:e.has(s[1]):t(s[2]):!1},hp=r=>tp.test(r)&&!rp.test(r),Ed=()=>!1,fp=r=>sp.test(r),mp=r=>np.test(r),pp=()=>{const r=Se("colors"),e=Se("spacing"),t=Se("blur"),s=Se("brightness"),n=Se("borderColor"),a=Se("borderRadius"),i=Se("borderSpacing"),l=Se("borderWidth"),c=Se("contrast"),d=Se("grayscale"),u=Se("hueRotate"),h=Se("invert"),m=Se("gap"),p=Se("gradientColorStops"),y=Se("gradientColorStopPositions"),v=Se("inset"),g=Se("margin"),x=Se("opacity"),b=Se("padding"),w=Se("saturate"),E=Se("scale"),R=Se("sepia"),D=Se("skew"),j=Se("space"),$=Se("translate"),N=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",le,e],T=()=>[le,e],q=()=>["",Tt,Yt],P=()=>["auto",is,le],I=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],O=()=>["solid","dashed","dotted","double","none"],U=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],M=()=>["start","end","center","between","around","evenly","stretch"],z=()=>["","0",le],W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],G=()=>[is,le];return{cacheSize:500,separator:":",theme:{colors:[Is],spacing:[Tt,Yt],blur:["none","",Qt,le],brightness:G(),borderColor:[r],borderRadius:["none","","full",Qt,le],borderSpacing:T(),borderWidth:q(),contrast:G(),grayscale:z(),hueRotate:G(),invert:z(),gap:T(),gradientColorStops:[r],gradientColorStopPositions:[ap,Yt],inset:F(),margin:F(),opacity:G(),padding:T(),saturate:G(),scale:G(),sepia:z(),skew:G(),space:T(),translate:T()},classGroups:{aspect:[{aspect:["auto","square","video",le]}],container:["container"],columns:[{columns:[Qt]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...I(),le]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ms,le]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",le]}],grow:[{grow:z()}],shrink:[{shrink:z()}],order:[{order:["first","last","none",Ms,le]}],"grid-cols":[{"grid-cols":[Is]}],"col-start-end":[{col:["auto",{span:["full",Ms,le]},le]}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":[Is]}],"row-start-end":[{row:["auto",{span:[Ms,le]},le]}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",le]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",le]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...M()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...M(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...M(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[j]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[j]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",le,e]}],"min-w":[{"min-w":[le,e,"min","max","fit"]}],"max-w":[{"max-w":[le,e,"none","full","min","max","fit","prose",{screen:[Qt]},Qt]}],h:[{h:[le,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[le,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[le,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[le,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Qt,Yt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ra]}],"font-family":[{font:[Is]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",le]}],"line-clamp":[{"line-clamp":["none",is,Ra]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Tt,le]}],"list-image":[{"list-image":["none",le]}],"list-style-type":[{list:["none","disc","decimal",le]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[r]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[r]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...O(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Tt,Yt]}],"underline-offset":[{"underline-offset":["auto",Tt,le]}],"text-decoration-color":[{decoration:[r]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",le]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",le]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...I(),lp]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",op]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},dp]}],"bg-color":[{bg:[r]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...O(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:O()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...O()]}],"outline-offset":[{"outline-offset":[Tt,le]}],"outline-w":[{outline:[Tt,Yt]}],"outline-color":[{outline:[r]}],"ring-w":[{ring:q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[r]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Tt,Yt]}],"ring-offset-color":[{"ring-offset":[r]}],shadow:[{shadow:["","inner","none",Qt,up]}],"shadow-color":[{shadow:[Is]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...U(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":U()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Qt,le]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[R]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",le]}],duration:[{duration:G()}],ease:[{ease:["linear","in","out","in-out",le]}],delay:[{delay:G()}],animate:[{animate:["none","spin","ping","pulse","bounce",le]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[Ms,le]}],"translate-x":[{"translate-x":[$]}],"translate-y":[{"translate-y":[$]}],"skew-x":[{"skew-x":[D]}],"skew-y":[{"skew-y":[D]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",le]}],accent:[{accent:["auto",r]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",le]}],"caret-color":[{caret:[r]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",le]}],fill:[{fill:[r,"none"]}],"stroke-w":[{stroke:[Tt,Yt,Ra]}],stroke:[{stroke:[r,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},gp=Jm(pp);function se(...r){return gp(ud(r))}const yp=mm,Nd=f.forwardRef(({className:r,...e},t)=>o.jsx(nd,{ref:t,className:se("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",r),...e}));Nd.displayName=nd.displayName;const vp=Jn("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Cd=f.forwardRef(({className:r,variant:e,...t},s)=>o.jsx(ad,{ref:s,className:se(vp({variant:e}),r),...t}));Cd.displayName=ad.displayName;const xp=f.forwardRef(({className:r,...e},t)=>o.jsx(ld,{ref:t,className:se("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",r),...e}));xp.displayName=ld.displayName;const Rd=f.forwardRef(({className:r,...e},t)=>o.jsx(cd,{ref:t,className:se("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",r),"toast-close":"",...e,children:o.jsx(Gi,{className:"h-4 w-4"})}));Rd.displayName=cd.displayName;const Dd=f.forwardRef(({className:r,...e},t)=>o.jsx(id,{ref:t,className:se("text-sm font-semibold",r),...e}));Dd.displayName=id.displayName;const Td=f.forwardRef(({className:r,...e},t)=>o.jsx(od,{ref:t,className:se("text-sm opacity-90",r),...e}));Td.displayName=od.displayName;function bp(){const{toasts:r}=Kr();return o.jsxs(yp,{children:[r.map(function({id:e,title:t,description:s,action:n,...a}){return o.jsxs(Cd,{...a,children:[o.jsxs("div",{className:"grid gap-1",children:[t&&o.jsx(Dd,{children:t}),s&&o.jsx(Td,{children:s})]}),n,o.jsx(Rd,{})]},e)}),o.jsx(Nd,{})]})}var[na]=an("Tooltip",[yc]),Qi=yc(),Pd="TooltipProvider",wp=700,Zo="tooltip.open",[kp,Od]=na(Pd),Ad=r=>{const{__scopeTooltip:e,delayDuration:t=wp,skipDelayDuration:s=300,disableHoverableContent:n=!1,children:a}=r,i=f.useRef(!0),l=f.useRef(!1),c=f.useRef(0);return f.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),o.jsx(kp,{scope:e,isOpenDelayedRef:i,delayDuration:t,onOpen:f.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:f.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,s)},[s]),isPointerInTransitRef:l,onPointerInTransitChange:f.useCallback(d=>{l.current=d},[]),disableHoverableContent:n,children:a})};Ad.displayName=Pd;var Md="Tooltip",[Ew,aa]=na(Md),fi="TooltipTrigger",jp=f.forwardRef((r,e)=>{const{__scopeTooltip:t,...s}=r,n=aa(fi,t),a=Od(fi,t),i=Qi(t),l=f.useRef(null),c=Ss(e,l,n.onTriggerChange),d=f.useRef(!1),u=f.useRef(!1),h=f.useCallback(()=>d.current=!1,[]);return f.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),o.jsx(Yh,{asChild:!0,...i,children:o.jsx(st.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...s,ref:c,onPointerMove:Pe(r.onPointerMove,m=>{m.pointerType!=="touch"&&!u.current&&!a.isPointerInTransitRef.current&&(n.onTriggerEnter(),u.current=!0)}),onPointerLeave:Pe(r.onPointerLeave,()=>{n.onTriggerLeave(),u.current=!1}),onPointerDown:Pe(r.onPointerDown,()=>{n.open&&n.onClose(),d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Pe(r.onFocus,()=>{d.current||n.onOpen()}),onBlur:Pe(r.onBlur,n.onClose),onClick:Pe(r.onClick,n.onClose)})})});jp.displayName=fi;var Sp="TooltipPortal",[Nw,_p]=na(Sp,{forceMount:void 0}),ks="TooltipContent",Id=f.forwardRef((r,e)=>{const t=_p(ks,r.__scopeTooltip),{forceMount:s=t.forceMount,side:n="top",...a}=r,i=aa(ks,r.__scopeTooltip);return o.jsx(Ai,{present:s||i.open,children:i.disableHoverableContent?o.jsx($d,{side:n,...a,ref:e}):o.jsx(Ep,{side:n,...a,ref:e})})}),Ep=f.forwardRef((r,e)=>{const t=aa(ks,r.__scopeTooltip),s=Od(ks,r.__scopeTooltip),n=f.useRef(null),a=Ss(e,n),[i,l]=f.useState(null),{trigger:c,onClose:d}=t,u=n.current,{onPointerInTransitChange:h}=s,m=f.useCallback(()=>{l(null),h(!1)},[h]),p=f.useCallback((y,v)=>{const g=y.currentTarget,x={x:y.clientX,y:y.clientY},b=Tp(x,g.getBoundingClientRect()),w=Pp(x,b),E=Op(v.getBoundingClientRect()),R=Mp([...w,...E]);l(R),h(!0)},[h]);return f.useEffect(()=>()=>m(),[m]),f.useEffect(()=>{if(c&&u){const y=g=>p(g,u),v=g=>p(g,c);return c.addEventListener("pointerleave",y),u.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",y),u.removeEventListener("pointerleave",v)}}},[c,u,p,m]),f.useEffect(()=>{if(i){const y=v=>{const g=v.target,x={x:v.clientX,y:v.clientY},b=(c==null?void 0:c.contains(g))||(u==null?void 0:u.contains(g)),w=!Ap(x,i);b?m():w&&(m(),d())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[c,u,i,d,m]),o.jsx($d,{...r,ref:a})}),[Np,Cp]=na(Md,{isInside:!1}),Rp=Vh("TooltipContent"),$d=f.forwardRef((r,e)=>{const{__scopeTooltip:t,children:s,"aria-label":n,onEscapeKeyDown:a,onPointerDownOutside:i,...l}=r,c=aa(ks,t),d=Qi(t),{onClose:u}=c;return f.useEffect(()=>(document.addEventListener(Zo,u),()=>document.removeEventListener(Zo,u)),[u]),f.useEffect(()=>{if(c.trigger){const h=m=>{const p=m.target;p!=null&&p.contains(c.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,u]),o.jsx(Kh,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:o.jsxs(Hh,{"data-state":c.stateAttribute,...d,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(Rp,{children:s}),o.jsx(Np,{scope:t,isInside:!0,children:o.jsx(Gh,{id:c.contentId,role:"tooltip",children:n||s})})]})})});Id.displayName=ks;var Ld="TooltipArrow",Dp=f.forwardRef((r,e)=>{const{__scopeTooltip:t,...s}=r,n=Qi(t);return Cp(Ld,t).isInside?null:o.jsx(Qh,{...n,...s,ref:e})});Dp.displayName=Ld;function Tp(r,e){const t=Math.abs(e.top-r.y),s=Math.abs(e.bottom-r.y),n=Math.abs(e.right-r.x),a=Math.abs(e.left-r.x);switch(Math.min(t,s,n,a)){case a:return"left";case n:return"right";case t:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function Pp(r,e,t=5){const s=[];switch(e){case"top":s.push({x:r.x-t,y:r.y+t},{x:r.x+t,y:r.y+t});break;case"bottom":s.push({x:r.x-t,y:r.y-t},{x:r.x+t,y:r.y-t});break;case"left":s.push({x:r.x+t,y:r.y-t},{x:r.x+t,y:r.y+t});break;case"right":s.push({x:r.x-t,y:r.y-t},{x:r.x-t,y:r.y+t});break}return s}function Op(r){const{top:e,right:t,bottom:s,left:n}=r;return[{x:n,y:e},{x:t,y:e},{x:t,y:s},{x:n,y:s}]}function Ap(r,e){const{x:t,y:s}=r;let n=!1;for(let a=0,i=e.length-1;a<e.length;i=a++){const l=e[a].x,c=e[a].y,d=e[i].x,u=e[i].y;c>s!=u>s&&t<(d-l)*(s-c)/(u-c)+l&&(n=!n)}return n}function Mp(r){const e=r.slice();return e.sort((t,s)=>t.x<s.x?-1:t.x>s.x?1:t.y<s.y?-1:t.y>s.y?1:0),Ip(e)}function Ip(r){if(r.length<=1)return r.slice();const e=[];for(let s=0;s<r.length;s++){const n=r[s];for(;e.length>=2;){const a=e[e.length-1],i=e[e.length-2];if((a.x-i.x)*(n.y-i.y)>=(a.y-i.y)*(n.x-i.x))e.pop();else break}e.push(n)}e.pop();const t=[];for(let s=r.length-1;s>=0;s--){const n=r[s];for(;t.length>=2;){const a=t[t.length-1],i=t[t.length-2];if((a.x-i.x)*(n.y-i.y)>=(a.y-i.y)*(n.x-i.x))t.pop();else break}t.push(n)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var $p=Ad,Fd=Id;const Lp=$p,Fp=f.forwardRef(({className:r,sideOffset:e=4,...t},s)=>o.jsx(Fd,{ref:s,sideOffset:e,className:se("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",r),...t}));Fp.displayName=Fd.displayName;/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Ud=r=>{throw TypeError(r)},Up=(r,e,t)=>e.has(r)||Ud("Cannot "+t),Da=(r,e,t)=>(Up(r,e,"read from private field"),t?t.call(r):e.get(r)),Bp=(r,e,t)=>e.has(r)?Ud("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),el="popstate";function zp(r={}){function e(s,n){let{pathname:a,search:i,hash:l}=s.location;return Js("",{pathname:a,search:i,hash:l},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function t(s,n){return typeof n=="string"?n:Et(n)}return Wp(e,t,null,r)}function he(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Ce(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qp(){return Math.random().toString(36).substring(2,10)}function tl(r,e){return{usr:r.state,key:r.key,idx:e}}function Js(r,e,t=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?yr(e):e,state:t,key:e&&e.key||s||qp()}}function Et({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function yr(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function Wp(r,e,t,s={}){let{window:n=document.defaultView,v5Compat:a=!1}=s,i=n.history,l="POP",c=null,d=u();d==null&&(d=0,i.replaceState({...i.state,idx:d},""));function u(){return(i.state||{idx:null}).idx}function h(){l="POP";let g=u(),x=g==null?null:g-d;d=g,c&&c({action:l,location:v.location,delta:x})}function m(g,x){l="PUSH";let b=Js(v.location,g,x);d=u()+1;let w=tl(b,d),E=v.createHref(b);try{i.pushState(w,"",E)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;n.location.assign(E)}a&&c&&c({action:l,location:v.location,delta:1})}function p(g,x){l="REPLACE";let b=Js(v.location,g,x);d=u();let w=tl(b,d),E=v.createHref(b);i.replaceState(w,"",E),a&&c&&c({action:l,location:v.location,delta:0})}function y(g){return Bd(g)}let v={get action(){return l},get location(){return r(n,i)},listen(g){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(el,h),c=g,()=>{n.removeEventListener(el,h),c=null}},createHref(g){return e(n,g)},createURL:y,encodeLocation(g){let x=y(g);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:p,go(g){return i.go(g)}};return v}function Bd(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),he(t,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:Et(r);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}var zs,rl=class{constructor(r){if(Bp(this,zs,new Map),r)for(let[e,t]of r)this.set(e,t)}get(r){if(Da(this,zs).has(r))return Da(this,zs).get(r);if(r.defaultValue!==void 0)return r.defaultValue;throw new Error("No value found for context")}set(r,e){Da(this,zs).set(r,e)}};zs=new WeakMap;var Kp=new Set(["lazy","caseSensitive","path","id","index","children"]);function Hp(r){return Kp.has(r)}var Vp=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function Gp(r){return Vp.has(r)}function Yp(r){return r.index===!0}function Xs(r,e,t=[],s={},n=!1){return r.map((a,i)=>{let l=[...t,String(i)],c=typeof a.id=="string"?a.id:l.join("-");if(he(a.index!==!0||!a.children,"Cannot specify children on an index route"),he(n||!s[c],`Found a route id collision on id "${c}".  Route id's must be globally unique within Data Router usages`),Yp(a)){let d={...a,id:c};return s[c]=sl(d,e(d)),d}else{let d={...a,id:c,children:void 0};return s[c]=sl(d,e(d)),a.children&&(d.children=Xs(a.children,e,l,s,n)),d}})}function sl(r,e){return Object.assign(r,{...e,...typeof e.lazy=="object"&&e.lazy!=null?{lazy:{...r.lazy,...e.lazy}}:{}})}function er(r,e,t="/"){return qs(r,e,t,!1)}function qs(r,e,t,s){let n=typeof e=="string"?yr(e):e,a=ht(n.pathname||"/",t);if(a==null)return null;let i=zd(r);Jp(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let d=lg(a);l=ig(i[c],d,s)}return l}function Qp(r,e){let{route:t,pathname:s,params:n}=r;return{id:t.id,pathname:s,params:n,data:e[t.id],loaderData:e[t.id],handle:t.handle}}function zd(r,e=[],t=[],s="",n=!1){let a=(i,l,c=n,d)=>{let u={relativePath:d===void 0?i.path||"":d,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(s)&&c)return;he(u.relativePath.startsWith(s),`Absolute route path "${u.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(s.length)}let h=_t([s,u.relativePath]),m=t.concat(u);i.children&&i.children.length>0&&(he(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),zd(i.children,e,m,h,c)),!(i.path==null&&!i.index)&&e.push({path:h,score:ng(h,i.index),routesMeta:m})};return r.forEach((i,l)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))a(i,l);else for(let d of qd(i.path))a(i,l,!0,d)}),e}function qd(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,n=t.endsWith("?"),a=t.replace(/\?$/,"");if(s.length===0)return n?[a,""]:[a];let i=qd(s.join("/")),l=[];return l.push(...i.map(c=>c===""?a:[a,c].join("/"))),n&&l.push(...i),l.map(c=>r.startsWith("/")&&c===""?"/":c)}function Jp(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:ag(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var Xp=/^:[\w-]+$/,Zp=3,eg=2,tg=1,rg=10,sg=-2,nl=r=>r==="*";function ng(r,e){let t=r.split("/"),s=t.length;return t.some(nl)&&(s+=sg),e&&(s+=eg),t.filter(n=>!nl(n)).reduce((n,a)=>n+(Xp.test(a)?Zp:a===""?tg:rg),s)}function ag(r,e){return r.length===e.length&&r.slice(0,-1).every((s,n)=>s===e[n])?r[r.length-1]-e[e.length-1]:0}function ig(r,e,t=!1){let{routesMeta:s}=r,n={},a="/",i=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,u=a==="/"?e:e.slice(a.length)||"/",h=qn({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),m=c.route;if(!h&&d&&t&&!s[s.length-1].route.index&&(h=qn({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(n,h.params),i.push({params:n,pathname:_t([a,h.pathname]),pathnameBase:ug(_t([a,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(a=_t([a,h.pathnameBase]))}return i}function qn(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=og(r.path,r.caseSensitive,r.end),n=e.match(t);if(!n)return null;let a=n[0],i=a.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:s.reduce((d,{paramName:u,isOptional:h},m)=>{if(u==="*"){let y=l[m]||"";i=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const p=l[m];return h&&!p?d[u]=void 0:d[u]=(p||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:i,pattern:r}}function og(r,e=!1,t=!0){Ce(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],n="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(s.push({paramName:"*"}),n+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?n+="\\/*$":r!==""&&r!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),s]}function lg(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ce(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function ht(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}function cg({basename:r,pathname:e}){return e==="/"?r:_t([r,e])}var Wd=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ji=r=>Wd.test(r);function dg(r,e="/"){let{pathname:t,search:s="",hash:n=""}=typeof r=="string"?yr(r):r,a;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?a=al(t.substring(1),"/"):a=al(t,e)):a=e,{pathname:a,search:hg(s),hash:fg(n)}}function al(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(n=>{n===".."?t.length>1&&t.pop():n!=="."&&t.push(n)}),t.length>1?t.join("/"):"/"}function Ta(r,e,t,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Kd(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function ia(r){let e=Kd(r);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function oa(r,e,t,s=!1){let n;typeof r=="string"?n=yr(r):(n={...r},he(!n.pathname||!n.pathname.includes("?"),Ta("?","pathname","search",n)),he(!n.pathname||!n.pathname.includes("#"),Ta("#","pathname","hash",n)),he(!n.search||!n.search.includes("#"),Ta("#","search","hash",n)));let a=r===""||n.pathname==="",i=a?"/":n.pathname,l;if(i==null)l=t;else{let h=e.length-1;if(!s&&i.startsWith("..")){let m=i.split("/");for(;m[0]==="..";)m.shift(),h-=1;n.pathname=m.join("/")}l=h>=0?e[h]:"/"}let c=dg(n,l),d=i&&i!=="/"&&i.endsWith("/"),u=(a||i===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}var _t=r=>r.join("/").replace(/\/\/+/g,"/"),ug=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),hg=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,fg=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,ln=class{constructor(r,e,t,s=!1){this.status=r,this.statusText=e||"",this.internal=s,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Zs(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function cn(r){return r.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Hd=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Vd(r,e){let t=r;if(typeof t!="string"||!Wd.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let s=t,n=!1;if(Hd)try{let a=new URL(window.location.href),i=t.startsWith("//")?new URL(a.protocol+t):new URL(t),l=ht(i.pathname,e);i.origin===a.origin&&l!=null?t=l+i.search+i.hash:n=!0}catch{Ce(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:n,to:t}}var hr=Symbol("Uninstrumented");function mg(r,e){let t={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};r.forEach(n=>n({id:e.id,index:e.index,path:e.path,instrument(a){let i=Object.keys(t);for(let l of i)a[l]&&t[l].push(a[l])}}));let s={};if(typeof e.lazy=="function"&&t.lazy.length>0){let n=ns(t.lazy,e.lazy,()=>{});n&&(s.lazy=n)}if(typeof e.lazy=="object"){let n=e.lazy;["middleware","loader","action"].forEach(a=>{let i=n[a],l=t[`lazy.${a}`];if(typeof i=="function"&&l.length>0){let c=ns(l,i,()=>{});c&&(s.lazy=Object.assign(s.lazy||{},{[a]:c}))}})}return["loader","action"].forEach(n=>{let a=e[n];if(typeof a=="function"&&t[n].length>0){let i=a[hr]??a,l=ns(t[n],i,(...c)=>il(c[0]));l&&(n==="loader"&&i.hydrate===!0&&(l.hydrate=!0),l[hr]=i,s[n]=l)}}),e.middleware&&e.middleware.length>0&&t.middleware.length>0&&(s.middleware=e.middleware.map(n=>{let a=n[hr]??n,i=ns(t.middleware,a,(...l)=>il(l[0]));return i?(i[hr]=a,i):n})),s}function pg(r,e){let t={navigate:[],fetch:[]};if(e.forEach(s=>s({instrument(n){let a=Object.keys(n);for(let i of a)n[i]&&t[i].push(n[i])}})),t.navigate.length>0){let s=r.navigate[hr]??r.navigate,n=ns(t.navigate,s,(...a)=>{let[i,l]=a;return{to:typeof i=="number"||typeof i=="string"?i:i?Et(i):".",...ol(r,l??{})}});n&&(n[hr]=s,r.navigate=n)}if(t.fetch.length>0){let s=r.fetch[hr]??r.fetch,n=ns(t.fetch,s,(...a)=>{let[i,,l,c]=a;return{href:l??".",fetcherKey:i,...ol(r,c??{})}});n&&(n[hr]=s,r.fetch=n)}return r}function ns(r,e,t){return r.length===0?null:async(...s)=>{let n=await Gd(r,t(...s),()=>e(...s),r.length-1);if(n.type==="error")throw n.value;return n.value}}async function Gd(r,e,t,s){let n=r[s],a;if(n){let i,l=async()=>(i?console.error("You cannot call instrumented handlers more than once"):i=Gd(r,e,t,s-1),a=await i,he(a,"Expected a result"),a.type==="error"&&a.value instanceof Error?{status:"error",error:a.value}:{status:"success",error:void 0});try{await n(l,e)}catch(c){console.error("An instrumentation function threw an error:",c)}i||await l(),await i}else try{a={type:"success",value:await t()}}catch(i){a={type:"error",value:i}}return a||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function il(r){let{request:e,context:t,params:s,unstable_pattern:n}=r;return{request:gg(e),params:{...s},unstable_pattern:n,context:yg(t)}}function ol(r,e){return{currentUrl:Et(r.state.location),..."formMethod"in e?{formMethod:e.formMethod}:{},..."formEncType"in e?{formEncType:e.formEncType}:{},..."formData"in e?{formData:e.formData}:{},..."body"in e?{body:e.body}:{}}}function gg(r){return{method:r.method,url:r.url,headers:{get:(...e)=>r.headers.get(...e)}}}function yg(r){if(xg(r)){let e={...r};return Object.freeze(e),e}else return{get:e=>r.get(e)}}var vg=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function xg(r){if(r===null||typeof r!="object")return!1;const e=Object.getPrototypeOf(r);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===vg}var Yd=["POST","PUT","PATCH","DELETE"],bg=new Set(Yd),wg=["GET",...Yd],kg=new Set(wg),Qd=new Set([301,302,303,307,308]),jg=new Set([307,308]),Pa={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Sg={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},$s={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},_g=r=>({hasErrorBoundary:!!r.hasErrorBoundary}),Jd="remix-router-transitions",Xd=Symbol("ResetLoaderData");function Eg(r){const e=r.window?r.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";he(r.routes.length>0,"You must provide a non-empty routes array to createRouter");let s=r.hydrationRouteProperties||[],n=r.mapRouteProperties||_g,a=n;if(r.unstable_instrumentations){let k=r.unstable_instrumentations;a=_=>({...n(_),...mg(k.map(C=>C.route).filter(Boolean),_)})}let i={},l=Xs(r.routes,a,void 0,i),c,d=r.basename||"/";d.startsWith("/")||(d=`/${d}`);let u=r.dataStrategy||Tg,h={...r.future},m=null,p=new Set,y=null,v=null,g=null,x=r.hydrationData!=null,b=er(l,r.history.location,d),w=!1,E=null,R;if(b==null&&!r.patchRoutesOnNavigation){let k=ut(404,{pathname:r.history.location.pathname}),{matches:_,route:C}=_n(l);R=!0,b=_,E={[C.id]:k}}else if(b&&!r.hydrationData&&yn(b,l,r.history.location.pathname).active&&(b=null),b)if(b.some(k=>k.route.lazy))R=!1;else if(!b.some(k=>Xi(k.route)))R=!0;else{let k=r.hydrationData?r.hydrationData.loaderData:null,_=r.hydrationData?r.hydrationData.errors:null;if(_){let C=b.findIndex(L=>_[L.route.id]!==void 0);R=b.slice(0,C+1).every(L=>!pi(L.route,k,_))}else R=b.every(C=>!pi(C.route,k,_))}else{R=!1,b=[];let k=yn(null,l,r.history.location.pathname);k.active&&k.matches&&(w=!0,b=k.matches)}let D,j={historyAction:r.history.action,location:r.history.location,matches:b,initialized:R,navigation:Pa,restoreScrollPosition:r.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:r.hydrationData&&r.hydrationData.loaderData||{},actionData:r.hydrationData&&r.hydrationData.actionData||null,errors:r.hydrationData&&r.hydrationData.errors||E,fetchers:new Map,blockers:new Map},$="POP",N=null,A=!1,F,T=!1,q=new Map,P=null,I=!1,O=!1,U=new Set,M=new Map,z=0,W=-1,G=new Map,ne=new Set,ue=new Map,pe=new Map,Y=new Set,be=new Map,De,Re=null;function Xe(){if(m=r.history.listen(({action:k,location:_,delta:C})=>{if(De){De(),De=void 0;return}Ce(be.size===0||C!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let L=Co({currentLocation:j.location,nextLocation:_,historyAction:k});if(L&&C!=null){let B=new Promise(Q=>{De=Q});r.history.go(C*-1),gn(L,{state:"blocked",location:_,proceed(){gn(L,{state:"proceeding",proceed:void 0,reset:void 0,location:_}),B.then(()=>r.history.go(C))},reset(){let Q=new Map(j.blockers);Q.set(L,$s),je({blockers:Q})}}),N==null||N.resolve(),N=null;return}return br(k,_)}),t){Yg(e,q);let k=()=>Qg(e,q);e.addEventListener("pagehide",k),P=()=>e.removeEventListener("pagehide",k)}return j.initialized||br("POP",j.location,{initialHydration:!0}),D}function Ae(){m&&m(),P&&P(),p.clear(),F&&F.abort(),j.fetchers.forEach((k,_)=>wa(_)),j.blockers.forEach((k,_)=>No(_))}function nt(k){return p.add(k),()=>p.delete(k)}function je(k,_={}){k.matches&&(k.matches=k.matches.map(B=>{let Q=i[B.route.id],Z=B.route;return Z.element!==Q.element||Z.errorElement!==Q.errorElement||Z.hydrateFallbackElement!==Q.hydrateFallbackElement?{...B,route:Q}:B})),j={...j,...k};let C=[],L=[];j.fetchers.forEach((B,Q)=>{B.state==="idle"&&(Y.has(Q)?C.push(Q):L.push(Q))}),Y.forEach(B=>{!j.fetchers.has(B)&&!M.has(B)&&C.push(B)}),[...p].forEach(B=>B(j,{deletedFetchers:C,newErrors:k.errors??null,viewTransitionOpts:_.viewTransitionOpts,flushSync:_.flushSync===!0})),C.forEach(B=>wa(B)),L.forEach(B=>j.fetchers.delete(B))}function Me(k,_,{flushSync:C}={}){var ae,J;let L=j.actionData!=null&&j.navigation.formMethod!=null&&qe(j.navigation.formMethod)&&j.navigation.state==="loading"&&((ae=k.state)==null?void 0:ae._isRedirect)!==!0,B;_.actionData?Object.keys(_.actionData).length>0?B=_.actionData:B=null:L?B=j.actionData:B=null;let Q=_.loaderData?yl(j.loaderData,_.loaderData,_.matches||[],_.errors):j.loaderData,Z=j.blockers;Z.size>0&&(Z=new Map(Z),Z.forEach((oe,ye)=>Z.set(ye,$s)));let H=I?!1:Do(k,_.matches||j.matches),V=A===!0||j.navigation.formMethod!=null&&qe(j.navigation.formMethod)&&((J=k.state)==null?void 0:J._isRedirect)!==!0;c&&(l=c,c=void 0),I||$==="POP"||($==="PUSH"?r.history.push(k,k.state):$==="REPLACE"&&r.history.replace(k,k.state));let X;if($==="POP"){let oe=q.get(j.location.pathname);oe&&oe.has(k.pathname)?X={currentLocation:j.location,nextLocation:k}:q.has(k.pathname)&&(X={currentLocation:k,nextLocation:j.location})}else if(T){let oe=q.get(j.location.pathname);oe?oe.add(k.pathname):(oe=new Set([k.pathname]),q.set(j.location.pathname,oe)),X={currentLocation:j.location,nextLocation:k}}je({..._,actionData:B,loaderData:Q,historyAction:$,location:k,initialized:!0,navigation:Pa,revalidation:"idle",restoreScrollPosition:H,preventScrollReset:V,blockers:Z},{viewTransitionOpts:X,flushSync:C===!0}),$="POP",A=!1,T=!1,I=!1,O=!1,N==null||N.resolve(),N=null,Re==null||Re.resolve(),Re=null}async function Vt(k,_){if(N==null||N.resolve(),N=null,typeof k=="number"){N||(N=wl());let ye=N.promise;return r.history.go(k),ye}let C=mi(j.location,j.matches,d,k,_==null?void 0:_.fromRouteId,_==null?void 0:_.relative),{path:L,submission:B,error:Q}=ll(!1,C,_),Z=j.location,H=Js(j.location,L,_&&_.state);H={...H,...r.history.encodeLocation(H)};let V=_&&_.replace!=null?_.replace:void 0,X="PUSH";V===!0?X="REPLACE":V===!1||B!=null&&qe(B.formMethod)&&B.formAction===j.location.pathname+j.location.search&&(X="REPLACE");let ae=_&&"preventScrollReset"in _?_.preventScrollReset===!0:void 0,J=(_&&_.flushSync)===!0,oe=Co({currentLocation:Z,nextLocation:H,historyAction:X});if(oe){gn(oe,{state:"blocked",location:H,proceed(){gn(oe,{state:"proceeding",proceed:void 0,reset:void 0,location:H}),Vt(k,_)},reset(){let ye=new Map(j.blockers);ye.set(oe,$s),je({blockers:ye})}});return}await br(X,H,{submission:B,pendingError:Q,preventScrollReset:ae,replace:_&&_.replace,enableViewTransition:_&&_.viewTransition,flushSync:J,callSiteDefaultShouldRevalidate:_&&_.unstable_defaultShouldRevalidate})}function Gr(){Re||(Re=wl()),ba(),je({revalidation:"loading"});let k=Re.promise;return j.navigation.state==="submitting"?k:j.navigation.state==="idle"?(br(j.historyAction,j.location,{startUninterruptedRevalidation:!0}),k):(br($||j.historyAction,j.navigation.location,{overrideNavigation:j.navigation,enableViewTransition:T===!0}),k)}async function br(k,_,C){F&&F.abort(),F=null,$=k,I=(C&&C.startUninterruptedRevalidation)===!0,Mh(j.location,j.matches),A=(C&&C.preventScrollReset)===!0,T=(C&&C.enableViewTransition)===!0;let L=c||l,B=C&&C.overrideNavigation,Q=C!=null&&C.initialHydration&&j.matches&&j.matches.length>0&&!w?j.matches:er(L,_,d),Z=(C&&C.flushSync)===!0;if(Q&&j.initialized&&!O&&Fg(j.location,_)&&!(C&&C.submission&&qe(C.submission.formMethod))){Me(_,{matches:Q},{flushSync:Z});return}let H=yn(Q,L,_.pathname);if(H.active&&H.matches&&(Q=H.matches),!Q){let{error:Ie,notFoundMatches:He,route:we}=ka(_.pathname);Me(_,{matches:He,loaderData:{},errors:{[we.id]:Ie}},{flushSync:Z});return}F=new AbortController;let V=ts(r.history,_,F.signal,C&&C.submission),X=r.getContext?await r.getContext():new rl,ae;if(C&&C.pendingError)ae=[tr(Q).route.id,{type:"error",error:C.pendingError}];else if(C&&C.submission&&qe(C.submission.formMethod)){let Ie=await _h(V,_,C.submission,Q,X,H.active,C&&C.initialHydration===!0,{replace:C.replace,flushSync:Z});if(Ie.shortCircuited)return;if(Ie.pendingActionResult){let[He,we]=Ie.pendingActionResult;if(it(we)&&Zs(we.error)&&we.error.status===404){F=null,Me(_,{matches:Ie.matches,loaderData:{},errors:{[He]:we.error}});return}}Q=Ie.matches||Q,ae=Ie.pendingActionResult,B=Oa(_,C.submission),Z=!1,H.active=!1,V=ts(r.history,V.url,V.signal)}let{shortCircuited:J,matches:oe,loaderData:ye,errors:Ue}=await Eh(V,_,Q,X,H.active,B,C&&C.submission,C&&C.fetcherSubmission,C&&C.replace,C&&C.initialHydration===!0,Z,ae,C&&C.callSiteDefaultShouldRevalidate);J||(F=null,Me(_,{matches:oe||Q,...vl(ae),loaderData:ye,errors:Ue}))}async function _h(k,_,C,L,B,Q,Z,H={}){ba();let V=Vg(_,C);if(je({navigation:V},{flushSync:H.flushSync===!0}),Q){let J=await vn(L,_.pathname,k.signal);if(J.type==="aborted")return{shortCircuited:!0};if(J.type==="error"){if(J.partialMatches.length===0){let{matches:ye,route:Ue}=_n(l);return{matches:ye,pendingActionResult:[Ue.id,{type:"error",error:J.error}]}}let oe=tr(J.partialMatches).route.id;return{matches:J.partialMatches,pendingActionResult:[oe,{type:"error",error:J.error}]}}else if(J.matches)L=J.matches;else{let{notFoundMatches:oe,error:ye,route:Ue}=ka(_.pathname);return{matches:oe,pendingActionResult:[Ue.id,{type:"error",error:ye}]}}}let X,ae=In(L,_);if(!ae.route.action&&!ae.route.lazy)X={type:"error",error:ut(405,{method:k.method,pathname:_.pathname,routeId:ae.route.id})};else{let J=os(a,i,k,L,ae,Z?[]:s,B),oe=await Ps(k,J,B,null);if(X=oe[ae.route.id],!X){for(let ye of L)if(oe[ye.route.id]){X=oe[ye.route.id];break}}if(k.signal.aborted)return{shortCircuited:!0}}if(Dr(X)){let J;return H&&H.replace!=null?J=H.replace:J=ml(X.response.headers.get("Location"),new URL(k.url),d,r.history)===j.location.pathname+j.location.search,await wr(k,X,!0,{submission:C,replace:J}),{shortCircuited:!0}}if(it(X)){let J=tr(L,ae.route.id);return(H&&H.replace)!==!0&&($="PUSH"),{matches:L,pendingActionResult:[J.route.id,X,ae.route.id]}}return{matches:L,pendingActionResult:[ae.route.id,X]}}async function Eh(k,_,C,L,B,Q,Z,H,V,X,ae,J,oe){let ye=Q||Oa(_,Z),Ue=Z||H||bl(ye),Ie=!I&&!X;if(B){if(Ie){let Be=wo(J);je({navigation:ye,...Be!==void 0?{actionData:Be}:{}},{flushSync:ae})}let ve=await vn(C,_.pathname,k.signal);if(ve.type==="aborted")return{shortCircuited:!0};if(ve.type==="error"){if(ve.partialMatches.length===0){let{matches:Yr,route:Sr}=_n(l);return{matches:Yr,loaderData:{},errors:{[Sr.id]:ve.error}}}let Be=tr(ve.partialMatches).route.id;return{matches:ve.partialMatches,loaderData:{},errors:{[Be]:ve.error}}}else if(ve.matches)C=ve.matches;else{let{error:Be,notFoundMatches:Yr,route:Sr}=ka(_.pathname);return{matches:Yr,loaderData:{},errors:{[Sr.id]:Be}}}}let He=c||l,{dsMatches:we,revalidatingFetchers:lt}=cl(k,L,a,i,r.history,j,C,Ue,_,X?[]:s,X===!0,O,U,Y,ue,ne,He,d,r.patchRoutesOnNavigation!=null,J,oe);if(W=++z,!r.dataStrategy&&!we.some(ve=>ve.shouldLoad)&&!we.some(ve=>ve.route.middleware&&ve.route.middleware.length>0)&&lt.length===0){let ve=_o();return Me(_,{matches:C,loaderData:{},errors:J&&it(J[1])?{[J[0]]:J[1].error}:null,...vl(J),...ve?{fetchers:new Map(j.fetchers)}:{}},{flushSync:ae}),{shortCircuited:!0}}if(Ie){let ve={};if(!B){ve.navigation=ye;let Be=wo(J);Be!==void 0&&(ve.actionData=Be)}lt.length>0&&(ve.fetchers=Nh(lt)),je(ve,{flushSync:ae})}lt.forEach(ve=>{Dt(ve.key),ve.controller&&M.set(ve.key,ve.controller)});let kr=()=>lt.forEach(ve=>Dt(ve.key));F&&F.signal.addEventListener("abort",kr);let{loaderResults:Os,fetcherResults:Gt}=await ko(we,lt,k,L);if(k.signal.aborted)return{shortCircuited:!0};F&&F.signal.removeEventListener("abort",kr),lt.forEach(ve=>M.delete(ve.key));let bt=En(Os);if(bt)return await wr(k,bt.result,!0,{replace:V}),{shortCircuited:!0};if(bt=En(Gt),bt)return ne.add(bt.key),await wr(k,bt.result,!0,{replace:V}),{shortCircuited:!0};let{loaderData:ja,errors:As}=gl(j,C,Os,J,lt,Gt);X&&j.errors&&(As={...j.errors,...As});let jr=_o(),xn=Eo(W),bn=jr||xn||lt.length>0;return{matches:C,loaderData:ja,errors:As,...bn?{fetchers:new Map(j.fetchers)}:{}}}function wo(k){if(k&&!it(k[1]))return{[k[0]]:k[1].data};if(j.actionData)return Object.keys(j.actionData).length===0?null:j.actionData}function Nh(k){return k.forEach(_=>{let C=j.fetchers.get(_.key),L=Ls(void 0,C?C.data:void 0);j.fetchers.set(_.key,L)}),new Map(j.fetchers)}async function Ch(k,_,C,L){Dt(k);let B=(L&&L.flushSync)===!0,Q=c||l,Z=mi(j.location,j.matches,d,C,_,L==null?void 0:L.relative),H=er(Q,Z,d),V=yn(H,Q,Z);if(V.active&&V.matches&&(H=V.matches),!H){Rt(k,_,ut(404,{pathname:Z}),{flushSync:B});return}let{path:X,submission:ae,error:J}=ll(!0,Z,L);if(J){Rt(k,_,J,{flushSync:B});return}let oe=r.getContext?await r.getContext():new rl,ye=(L&&L.preventScrollReset)===!0;if(ae&&qe(ae.formMethod)){await Rh(k,_,X,H,oe,V.active,B,ye,ae,L&&L.unstable_defaultShouldRevalidate);return}ue.set(k,{routeId:_,path:X}),await Dh(k,_,X,H,oe,V.active,B,ye,ae)}async function Rh(k,_,C,L,B,Q,Z,H,V,X){ba(),ue.delete(k);let ae=j.fetchers.get(k);Ct(k,Gg(V,ae),{flushSync:Z});let J=new AbortController,oe=ts(r.history,C,J.signal,V);if(Q){let _e=await vn(L,new URL(oe.url).pathname,oe.signal,k);if(_e.type==="aborted")return;if(_e.type==="error"){Rt(k,_,_e.error,{flushSync:Z});return}else if(_e.matches)L=_e.matches;else{Rt(k,_,ut(404,{pathname:C}),{flushSync:Z});return}}let ye=In(L,C);if(!ye.route.action&&!ye.route.lazy){let _e=ut(405,{method:V.formMethod,pathname:C,routeId:_});Rt(k,_,_e,{flushSync:Z});return}M.set(k,J);let Ue=z,Ie=os(a,i,oe,L,ye,s,B),He=await Ps(oe,Ie,B,k),we=He[ye.route.id];if(!we){for(let _e of Ie)if(He[_e.route.id]){we=He[_e.route.id];break}}if(oe.signal.aborted){M.get(k)===J&&M.delete(k);return}if(Y.has(k)){if(Dr(we)||it(we)){Ct(k,Ot(void 0));return}}else{if(Dr(we))if(M.delete(k),W>Ue){Ct(k,Ot(void 0));return}else return ne.add(k),Ct(k,Ls(V)),wr(oe,we,!1,{fetcherSubmission:V,preventScrollReset:H});if(it(we)){Rt(k,_,we.error);return}}let lt=j.navigation.location||j.location,kr=ts(r.history,lt,J.signal),Os=c||l,Gt=j.navigation.state!=="idle"?er(Os,j.navigation.location,d):j.matches;he(Gt,"Didn't find any matches after fetcher action");let bt=++z;G.set(k,bt);let ja=Ls(V,we.data);j.fetchers.set(k,ja);let{dsMatches:As,revalidatingFetchers:jr}=cl(kr,B,a,i,r.history,j,Gt,V,lt,s,!1,O,U,Y,ue,ne,Os,d,r.patchRoutesOnNavigation!=null,[ye.route.id,we],X);jr.filter(_e=>_e.key!==k).forEach(_e=>{let wn=_e.key,Po=j.fetchers.get(wn),Lh=Ls(void 0,Po?Po.data:void 0);j.fetchers.set(wn,Lh),Dt(wn),_e.controller&&M.set(wn,_e.controller)}),je({fetchers:new Map(j.fetchers)});let xn=()=>jr.forEach(_e=>Dt(_e.key));J.signal.addEventListener("abort",xn);let{loaderResults:bn,fetcherResults:ve}=await ko(As,jr,kr,B);if(J.signal.aborted)return;if(J.signal.removeEventListener("abort",xn),G.delete(k),M.delete(k),jr.forEach(_e=>M.delete(_e.key)),j.fetchers.has(k)){let _e=Ot(we.data);j.fetchers.set(k,_e)}let Be=En(bn);if(Be)return wr(kr,Be.result,!1,{preventScrollReset:H});if(Be=En(ve),Be)return ne.add(Be.key),wr(kr,Be.result,!1,{preventScrollReset:H});let{loaderData:Yr,errors:Sr}=gl(j,Gt,bn,void 0,jr,ve);Eo(bt),j.navigation.state==="loading"&&bt>W?(he($,"Expected pending action"),F&&F.abort(),Me(j.navigation.location,{matches:Gt,loaderData:Yr,errors:Sr,fetchers:new Map(j.fetchers)})):(je({errors:Sr,loaderData:yl(j.loaderData,Yr,Gt,Sr),fetchers:new Map(j.fetchers)}),O=!1)}async function Dh(k,_,C,L,B,Q,Z,H,V){let X=j.fetchers.get(k);Ct(k,Ls(V,X?X.data:void 0),{flushSync:Z});let ae=new AbortController,J=ts(r.history,C,ae.signal);if(Q){let we=await vn(L,new URL(J.url).pathname,J.signal,k);if(we.type==="aborted")return;if(we.type==="error"){Rt(k,_,we.error,{flushSync:Z});return}else if(we.matches)L=we.matches;else{Rt(k,_,ut(404,{pathname:C}),{flushSync:Z});return}}let oe=In(L,C);M.set(k,ae);let ye=z,Ue=os(a,i,J,L,oe,s,B),He=(await Ps(J,Ue,B,k))[oe.route.id];if(M.get(k)===ae&&M.delete(k),!J.signal.aborted){if(Y.has(k)){Ct(k,Ot(void 0));return}if(Dr(He))if(W>ye){Ct(k,Ot(void 0));return}else{ne.add(k),await wr(J,He,!1,{preventScrollReset:H});return}if(it(He)){Rt(k,_,He.error);return}Ct(k,Ot(He.data))}}async function wr(k,_,C,{submission:L,fetcherSubmission:B,preventScrollReset:Q,replace:Z}={}){C||(N==null||N.resolve(),N=null),_.response.headers.has("X-Remix-Revalidate")&&(O=!0);let H=_.response.headers.get("Location");he(H,"Expected a Location header on the redirect Response"),H=ml(H,new URL(k.url),d,r.history);let V=Js(j.location,H,{_isRedirect:!0});if(t){let Ue=!1;if(_.response.headers.has("X-Remix-Reload-Document"))Ue=!0;else if(Ji(H)){const Ie=Bd(H,!0);Ue=Ie.origin!==e.location.origin||ht(Ie.pathname,d)==null}if(Ue){Z?e.location.replace(H):e.location.assign(H);return}}F=null;let X=Z===!0||_.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:ae,formAction:J,formEncType:oe}=j.navigation;!L&&!B&&ae&&J&&oe&&(L=bl(j.navigation));let ye=L||B;if(jg.has(_.response.status)&&ye&&qe(ye.formMethod))await br(X,V,{submission:{...ye,formAction:H},preventScrollReset:Q||A,enableViewTransition:C?T:void 0});else{let Ue=Oa(V,L);await br(X,V,{overrideNavigation:Ue,fetcherSubmission:B,preventScrollReset:Q||A,enableViewTransition:C?T:void 0})}}async function Ps(k,_,C,L){var Z;let B,Q={};try{B=await Og(u,k,_,L,C,!1)}catch(H){return _.filter(V=>V.shouldLoad).forEach(V=>{Q[V.route.id]={type:"error",error:H}}),Q}if(k.signal.aborted)return Q;if(!qe(k.method))for(let H of _){if(((Z=B[H.route.id])==null?void 0:Z.type)==="error")break;!B.hasOwnProperty(H.route.id)&&!j.loaderData.hasOwnProperty(H.route.id)&&(!j.errors||!j.errors.hasOwnProperty(H.route.id))&&H.shouldCallHandler()&&(B[H.route.id]={type:"error",result:new Error(`No result returned from dataStrategy for route ${H.route.id}`)})}for(let[H,V]of Object.entries(B))if(qg(V)){let X=V.result;Q[H]={type:"redirect",response:$g(X,k,H,_,d)}}else Q[H]=await Ig(V);return Q}async function ko(k,_,C,L){let B=Ps(C,k,L,null),Q=Promise.all(_.map(async V=>{if(V.matches&&V.match&&V.request&&V.controller){let ae=(await Ps(V.request,V.matches,L,V.key))[V.match.route.id];return{[V.key]:ae}}else return Promise.resolve({[V.key]:{type:"error",error:ut(404,{pathname:V.path})}})})),Z=await B,H=(await Q).reduce((V,X)=>Object.assign(V,X),{});return{loaderResults:Z,fetcherResults:H}}function ba(){O=!0,ue.forEach((k,_)=>{M.has(_)&&U.add(_),Dt(_)})}function Ct(k,_,C={}){j.fetchers.set(k,_),je({fetchers:new Map(j.fetchers)},{flushSync:(C&&C.flushSync)===!0})}function Rt(k,_,C,L={}){let B=tr(j.matches,_);wa(k),je({errors:{[B.route.id]:C},fetchers:new Map(j.fetchers)},{flushSync:(L&&L.flushSync)===!0})}function jo(k){return pe.set(k,(pe.get(k)||0)+1),Y.has(k)&&Y.delete(k),j.fetchers.get(k)||Sg}function Th(k,_){Dt(k,_==null?void 0:_.reason),Ct(k,Ot(null))}function wa(k){let _=j.fetchers.get(k);M.has(k)&&!(_&&_.state==="loading"&&G.has(k))&&Dt(k),ue.delete(k),G.delete(k),ne.delete(k),Y.delete(k),U.delete(k),j.fetchers.delete(k)}function Ph(k){let _=(pe.get(k)||0)-1;_<=0?(pe.delete(k),Y.add(k)):pe.set(k,_),je({fetchers:new Map(j.fetchers)})}function Dt(k,_){let C=M.get(k);C&&(C.abort(_),M.delete(k))}function So(k){for(let _ of k){let C=jo(_),L=Ot(C.data);j.fetchers.set(_,L)}}function _o(){let k=[],_=!1;for(let C of ne){let L=j.fetchers.get(C);he(L,`Expected fetcher: ${C}`),L.state==="loading"&&(ne.delete(C),k.push(C),_=!0)}return So(k),_}function Eo(k){let _=[];for(let[C,L]of G)if(L<k){let B=j.fetchers.get(C);he(B,`Expected fetcher: ${C}`),B.state==="loading"&&(Dt(C),G.delete(C),_.push(C))}return So(_),_.length>0}function Oh(k,_){let C=j.blockers.get(k)||$s;return be.get(k)!==_&&be.set(k,_),C}function No(k){j.blockers.delete(k),be.delete(k)}function gn(k,_){let C=j.blockers.get(k)||$s;he(C.state==="unblocked"&&_.state==="blocked"||C.state==="blocked"&&_.state==="blocked"||C.state==="blocked"&&_.state==="proceeding"||C.state==="blocked"&&_.state==="unblocked"||C.state==="proceeding"&&_.state==="unblocked",`Invalid blocker state transition: ${C.state} -> ${_.state}`);let L=new Map(j.blockers);L.set(k,_),je({blockers:L})}function Co({currentLocation:k,nextLocation:_,historyAction:C}){if(be.size===0)return;be.size>1&&Ce(!1,"A router only supports one blocker at a time");let L=Array.from(be.entries()),[B,Q]=L[L.length-1],Z=j.blockers.get(B);if(!(Z&&Z.state==="proceeding")&&Q({currentLocation:k,nextLocation:_,historyAction:C}))return B}function ka(k){let _=ut(404,{pathname:k}),C=c||l,{matches:L,route:B}=_n(C);return{notFoundMatches:L,route:B,error:_}}function Ah(k,_,C){if(y=k,g=_,v=C||null,!x&&j.navigation===Pa){x=!0;let L=Do(j.location,j.matches);L!=null&&je({restoreScrollPosition:L})}return()=>{y=null,g=null,v=null}}function Ro(k,_){return v&&v(k,_.map(L=>Qp(L,j.loaderData)))||k.key}function Mh(k,_){if(y&&g){let C=Ro(k,_);y[C]=g()}}function Do(k,_){if(y){let C=Ro(k,_),L=y[C];if(typeof L=="number")return L}return null}function yn(k,_,C){if(r.patchRoutesOnNavigation)if(k){if(Object.keys(k[0].params).length>0)return{active:!0,matches:qs(_,C,d,!0)}}else return{active:!0,matches:qs(_,C,d,!0)||[]};return{active:!1,matches:null}}async function vn(k,_,C,L){if(!r.patchRoutesOnNavigation)return{type:"success",matches:k};let B=k;for(;;){let Q=c==null,Z=c||l,H=i;try{await r.patchRoutesOnNavigation({signal:C,path:_,matches:B,fetcherKey:L,patch:(ae,J)=>{C.aborted||dl(ae,J,Z,H,a,!1)}})}catch(ae){return{type:"error",error:ae,partialMatches:B}}finally{Q&&!C.aborted&&(l=[...l])}if(C.aborted)return{type:"aborted"};let V=er(Z,_,d),X=null;if(V){if(Object.keys(V[0].params).length===0)return{type:"success",matches:V};if(X=qs(Z,_,d,!0),!(X&&B.length<X.length&&To(B,X.slice(0,B.length))))return{type:"success",matches:V}}if(X||(X=qs(Z,_,d,!0)),!X||To(B,X))return{type:"success",matches:null};B=X}}function To(k,_){return k.length===_.length&&k.every((C,L)=>C.route.id===_[L].route.id)}function Ih(k){i={},c=Xs(k,a,void 0,i)}function $h(k,_,C=!1){let L=c==null;dl(k,_,c||l,i,a,C),L&&(l=[...l],je({}))}return D={get basename(){return d},get future(){return h},get state(){return j},get routes(){return l},get window(){return e},initialize:Xe,subscribe:nt,enableScrollRestoration:Ah,navigate:Vt,fetch:Ch,revalidate:Gr,createHref:k=>r.history.createHref(k),encodeLocation:k=>r.history.encodeLocation(k),getFetcher:jo,resetFetcher:Th,deleteFetcher:Ph,dispose:Ae,getBlocker:Oh,deleteBlocker:No,patchRoutes:$h,_internalFetchControllers:M,_internalSetRoutes:Ih,_internalSetStateDoNotUseOrYouWillBreakYourApp(k){je(k)}},r.unstable_instrumentations&&(D=pg(D,r.unstable_instrumentations.map(k=>k.router).filter(Boolean))),D}function Ng(r){return r!=null&&("formData"in r&&r.formData!=null||"body"in r&&r.body!==void 0)}function mi(r,e,t,s,n,a){let i,l;if(n){i=[];for(let d of e)if(i.push(d),d.route.id===n){l=d;break}}else i=e,l=e[e.length-1];let c=oa(s||".",ia(i),ht(r.pathname,t)||r.pathname,a==="path");if(s==null&&(c.search=r.search,c.hash=r.hash),(s==null||s===""||s===".")&&l){let d=eo(c.search);if(l.route.index&&!d)c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index";else if(!l.route.index&&d){let u=new URLSearchParams(c.search),h=u.getAll("index");u.delete("index"),h.filter(p=>p).forEach(p=>u.append("index",p));let m=u.toString();c.search=m?`?${m}`:""}}return t!=="/"&&(c.pathname=cg({basename:t,pathname:c.pathname})),Et(c)}function ll(r,e,t){if(!t||!Ng(t))return{path:e};if(t.formMethod&&!Hg(t.formMethod))return{path:e,error:ut(405,{method:t.formMethod})};let s=()=>({path:e,error:ut(400,{type:"invalid-body"})}),a=(t.formMethod||"get").toUpperCase(),i=nu(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!qe(a))return s();let h=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((m,[p,y])=>`${m}${p}=${y}
`,""):String(t.body);return{path:e,submission:{formMethod:a,formAction:i,formEncType:t.formEncType,formData:void 0,json:void 0,text:h}}}else if(t.formEncType==="application/json"){if(!qe(a))return s();try{let h=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:a,formAction:i,formEncType:t.formEncType,formData:void 0,json:h,text:void 0}}}catch{return s()}}}he(typeof FormData=="function","FormData is not available in this environment");let l,c;if(t.formData)l=yi(t.formData),c=t.formData;else if(t.body instanceof FormData)l=yi(t.body),c=t.body;else if(t.body instanceof URLSearchParams)l=t.body,c=pl(l);else if(t.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(t.body),c=pl(l)}catch{return s()}let d={formMethod:a,formAction:i,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(qe(d.formMethod))return{path:e,submission:d};let u=yr(e);return r&&u.search&&eo(u.search)&&l.append("index",""),u.search=`?${l}`,{path:Et(u),submission:d}}function cl(r,e,t,s,n,a,i,l,c,d,u,h,m,p,y,v,g,x,b,w,E){var I;let R=w?it(w[1])?w[1].error:w[1].data:void 0,D=n.createURL(a.location),j=n.createURL(c),$;if(u&&a.errors){let O=Object.keys(a.errors)[0];$=i.findIndex(U=>U.route.id===O)}else if(w&&it(w[1])){let O=w[0];$=i.findIndex(U=>U.route.id===O)-1}let N=w?w[1].statusCode:void 0,A=N&&N>=400,F={currentUrl:D,currentParams:((I=a.matches[0])==null?void 0:I.params)||{},nextUrl:j,nextParams:i[0].params,...l,actionResult:R,actionStatus:N},T=cn(i),q=i.map((O,U)=>{let{route:M}=O,z=null;if($!=null&&U>$?z=!1:M.lazy?z=!0:Xi(M)?u?z=pi(M,a.loaderData,a.errors):Cg(a.loaderData,a.matches[U],O)&&(z=!0):z=!1,z!==null)return gi(t,s,r,T,O,d,e,z);let W=!1;typeof E=="boolean"?W=E:A?W=!1:(h||D.pathname+D.search===j.pathname+j.search||D.search!==j.search||Rg(a.matches[U],O))&&(W=!0);let G={...F,defaultShouldRevalidate:W},ne=Hs(O,G);return gi(t,s,r,T,O,d,e,ne,G,E)}),P=[];return y.forEach((O,U)=>{if(u||!i.some(Y=>Y.route.id===O.routeId)||p.has(U))return;let M=a.fetchers.get(U),z=M&&M.state!=="idle"&&M.data===void 0,W=er(g,O.path,x);if(!W){if(b&&z)return;P.push({key:U,routeId:O.routeId,path:O.path,matches:null,match:null,request:null,controller:null});return}if(v.has(U))return;let G=In(W,O.path),ne=new AbortController,ue=ts(n,O.path,ne.signal),pe=null;if(m.has(U))m.delete(U),pe=os(t,s,ue,W,G,d,e);else if(z)h&&(pe=os(t,s,ue,W,G,d,e));else{let Y;typeof E=="boolean"?Y=E:A?Y=!1:Y=h;let be={...F,defaultShouldRevalidate:Y};Hs(G,be)&&(pe=os(t,s,ue,W,G,d,e,be))}pe&&P.push({key:U,routeId:O.routeId,path:O.path,matches:pe,match:G,request:ue,controller:ne})}),{dsMatches:q,revalidatingFetchers:P}}function Xi(r){return r.loader!=null||r.middleware!=null&&r.middleware.length>0}function pi(r,e,t){if(r.lazy)return!0;if(!Xi(r))return!1;let s=e!=null&&r.id in e,n=t!=null&&t[r.id]!==void 0;return!s&&n?!1:typeof r.loader=="function"&&r.loader.hydrate===!0?!0:!s&&!n}function Cg(r,e,t){let s=!e||t.route.id!==e.route.id,n=!r.hasOwnProperty(t.route.id);return s||n}function Rg(r,e){let t=r.route.path;return r.pathname!==e.pathname||t!=null&&t.endsWith("*")&&r.params["*"]!==e.params["*"]}function Hs(r,e){if(r.route.shouldRevalidate){let t=r.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function dl(r,e,t,s,n,a){let i;if(r){let d=s[r];he(d,`No route found to patch children into: routeId = ${r}`),d.children||(d.children=[]),i=d.children}else i=t;let l=[],c=[];if(e.forEach(d=>{let u=i.find(h=>Zd(d,h));u?c.push({existingRoute:u,newRoute:d}):l.push(d)}),l.length>0){let d=Xs(l,n,[r||"_","patch",String((i==null?void 0:i.length)||"0")],s);i.push(...d)}if(a&&c.length>0)for(let d=0;d<c.length;d++){let{existingRoute:u,newRoute:h}=c[d],m=u,[p]=Xs([h],n,[],{},!0);Object.assign(m,{element:p.element?p.element:m.element,errorElement:p.errorElement?p.errorElement:m.errorElement,hydrateFallbackElement:p.hydrateFallbackElement?p.hydrateFallbackElement:m.hydrateFallbackElement})}}function Zd(r,e){return"id"in r&&"id"in e&&r.id===e.id?!0:r.index===e.index&&r.path===e.path&&r.caseSensitive===e.caseSensitive?(!r.children||r.children.length===0)&&(!e.children||e.children.length===0)?!0:r.children.every((t,s)=>{var n;return(n=e.children)==null?void 0:n.some(a=>Zd(t,a))}):!1}var ul=new WeakMap,eu=({key:r,route:e,manifest:t,mapRouteProperties:s})=>{let n=t[e.id];if(he(n,"No route found in manifest"),!n.lazy||typeof n.lazy!="object")return;let a=n.lazy[r];if(!a)return;let i=ul.get(n);i||(i={},ul.set(n,i));let l=i[r];if(l)return l;let c=(async()=>{let d=Hp(r),h=n[r]!==void 0&&r!=="hasErrorBoundary";if(d)Ce(!d,"Route property "+r+" is not a supported lazy route property. This property will be ignored."),i[r]=Promise.resolve();else if(h)Ce(!1,`Route "${n.id}" has a static property "${r}" defined. The lazy property will be ignored.`);else{let m=await a();m!=null&&(Object.assign(n,{[r]:m}),Object.assign(n,s(n)))}typeof n.lazy=="object"&&(n.lazy[r]=void 0,Object.values(n.lazy).every(m=>m===void 0)&&(n.lazy=void 0))})();return i[r]=c,c},hl=new WeakMap;function Dg(r,e,t,s,n){let a=t[r.id];if(he(a,"No route found in manifest"),!r.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof r.lazy=="function"){let u=hl.get(a);if(u)return{lazyRoutePromise:u,lazyHandlerPromise:u};let h=(async()=>{he(typeof r.lazy=="function","No lazy route function found");let m=await r.lazy(),p={};for(let y in m){let v=m[y];if(v===void 0)continue;let g=Gp(y),b=a[y]!==void 0&&y!=="hasErrorBoundary";g?Ce(!g,"Route property "+y+" is not a supported property to be returned from a lazy route function. This property will be ignored."):b?Ce(!b,`Route "${a.id}" has a static property "${y}" defined but its lazy function is also returning a value for this property. The lazy route property "${y}" will be ignored.`):p[y]=v}Object.assign(a,p),Object.assign(a,{...s(a),lazy:void 0})})();return hl.set(a,h),h.catch(()=>{}),{lazyRoutePromise:h,lazyHandlerPromise:h}}let i=Object.keys(r.lazy),l=[],c;for(let u of i){if(n&&n.includes(u))continue;let h=eu({key:u,route:r,manifest:t,mapRouteProperties:s});h&&(l.push(h),u===e&&(c=h))}let d=l.length>0?Promise.all(l).then(()=>{}):void 0;return d==null||d.catch(()=>{}),c==null||c.catch(()=>{}),{lazyRoutePromise:d,lazyHandlerPromise:c}}async function fl(r){let e=r.matches.filter(n=>n.shouldLoad),t={};return(await Promise.all(e.map(n=>n.resolve()))).forEach((n,a)=>{t[e[a].route.id]=n}),t}async function Tg(r){return r.matches.some(e=>e.route.middleware)?tu(r,()=>fl(r)):fl(r)}function tu(r,e){return Pg(r,e,s=>{if(Kg(s))throw s;return s},Bg,t);function t(s,n,a){if(a)return Promise.resolve(Object.assign(a.value,{[n]:{type:"error",result:s}}));{let{matches:i}=r,l=Math.min(Math.max(i.findIndex(d=>d.route.id===n),0),Math.max(i.findIndex(d=>d.shouldCallHandler()),0)),c=tr(i,i[l].route.id).route.id;return Promise.resolve({[c]:{type:"error",result:s}})}}}async function Pg(r,e,t,s,n){let{matches:a,request:i,params:l,context:c,unstable_pattern:d}=r,u=a.flatMap(m=>m.route.middleware?m.route.middleware.map(p=>[m.route.id,p]):[]);return await ru({request:i,params:l,context:c,unstable_pattern:d},u,e,t,s,n)}async function ru(r,e,t,s,n,a,i=0){let{request:l}=r;if(l.signal.aborted)throw l.signal.reason??new Error(`Request aborted: ${l.method} ${l.url}`);let c=e[i];if(!c)return await t();let[d,u]=c,h,m=async()=>{if(h)throw new Error("You may only call `next()` once per middleware");try{return h={value:await ru(r,e,t,s,n,a,i+1)},h.value}catch(p){return h={value:await a(p,d,h)},h.value}};try{let p=await u(r,m),y=p!=null?s(p):void 0;return n(y)?y:h?y??h.value:(h={value:await m()},h.value)}catch(p){return await a(p,d,h)}}function su(r,e,t,s,n){let a=eu({key:"middleware",route:s.route,manifest:e,mapRouteProperties:r}),i=Dg(s.route,qe(t.method)?"action":"loader",e,r,n);return{middleware:a,route:i.lazyRoutePromise,handler:i.lazyHandlerPromise}}function gi(r,e,t,s,n,a,i,l,c=null,d){let u=!1,h=su(r,e,t,n,a);return{...n,_lazyPromises:h,shouldLoad:l,shouldRevalidateArgs:c,shouldCallHandler(m){return u=!0,c?typeof d=="boolean"?Hs(n,{...c,defaultShouldRevalidate:d}):typeof m=="boolean"?Hs(n,{...c,defaultShouldRevalidate:m}):Hs(n,c):l},resolve(m){let{lazy:p,loader:y,middleware:v}=n.route,g=u||l||m&&!qe(t.method)&&(p||y),x=v&&v.length>0&&!y&&!p;return g&&(qe(t.method)||!x)?Ag({request:t,unstable_pattern:s,match:n,lazyHandlerPromise:h==null?void 0:h.handler,lazyRoutePromise:h==null?void 0:h.route,handlerOverride:m,scopedContext:i}):Promise.resolve({type:"data",result:void 0})}}}function os(r,e,t,s,n,a,i,l=null){return s.map(c=>c.route.id!==n.route.id?{...c,shouldLoad:!1,shouldRevalidateArgs:l,shouldCallHandler:()=>!1,_lazyPromises:su(r,e,t,c,a),resolve:()=>Promise.resolve({type:"data",result:void 0})}:gi(r,e,t,cn(s),c,a,i,!0,l))}async function Og(r,e,t,s,n,a){t.some(d=>{var u;return(u=d._lazyPromises)==null?void 0:u.middleware})&&await Promise.all(t.map(d=>{var u;return(u=d._lazyPromises)==null?void 0:u.middleware}));let i={request:e,unstable_pattern:cn(t),params:t[0].params,context:n,matches:t},c=await r({...i,fetcherKey:s,runClientMiddleware:d=>{let u=i;return tu(u,()=>d({...u,fetcherKey:s,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(t.flatMap(d=>{var u,h;return[(u=d._lazyPromises)==null?void 0:u.handler,(h=d._lazyPromises)==null?void 0:h.route]}))}catch{}return c}async function Ag({request:r,unstable_pattern:e,match:t,lazyHandlerPromise:s,lazyRoutePromise:n,handlerOverride:a,scopedContext:i}){let l,c,d=qe(r.method),u=d?"action":"loader",h=m=>{let p,y=new Promise((x,b)=>p=b);c=()=>p(),r.signal.addEventListener("abort",c);let v=x=>typeof m!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${u}" [routeId: ${t.route.id}]`)):m({request:r,unstable_pattern:e,params:t.params,context:i},...x!==void 0?[x]:[]),g=(async()=>{try{return{type:"data",result:await(a?a(b=>v(b)):v())}}catch(x){return{type:"error",result:x}}})();return Promise.race([g,y])};try{let m=d?t.route.action:t.route.loader;if(s||n)if(m){let p,[y]=await Promise.all([h(m).catch(v=>{p=v}),s,n]);if(p!==void 0)throw p;l=y}else{await s;let p=d?t.route.action:t.route.loader;if(p)[l]=await Promise.all([h(p),n]);else if(u==="action"){let y=new URL(r.url),v=y.pathname+y.search;throw ut(405,{method:r.method,pathname:v,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(m)l=await h(m);else{let p=new URL(r.url),y=p.pathname+p.search;throw ut(404,{pathname:y})}}catch(m){return{type:"error",result:m}}finally{c&&r.signal.removeEventListener("abort",c)}return l}async function Mg(r){let e=r.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?r.body==null?null:r.json():r.text()}async function Ig(r){var s,n,a,i,l;let{result:e,type:t}=r;if(Zi(e)){let c;try{c=await Mg(e)}catch(d){return{type:"error",error:d}}return t==="error"?{type:"error",error:new ln(e.status,e.statusText,c),statusCode:e.status,headers:e.headers}:{type:"data",data:c,statusCode:e.status,headers:e.headers}}return t==="error"?xl(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(s=e.init)==null?void 0:s.status,headers:(n=e.init)!=null&&n.headers?new Headers(e.init.headers):void 0}:{type:"error",error:Ug(e),statusCode:Zs(e)?e.status:void 0,headers:(a=e.init)!=null&&a.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:Zs(e)?e.status:void 0}:xl(e)?{type:"data",data:e.data,statusCode:(i=e.init)==null?void 0:i.status,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function $g(r,e,t,s,n){let a=r.headers.get("Location");if(he(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!Ji(a)){let i=s.slice(0,s.findIndex(l=>l.route.id===t)+1);a=mi(new URL(e.url),i,n,a),r.headers.set("Location",a)}return r}function ml(r,e,t,s){let n=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(Ji(r)){let a=r,i=a.startsWith("//")?new URL(e.protocol+a):new URL(a);if(n.includes(i.protocol))throw new Error("Invalid redirect location");let l=ht(i.pathname,t)!=null;if(i.origin===e.origin&&l)return i.pathname+i.search+i.hash}try{let a=s.createURL(r);if(n.includes(a.protocol))throw new Error("Invalid redirect location")}catch{}return r}function ts(r,e,t,s){let n=r.createURL(nu(e)).toString(),a={signal:t};if(s&&qe(s.formMethod)){let{formMethod:i,formEncType:l}=s;a.method=i.toUpperCase(),l==="application/json"?(a.headers=new Headers({"Content-Type":l}),a.body=JSON.stringify(s.json)):l==="text/plain"?a.body=s.text:l==="application/x-www-form-urlencoded"&&s.formData?a.body=yi(s.formData):a.body=s.formData}return new Request(n,a)}function yi(r){let e=new URLSearchParams;for(let[t,s]of r.entries())e.append(t,typeof s=="string"?s:s.name);return e}function pl(r){let e=new FormData;for(let[t,s]of r.entries())e.append(t,s);return e}function Lg(r,e,t,s=!1,n=!1){let a={},i=null,l,c=!1,d={},u=t&&it(t[1])?t[1].error:void 0;return r.forEach(h=>{if(!(h.route.id in e))return;let m=h.route.id,p=e[m];if(he(!Dr(p),"Cannot handle redirect results in processLoaderData"),it(p)){let y=p.error;if(u!==void 0&&(y=u,u=void 0),i=i||{},n)i[m]=y;else{let v=tr(r,m);i[v.route.id]==null&&(i[v.route.id]=y)}s||(a[m]=Xd),c||(c=!0,l=Zs(p.error)?p.error.status:500),p.headers&&(d[m]=p.headers)}else a[m]=p.data,p.statusCode&&p.statusCode!==200&&!c&&(l=p.statusCode),p.headers&&(d[m]=p.headers)}),u!==void 0&&t&&(i={[t[0]]:u},t[2]&&(a[t[2]]=void 0)),{loaderData:a,errors:i,statusCode:l||200,loaderHeaders:d}}function gl(r,e,t,s,n,a){let{loaderData:i,errors:l}=Lg(e,t,s);return n.filter(c=>!c.matches||c.matches.some(d=>d.shouldLoad)).forEach(c=>{let{key:d,match:u,controller:h}=c;if(h&&h.signal.aborted)return;let m=a[d];if(he(m,"Did not find corresponding fetcher result"),it(m)){let p=tr(r.matches,u==null?void 0:u.route.id);l&&l[p.route.id]||(l={...l,[p.route.id]:m.error}),r.fetchers.delete(d)}else if(Dr(m))he(!1,"Unhandled fetcher revalidation redirect");else{let p=Ot(m.data);r.fetchers.set(d,p)}}),{loaderData:i,errors:l}}function yl(r,e,t,s){let n=Object.entries(e).filter(([,a])=>a!==Xd).reduce((a,[i,l])=>(a[i]=l,a),{});for(let a of t){let i=a.route.id;if(!e.hasOwnProperty(i)&&r.hasOwnProperty(i)&&a.route.loader&&(n[i]=r[i]),s&&s.hasOwnProperty(i))break}return n}function vl(r){return r?it(r[1])?{actionData:{}}:{actionData:{[r[0]]:r[1].data}}:{}}function tr(r,e){return(e?r.slice(0,r.findIndex(s=>s.route.id===e)+1):[...r]).reverse().find(s=>s.route.hasErrorBoundary===!0)||r[0]}function _n(r){let e=r.length===1?r[0]:r.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function ut(r,{pathname:e,routeId:t,method:s,type:n,message:a}={}){let i="Unknown Server Error",l="Unknown @remix-run/router error";return r===400?(i="Bad Request",s&&e&&t?l=`You made a ${s} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:n==="invalid-body"&&(l="Unable to encode submission body")):r===403?(i="Forbidden",l=`Route "${t}" does not match URL "${e}"`):r===404?(i="Not Found",l=`No route matches URL "${e}"`):r===405&&(i="Method Not Allowed",s&&e&&t?l=`You made a ${s.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:s&&(l=`Invalid request method "${s.toUpperCase()}"`)),new ln(r||500,i,new Error(l),!0)}function En(r){let e=Object.entries(r);for(let t=e.length-1;t>=0;t--){let[s,n]=e[t];if(Dr(n))return{key:s,result:n}}}function nu(r){let e=typeof r=="string"?yr(r):r;return Et({...e,hash:""})}function Fg(r,e){return r.pathname!==e.pathname||r.search!==e.search?!1:r.hash===""?e.hash!=="":r.hash===e.hash?!0:e.hash!==""}function Ug(r){var e,t;return new ln(((e=r.init)==null?void 0:e.status)??500,((t=r.init)==null?void 0:t.statusText)??"Internal Server Error",r.data)}function Bg(r){return r!=null&&typeof r=="object"&&Object.entries(r).every(([e,t])=>typeof e=="string"&&zg(t))}function zg(r){return r!=null&&typeof r=="object"&&"type"in r&&"result"in r&&(r.type==="data"||r.type==="error")}function qg(r){return Zi(r.result)&&Qd.has(r.result.status)}function it(r){return r.type==="error"}function Dr(r){return(r&&r.type)==="redirect"}function xl(r){return typeof r=="object"&&r!=null&&"type"in r&&"data"in r&&"init"in r&&r.type==="DataWithResponseInit"}function Zi(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.headers=="object"&&typeof r.body<"u"}function Wg(r){return Qd.has(r)}function Kg(r){return Zi(r)&&Wg(r.status)&&r.headers.has("Location")}function Hg(r){return kg.has(r.toUpperCase())}function qe(r){return bg.has(r.toUpperCase())}function eo(r){return new URLSearchParams(r).getAll("index").some(e=>e==="")}function In(r,e){let t=typeof e=="string"?yr(e).search:e.search;if(r[r.length-1].route.index&&eo(t||""))return r[r.length-1];let s=Kd(r);return s[s.length-1]}function bl(r){let{formMethod:e,formAction:t,formEncType:s,text:n,formData:a,json:i}=r;if(!(!e||!t||!s)){if(n!=null)return{formMethod:e,formAction:t,formEncType:s,formData:void 0,json:void 0,text:n};if(a!=null)return{formMethod:e,formAction:t,formEncType:s,formData:a,json:void 0,text:void 0};if(i!==void 0)return{formMethod:e,formAction:t,formEncType:s,formData:void 0,json:i,text:void 0}}}function Oa(r,e){return e?{state:"loading",location:r,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:r,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Vg(r,e){return{state:"submitting",location:r,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Ls(r,e){return r?{state:"loading",formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Gg(r,e){return{state:"submitting",formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text,data:e?e.data:void 0}}function Ot(r){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:r}}function Yg(r,e){try{let t=r.sessionStorage.getItem(Jd);if(t){let s=JSON.parse(t);for(let[n,a]of Object.entries(s||{}))a&&Array.isArray(a)&&e.set(n,new Set(a||[]))}}catch{}}function Qg(r,e){if(e.size>0){let t={};for(let[s,n]of e)t[s]=[...n];try{r.sessionStorage.setItem(Jd,JSON.stringify(t))}catch(s){Ce(!1,`Failed to save applied view transitions in sessionStorage (${s}).`)}}}function wl(){let r,e,t=new Promise((s,n)=>{r=async a=>{s(a);try{await t}catch{}},e=async a=>{n(a);try{await t}catch{}}});return{promise:t,resolve:r,reject:e}}var Hr=f.createContext(null);Hr.displayName="DataRouter";var dn=f.createContext(null);dn.displayName="DataRouterState";var au=f.createContext(!1);function Jg(){return f.useContext(au)}var to=f.createContext({isTransitioning:!1});to.displayName="ViewTransition";var iu=f.createContext(new Map);iu.displayName="Fetchers";var Xg=f.createContext(null);Xg.displayName="Await";var ot=f.createContext(null);ot.displayName="Navigation";var la=f.createContext(null);la.displayName="Location";var xt=f.createContext({outlet:null,matches:[],isDataRoute:!1});xt.displayName="Route";var ro=f.createContext(null);ro.displayName="RouteError";var ou="REACT_ROUTER_ERROR",Zg="REDIRECT",ey="ROUTE_ERROR_RESPONSE";function ty(r){if(r.startsWith(`${ou}:${Zg}:{`))try{let e=JSON.parse(r.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function ry(r){if(r.startsWith(`${ou}:${ey}:{`))try{let e=JSON.parse(r.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new ln(e.status,e.statusText,e.data)}catch{}}function sy(r,{relative:e}={}){he(Ns(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=f.useContext(ot),{hash:n,pathname:a,search:i}=un(r,{relative:e}),l=a;return t!=="/"&&(l=a==="/"?t:_t([t,a])),s.createHref({pathname:l,search:i,hash:n})}function Ns(){return f.useContext(la)!=null}function qt(){return he(Ns(),"useLocation() may be used only in the context of a <Router> component."),f.useContext(la).location}var lu="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function cu(r){f.useContext(ot).static||f.useLayoutEffect(r)}function ca(){let{isDataRoute:r}=f.useContext(xt);return r?vy():ny()}function ny(){he(Ns(),"useNavigate() may be used only in the context of a <Router> component.");let r=f.useContext(Hr),{basename:e,navigator:t}=f.useContext(ot),{matches:s}=f.useContext(xt),{pathname:n}=qt(),a=JSON.stringify(ia(s)),i=f.useRef(!1);return cu(()=>{i.current=!0}),f.useCallback((c,d={})=>{if(Ce(i.current,lu),!i.current)return;if(typeof c=="number"){t.go(c);return}let u=oa(c,JSON.parse(a),n,d.relative==="path");r==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:_t([e,u.pathname])),(d.replace?t.replace:t.push)(u,d.state,d)},[e,t,a,n,r])}var ay=f.createContext(null);function iy(r){let e=f.useContext(xt).outlet;return f.useMemo(()=>e&&f.createElement(ay.Provider,{value:r},e),[e,r])}function un(r,{relative:e}={}){let{matches:t}=f.useContext(xt),{pathname:s}=qt(),n=JSON.stringify(ia(t));return f.useMemo(()=>oa(r,JSON.parse(n),s,e==="path"),[r,n,s,e])}function oy(r,e,t,s,n){he(Ns(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=f.useContext(ot),{matches:i}=f.useContext(xt),l=i[i.length-1],c=l?l.params:{},d=l?l.pathname:"/",u=l?l.pathnameBase:"/",h=l&&l.route;{let b=h&&h.path||"";uu(d,!h||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let m=qt(),p;p=m;let y=p.pathname||"/",v=y;if(u!=="/"){let b=u.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(b.length).join("/")}let g=er(r,{pathname:v});return Ce(h||g!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Ce(g==null||g[g.length-1].route.element!==void 0||g[g.length-1].route.Component!==void 0||g[g.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),hy(g&&g.map(b=>Object.assign({},b,{params:Object.assign({},c,b.params),pathname:_t([u,a.encodeLocation?a.encodeLocation(b.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?u:_t([u,a.encodeLocation?a.encodeLocation(b.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathnameBase])})),i,t,s,n)}function ly(){let r=yy(),e=Zs(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:s},a={padding:"2px 4px",backgroundColor:s},i=null;return console.error("Error handled by React Router default ErrorBoundary:",r),i=f.createElement(f.Fragment,null,f.createElement("p",null," Hey developer "),f.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",f.createElement("code",{style:a},"ErrorBoundary")," or"," ",f.createElement("code",{style:a},"errorElement")," prop on your route.")),f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},e),t?f.createElement("pre",{style:n},t):null,i)}var cy=f.createElement(ly,null),du=class extends f.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const t=ry(r.digest);t&&(r=t)}let e=r!==void 0?f.createElement(xt.Provider,{value:this.props.routeContext},f.createElement(ro.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?f.createElement(dy,{error:r},e):e}};du.contextType=au;var Aa=new WeakMap;function dy({children:r,error:e}){let{basename:t}=f.useContext(ot);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=ty(e.digest);if(s){let n=Aa.get(e);if(n)throw n;let a=Vd(s.location,t);if(Hd&&!Aa.get(e))if(a.isExternal||s.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const i=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:s.replace}));throw Aa.set(e,i),i}return f.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return r}function uy({routeContext:r,match:e,children:t}){let s=f.useContext(Hr);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),f.createElement(xt.Provider,{value:r},t)}function hy(r,e=[],t=null,s=null,n=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let a=r,i=t==null?void 0:t.errors;if(i!=null){let u=a.findIndex(h=>h.route.id&&(i==null?void 0:i[h.route.id])!==void 0);he(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),a=a.slice(0,Math.min(a.length,u+1))}let l=!1,c=-1;if(t)for(let u=0;u<a.length;u++){let h=a[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:m,errors:p}=t,y=h.route.loader&&!m.hasOwnProperty(h.route.id)&&(!p||p[h.route.id]===void 0);if(h.route.lazy||y){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}let d=t&&s?(u,h)=>{var m,p;s(u,{location:t.location,params:((p=(m=t.matches)==null?void 0:m[0])==null?void 0:p.params)??{},unstable_pattern:cn(t.matches),errorInfo:h})}:void 0;return a.reduceRight((u,h,m)=>{let p,y=!1,v=null,g=null;t&&(p=i&&h.route.id?i[h.route.id]:void 0,v=h.route.errorElement||cy,l&&(c<0&&m===0?(uu("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,g=null):c===m&&(y=!0,g=h.route.hydrateFallbackElement||null)));let x=e.concat(a.slice(0,m+1)),b=()=>{let w;return p?w=v:y?w=g:h.route.Component?w=f.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=u,f.createElement(uy,{match:h,routeContext:{outlet:u,matches:x,isDataRoute:t!=null},children:w})};return t&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?f.createElement(du,{location:t.location,revalidation:t.revalidation,component:v,error:p,children:b(),routeContext:{outlet:null,matches:x,isDataRoute:!0},onError:d}):b()},null)}function so(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fy(r){let e=f.useContext(Hr);return he(e,so(r)),e}function my(r){let e=f.useContext(dn);return he(e,so(r)),e}function py(r){let e=f.useContext(xt);return he(e,so(r)),e}function no(r){let e=py(r),t=e.matches[e.matches.length-1];return he(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function gy(){return no("useRouteId")}function yy(){var s;let r=f.useContext(ro),e=my("useRouteError"),t=no("useRouteError");return r!==void 0?r:(s=e.errors)==null?void 0:s[t]}function vy(){let{router:r}=fy("useNavigate"),e=no("useNavigate"),t=f.useRef(!1);return cu(()=>{t.current=!0}),f.useCallback(async(n,a={})=>{Ce(t.current,lu),t.current&&(typeof n=="number"?await r.navigate(n):await r.navigate(n,{fromRouteId:e,...a}))},[r,e])}var kl={};function uu(r,e,t){!e&&!kl[r]&&(kl[r]=!0,Ce(!1,t))}var jl={};function Sl(r,e){!r&&!jl[e]&&(jl[e]=!0,console.warn(e))}var xy="useOptimistic",_l=cf[xy],by=()=>{};function wy(r){return _l?_l(r):[r,by]}function ky(r){let e={hasErrorBoundary:r.hasErrorBoundary||r.ErrorBoundary!=null||r.errorElement!=null};return r.Component&&(r.element&&Ce(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:f.createElement(r.Component),Component:void 0})),r.HydrateFallback&&(r.hydrateFallbackElement&&Ce(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:f.createElement(r.HydrateFallback),HydrateFallback:void 0})),r.ErrorBoundary&&(r.errorElement&&Ce(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:f.createElement(r.ErrorBoundary),ErrorBoundary:void 0})),e}var jy=["HydrateFallback","hydrateFallbackElement"],Sy=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=s=>{this.status==="pending"&&(this.status="resolved",e(s))},this.reject=s=>{this.status==="pending"&&(this.status="rejected",t(s))}})}};function _y({router:r,flushSync:e,onError:t,unstable_useTransitions:s}){s=Jg()||s;let[a,i]=f.useState(r.state),[l,c]=wy(a),[d,u]=f.useState(),[h,m]=f.useState({isTransitioning:!1}),[p,y]=f.useState(),[v,g]=f.useState(),[x,b]=f.useState(),w=f.useRef(new Map),E=f.useCallback(($,{deletedFetchers:N,newErrors:A,flushSync:F,viewTransitionOpts:T})=>{A&&t&&Object.values(A).forEach(P=>{var I;return t(P,{location:$.location,params:((I=$.matches[0])==null?void 0:I.params)??{},unstable_pattern:cn($.matches)})}),$.fetchers.forEach((P,I)=>{P.data!==void 0&&w.current.set(I,P.data)}),N.forEach(P=>w.current.delete(P)),Sl(F===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let q=r.window!=null&&r.window.document!=null&&typeof r.window.document.startViewTransition=="function";if(Sl(T==null||q,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!T||!q){e&&F?e(()=>i($)):s===!1?i($):f.startTransition(()=>{s===!0&&c(P=>El(P,$)),i($)});return}if(e&&F){e(()=>{v&&(p==null||p.resolve(),v.skipTransition()),m({isTransitioning:!0,flushSync:!0,currentLocation:T.currentLocation,nextLocation:T.nextLocation})});let P=r.window.document.startViewTransition(()=>{e(()=>i($))});P.finished.finally(()=>{e(()=>{y(void 0),g(void 0),u(void 0),m({isTransitioning:!1})})}),e(()=>g(P));return}v?(p==null||p.resolve(),v.skipTransition(),b({state:$,currentLocation:T.currentLocation,nextLocation:T.nextLocation})):(u($),m({isTransitioning:!0,flushSync:!1,currentLocation:T.currentLocation,nextLocation:T.nextLocation}))},[r.window,e,v,p,s,c,t]);f.useLayoutEffect(()=>r.subscribe(E),[r,E]),f.useEffect(()=>{h.isTransitioning&&!h.flushSync&&y(new Sy)},[h]),f.useEffect(()=>{if(p&&d&&r.window){let $=d,N=p.promise,A=r.window.document.startViewTransition(async()=>{s===!1?i($):f.startTransition(()=>{s===!0&&c(F=>El(F,$)),i($)}),await N});A.finished.finally(()=>{y(void 0),g(void 0),u(void 0),m({isTransitioning:!1})}),g(A)}},[d,p,r.window,s,c]),f.useEffect(()=>{p&&d&&l.location.key===d.location.key&&p.resolve()},[p,v,l.location,d]),f.useEffect(()=>{!h.isTransitioning&&x&&(u(x.state),m({isTransitioning:!0,flushSync:!1,currentLocation:x.currentLocation,nextLocation:x.nextLocation}),b(void 0))},[h.isTransitioning,x]);let R=f.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:$=>r.navigate($),push:($,N,A)=>r.navigate($,{state:N,preventScrollReset:A==null?void 0:A.preventScrollReset}),replace:($,N,A)=>r.navigate($,{replace:!0,state:N,preventScrollReset:A==null?void 0:A.preventScrollReset})}),[r]),D=r.basename||"/",j=f.useMemo(()=>({router:r,navigator:R,static:!1,basename:D,onError:t}),[r,R,D,t]);return f.createElement(f.Fragment,null,f.createElement(Hr.Provider,{value:j},f.createElement(dn.Provider,{value:l},f.createElement(iu.Provider,{value:w.current},f.createElement(to.Provider,{value:h},f.createElement(Cy,{basename:D,location:l.location,navigationType:l.historyAction,navigator:R,unstable_useTransitions:s},f.createElement(Ey,{routes:r.routes,future:r.future,state:l,onError:t})))))),null)}function El(r,e){return{...r,navigation:e.navigation.state!=="idle"?e.navigation:r.navigation,revalidation:e.revalidation!=="idle"?e.revalidation:r.revalidation,actionData:e.navigation.state!=="submitting"?e.actionData:r.actionData,fetchers:e.fetchers}}var Ey=f.memo(Ny);function Ny({routes:r,future:e,state:t,onError:s}){return oy(r,void 0,t,s,e)}function da({to:r,replace:e,state:t,relative:s}){he(Ns(),"<Navigate> may be used only in the context of a <Router> component.");let{static:n}=f.useContext(ot);Ce(!n,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=f.useContext(xt),{pathname:i}=qt(),l=ca(),c=oa(r,ia(a),i,s==="path"),d=JSON.stringify(c);return f.useEffect(()=>{l(JSON.parse(d),{replace:e,state:t,relative:s})},[l,d,s,e,t]),null}function ua(r){return iy(r.context)}function Cy({basename:r="/",children:e=null,location:t,navigationType:s="POP",navigator:n,static:a=!1,unstable_useTransitions:i}){he(!Ns(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=r.replace(/^\/*/,"/"),c=f.useMemo(()=>({basename:l,navigator:n,static:a,unstable_useTransitions:i,future:{}}),[l,n,a,i]);typeof t=="string"&&(t=yr(t));let{pathname:d="/",search:u="",hash:h="",state:m=null,key:p="default"}=t,y=f.useMemo(()=>{let v=ht(d,l);return v==null?null:{location:{pathname:v,search:u,hash:h,state:m,key:p},navigationType:s}},[l,d,u,h,m,p,s]);return Ce(y!=null,`<Router basename="${l}"> is not able to match the URL "${d}${u}${h}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:f.createElement(ot.Provider,{value:c},f.createElement(la.Provider,{children:e,value:y}))}var $n="get",Ln="application/x-www-form-urlencoded";function ha(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function Ry(r){return ha(r)&&r.tagName.toLowerCase()==="button"}function Dy(r){return ha(r)&&r.tagName.toLowerCase()==="form"}function Ty(r){return ha(r)&&r.tagName.toLowerCase()==="input"}function Py(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Oy(r,e){return r.button===0&&(!e||e==="_self")&&!Py(r)}var Nn=null;function Ay(){if(Nn===null)try{new FormData(document.createElement("form"),0),Nn=!1}catch{Nn=!0}return Nn}var My=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ma(r){return r!=null&&!My.has(r)?(Ce(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ln}"`),null):r}function Iy(r,e){let t,s,n,a,i;if(Dy(r)){let l=r.getAttribute("action");s=l?ht(l,e):null,t=r.getAttribute("method")||$n,n=Ma(r.getAttribute("enctype"))||Ln,a=new FormData(r)}else if(Ry(r)||Ty(r)&&(r.type==="submit"||r.type==="image")){let l=r.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=r.getAttribute("formaction")||l.getAttribute("action");if(s=c?ht(c,e):null,t=r.getAttribute("formmethod")||l.getAttribute("method")||$n,n=Ma(r.getAttribute("formenctype"))||Ma(l.getAttribute("enctype"))||Ln,a=new FormData(l,r),!Ay()){let{name:d,type:u,value:h}=r;if(u==="image"){let m=d?`${d}.`:"";a.append(`${m}x`,"0"),a.append(`${m}y`,"0")}else d&&a.append(d,h)}}else{if(ha(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=$n,s=null,n=Ln,i=r}return a&&n==="text/plain"&&(i=a,a=void 0),{action:s,method:t.toLowerCase(),encType:n,formData:a,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ao(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function $y(r,e,t,s){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return t?n.pathname.endsWith("/")?n.pathname=`${n.pathname}_.${s}`:n.pathname=`${n.pathname}.${s}`:n.pathname==="/"?n.pathname=`_root.${s}`:e&&ht(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${s}`,n}async function Ly(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Fy(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function Uy(r,e,t){let s=await Promise.all(r.map(async n=>{let a=e.routes[n.route.id];if(a){let i=await Ly(a,t);return i.links?i.links():[]}return[]}));return Wy(s.flat(1).filter(Fy).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function Nl(r,e,t,s,n,a){let i=(c,d)=>t[d]?c.route.id!==t[d].route.id:!0,l=(c,d)=>{var u;return t[d].pathname!==c.pathname||((u=t[d].route.path)==null?void 0:u.endsWith("*"))&&t[d].params["*"]!==c.params["*"]};return a==="assets"?e.filter((c,d)=>i(c,d)||l(c,d)):a==="data"?e.filter((c,d)=>{var h;let u=s.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(i(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:((h=t[0])==null?void 0:h.params)||{},nextUrl:new URL(r,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function By(r,e,{includeHydrateFallback:t}={}){return zy(r.map(s=>{let n=e.routes[s.route.id];if(!n)return[];let a=[n.module];return n.clientActionModule&&(a=a.concat(n.clientActionModule)),n.clientLoaderModule&&(a=a.concat(n.clientLoaderModule)),t&&n.hydrateFallbackModule&&(a=a.concat(n.hydrateFallbackModule)),n.imports&&(a=a.concat(n.imports)),a}).flat(1))}function zy(r){return[...new Set(r)]}function qy(r){let e={},t=Object.keys(r).sort();for(let s of t)e[s]=r[s];return e}function Wy(r,e){let t=new Set;return new Set(e),r.reduce((s,n)=>{let a=JSON.stringify(qy(n));return t.has(a)||(t.add(a),s.push({key:a,link:n})),s},[])}function hu(){let r=f.useContext(Hr);return ao(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Ky(){let r=f.useContext(dn);return ao(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var io=f.createContext(void 0);io.displayName="FrameworkContext";function fu(){let r=f.useContext(io);return ao(r,"You must render this element inside a <HydratedRouter> element"),r}function Hy(r,e){let t=f.useContext(io),[s,n]=f.useState(!1),[a,i]=f.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=e,m=f.useRef(null);f.useEffect(()=>{if(r==="render"&&i(!0),r==="viewport"){let v=x=>{x.forEach(b=>{i(b.isIntersecting)})},g=new IntersectionObserver(v,{threshold:.5});return m.current&&g.observe(m.current),()=>{g.disconnect()}}},[r]),f.useEffect(()=>{if(s){let v=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(v)}}},[s]);let p=()=>{n(!0)},y=()=>{n(!1),i(!1)};return t?r!=="intent"?[a,m,{}]:[a,m,{onFocus:Fs(l,p),onBlur:Fs(c,y),onMouseEnter:Fs(d,p),onMouseLeave:Fs(u,y),onTouchStart:Fs(h,p)}]:[!1,m,{}]}function Fs(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function Vy({page:r,...e}){let{router:t}=hu(),s=f.useMemo(()=>er(t.routes,r,t.basename),[t.routes,r,t.basename]);return s?f.createElement(Yy,{page:r,matches:s,...e}):null}function Gy(r){let{manifest:e,routeModules:t}=fu(),[s,n]=f.useState([]);return f.useEffect(()=>{let a=!1;return Uy(r,e,t).then(i=>{a||n(i)}),()=>{a=!0}},[r,e,t]),s}function Yy({page:r,matches:e,...t}){let s=qt(),{future:n,manifest:a,routeModules:i}=fu(),{basename:l}=hu(),{loaderData:c,matches:d}=Ky(),u=f.useMemo(()=>Nl(r,e,d,a,s,"data"),[r,e,d,a,s]),h=f.useMemo(()=>Nl(r,e,d,a,s,"assets"),[r,e,d,a,s]),m=f.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let v=new Set,g=!1;if(e.forEach(b=>{var E;let w=a.routes[b.route.id];!w||!w.hasLoader||(!u.some(R=>R.route.id===b.route.id)&&b.route.id in c&&((E=i[b.route.id])!=null&&E.shouldRevalidate)||w.hasClientLoader?g=!0:v.add(b.route.id))}),v.size===0)return[];let x=$y(r,l,n.unstable_trailingSlashAwareDataRequests,"data");return g&&v.size>0&&x.searchParams.set("_routes",e.filter(b=>v.has(b.route.id)).map(b=>b.route.id).join(",")),[x.pathname+x.search]},[l,n.unstable_trailingSlashAwareDataRequests,c,s,a,u,e,r,i]),p=f.useMemo(()=>By(h,a),[h,a]),y=Gy(h);return f.createElement(f.Fragment,null,m.map(v=>f.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...t})),p.map(v=>f.createElement("link",{key:v,rel:"modulepreload",href:v,...t})),y.map(({key:v,link:g})=>f.createElement("link",{key:v,nonce:t.nonce,...g,crossOrigin:g.crossOrigin??t.crossOrigin})))}function Qy(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Jy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Jy&&(window.__reactRouterVersion="7.13.0")}catch{}function Xy(r,e){return Eg({basename:e==null?void 0:e.basename,getContext:e==null?void 0:e.getContext,future:e==null?void 0:e.future,history:zp({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||Zy(),routes:r,mapRouteProperties:ky,hydrationRouteProperties:jy,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window,unstable_instrumentations:e==null?void 0:e.unstable_instrumentations}).initialize()}function Zy(){let r=window==null?void 0:window.__staticRouterHydrationData;return r&&r.errors&&(r={...r,errors:ev(r.errors)}),r}function ev(r){if(!r)return null;let e=Object.entries(r),t={};for(let[s,n]of e)if(n&&n.__type==="RouteErrorResponse")t[s]=new ln(n.status,n.statusText,n.data,n.internal===!0);else if(n&&n.__type==="Error"){if(n.__subType){let a=window[n.__subType];if(typeof a=="function")try{let i=new a(n.message);i.stack="",t[s]=i}catch{}}if(t[s]==null){let a=new Error(n.message);a.stack="",t[s]=a}}else t[s]=n;return t}var mu=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Cr=f.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:n,reloadDocument:a,replace:i,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h,unstable_defaultShouldRevalidate:m,...p},y){let{basename:v,unstable_useTransitions:g}=f.useContext(ot),x=typeof d=="string"&&mu.test(d),b=Vd(d,v);d=b.to;let w=sy(d,{relative:n}),[E,R,D]=Hy(s,p),j=sv(d,{replace:i,state:l,target:c,preventScrollReset:u,relative:n,viewTransition:h,unstable_defaultShouldRevalidate:m,unstable_useTransitions:g});function $(A){e&&e(A),A.defaultPrevented||j(A)}let N=f.createElement("a",{...p,...D,href:b.absoluteURL||w,onClick:b.isExternal||a?e:$,ref:Qy(y,R),target:c,"data-discover":!x&&t==="render"?"true":void 0});return E&&!x?f.createElement(f.Fragment,null,N,f.createElement(Vy,{page:w})):N});Cr.displayName="Link";var vi=f.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:n=!1,style:a,to:i,viewTransition:l,children:c,...d},u){let h=un(i,{relative:d.relative}),m=qt(),p=f.useContext(dn),{navigator:y,basename:v}=f.useContext(ot),g=p!=null&&lv(h)&&l===!0,x=y.encodeLocation?y.encodeLocation(h).pathname:h.pathname,b=m.pathname,w=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;t||(b=b.toLowerCase(),w=w?w.toLowerCase():null,x=x.toLowerCase()),w&&v&&(w=ht(w,v)||w);const E=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let R=b===x||!n&&b.startsWith(x)&&b.charAt(E)==="/",D=w!=null&&(w===x||!n&&w.startsWith(x)&&w.charAt(x.length)==="/"),j={isActive:R,isPending:D,isTransitioning:g},$=R?e:void 0,N;typeof s=="function"?N=s(j):N=[s,R?"active":null,D?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let A=typeof a=="function"?a(j):a;return f.createElement(Cr,{...d,"aria-current":$,className:N,ref:u,style:A,to:i,viewTransition:l},typeof c=="function"?c(j):c)});vi.displayName="NavLink";var tv=f.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:n,state:a,method:i=$n,action:l,onSubmit:c,relative:d,preventScrollReset:u,viewTransition:h,unstable_defaultShouldRevalidate:m,...p},y)=>{let{unstable_useTransitions:v}=f.useContext(ot),g=iv(),x=ov(l,{relative:d}),b=i.toLowerCase()==="get"?"get":"post",w=typeof l=="string"&&mu.test(l),E=R=>{if(c&&c(R),R.defaultPrevented)return;R.preventDefault();let D=R.nativeEvent.submitter,j=(D==null?void 0:D.getAttribute("formmethod"))||i,$=()=>g(D||R.currentTarget,{fetcherKey:e,method:j,navigate:t,replace:n,state:a,relative:d,preventScrollReset:u,viewTransition:h,unstable_defaultShouldRevalidate:m});v&&t!==!1?f.startTransition(()=>$()):$()};return f.createElement("form",{ref:y,method:b,action:x,onSubmit:s?c:E,...p,"data-discover":!w&&r==="render"?"true":void 0})});tv.displayName="Form";function rv(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pu(r){let e=f.useContext(Hr);return he(e,rv(r)),e}function sv(r,{target:e,replace:t,state:s,preventScrollReset:n,relative:a,viewTransition:i,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}={}){let d=ca(),u=qt(),h=un(r,{relative:a});return f.useCallback(m=>{if(Oy(m,e)){m.preventDefault();let p=t!==void 0?t:Et(u)===Et(h),y=()=>d(r,{replace:p,state:s,preventScrollReset:n,relative:a,viewTransition:i,unstable_defaultShouldRevalidate:l});c?f.startTransition(()=>y()):y()}},[u,d,h,t,s,e,r,n,a,i,l,c])}var nv=0,av=()=>`__${String(++nv)}__`;function iv(){let{router:r}=pu("useSubmit"),{basename:e}=f.useContext(ot),t=gy(),s=r.fetch,n=r.navigate;return f.useCallback(async(a,i={})=>{let{action:l,method:c,encType:d,formData:u,body:h}=Iy(a,e);if(i.navigate===!1){let m=i.fetcherKey||av();await s(m,t,i.action||l,{unstable_defaultShouldRevalidate:i.unstable_defaultShouldRevalidate,preventScrollReset:i.preventScrollReset,formData:u,body:h,formMethod:i.method||c,formEncType:i.encType||d,flushSync:i.flushSync})}else await n(i.action||l,{unstable_defaultShouldRevalidate:i.unstable_defaultShouldRevalidate,preventScrollReset:i.preventScrollReset,formData:u,body:h,formMethod:i.method||c,formEncType:i.encType||d,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[s,n,e,t])}function ov(r,{relative:e}={}){let{basename:t}=f.useContext(ot),s=f.useContext(xt);he(s,"useFormAction must be used inside a RouteContext");let[n]=s.matches.slice(-1),a={...un(r||".",{relative:e})},i=qt();if(r==null){a.search=i.search;let l=new URLSearchParams(a.search),c=l.getAll("index");if(c.some(u=>u==="")){l.delete("index"),c.filter(h=>h).forEach(h=>l.append("index",h));let u=l.toString();a.search=u?`?${u}`:""}}return(!r||r===".")&&n.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:_t([t,a.pathname])),Et(a)}function lv(r,{relative:e}={}){let t=f.useContext(to);he(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=pu("useViewTransitionState"),n=un(r,{relative:e});if(!t.isTransitioning)return!1;let a=ht(t.currentLocation.pathname,s)||t.currentLocation.pathname,i=ht(t.nextLocation.pathname,s)||t.nextLocation.pathname;return qn(n.pathname,i)!=null||qn(n.pathname,a)!=null}function cv(r){return f.createElement(_y,{flushSync:Mi.flushSync,...r})}const dv="modulepreload",uv=function(r){return"/DeskPlanner/"+r},Cl={},yt=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.allSettled(t.map(c=>{if(c=uv(c),c in Cl)return;Cl[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":dv,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((m,p)=>{h.addEventListener("load",m),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return n.then(i=>{for(const l of i||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},hv=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>yt(async()=>{const{default:s}=await Promise.resolve().then(()=>Cs);return{default:s}},[]).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class oo extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class fv extends oo{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Rl extends oo{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Dl extends oo{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var xi;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(xi||(xi={}));var mv=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function l(u){try{d(s.next(u))}catch(h){i(h)}}function c(u){try{d(s.throw(u))}catch(h){i(h)}}function d(u){u.done?a(u.value):n(u.value).then(l,c)}d((s=s.apply(r,e||[])).next())})};class pv{constructor(e,{headers:t={},customFetch:s,region:n=xi.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=hv(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return mv(this,void 0,void 0,function*(){try{const{headers:n,method:a,body:i}=t;let l={},{region:c}=t;c||(c=this.region);const d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;i&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=i):typeof i=="string"?(l["Content-Type"]="text/plain",u=i):typeof FormData<"u"&&i instanceof FormData?u=i:(l["Content-Type"]="application/json",u=JSON.stringify(i)));const h=yield this.fetch(d.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:u}).catch(v=>{throw new fv(v)}),m=h.headers.get("x-relay-error");if(m&&m==="true")throw new Rl(h);if(!h.ok)throw new Dl(h);let p=((s=h.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),y;return p==="application/json"?y=yield h.json():p==="application/octet-stream"?y=yield h.blob():p==="text/event-stream"?y=h:p==="multipart/form-data"?y=yield h.formData():y=yield h.text(),{data:y,error:null,response:h}}catch(n){return{data:null,error:n,response:n instanceof Dl||n instanceof Rl?n.context:void 0}}})}}var rt={},lo={},fa={},hn={},ma={},pa={},gv=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},js=gv();const yv=js.fetch,gu=js.fetch.bind(js),yu=js.Headers,vv=js.Request,xv=js.Response,Cs=Object.freeze(Object.defineProperty({__proto__:null,Headers:yu,Request:vv,Response:xv,default:gu,fetch:yv},Symbol.toStringTag,{value:"Module"})),bv=df(Cs);var ga={};Object.defineProperty(ga,"__esModule",{value:!0});let wv=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};ga.default=wv;var vu=Ke&&Ke.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(pa,"__esModule",{value:!0});const kv=vu(bv),jv=vu(ga);let Sv=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=kv.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var i,l,c;let d=null,u=null,h=null,m=a.status,p=a.statusText;if(a.ok){if(this.method!=="HEAD"){const x=await a.text();x===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=x:u=JSON.parse(x))}const v=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),g=(l=a.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");v&&g&&g.length>1&&(h=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,m=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const v=await a.text();try{d=JSON.parse(v),Array.isArray(d)&&a.status===404&&(u=[],d=null,m=200,p="OK")}catch{a.status===404&&v===""?(m=204,p="No Content"):d={message:v}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,m=200,p="OK"),d&&this.shouldThrowOnError)throw new jv.default(d)}return{error:d,data:u,count:h,status:m,statusText:p}});return this.shouldThrowOnError||(n=n.catch(a=>{var i,l,c;return{error:{message:`${(i=a==null?void 0:a.name)!==null&&i!==void 0?i:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}};pa.default=Sv;var _v=Ke&&Ke.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ma,"__esModule",{value:!0});const Ev=_v(pa);let Nv=class extends Ev.default{select(e){let t=!1;const s=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:n,referencedTable:a=n}={}){const i=a?`${a}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const n=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:n=s}={}){const a=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:n=!1,wal:a=!1,format:i="text"}={}){var l;const c=[e?"analyze":null,t?"verbose":null,s?"settings":null,n?"buffers":null,a?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${d}"; options=${c};`,i==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};ma.default=Nv;var Cv=Ke&&Ke.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(hn,"__esModule",{value:!0});const Rv=Cv(ma);let Dv=class extends Rv.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:n}={}){let a="";n==="plain"?a="pl":n==="phrase"?a="ph":n==="websearch"&&(a="w");const i=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${a}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}};hn.default=Dv;var Tv=Ke&&Ke.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fa,"__esModule",{value:!0});const Us=Tv(hn);let Pv=class{constructor(e,{headers:t={},schema:s,fetch:n}){this.url=e,this.headers=t,this.schema=s,this.fetch=n}select(e,{head:t=!1,count:s}={}){const n=t?"HEAD":"GET";let a=!1;const i=(e??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",i),s&&(this.headers.Prefer=`count=${s}`),new Us.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const n="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),t&&a.push(`count=${t}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const i=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(i.length>0){const l=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Us.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:n,defaultToNull:a=!0}={}){const i="POST",l=[`resolution=${s?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),a||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Us.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new Us.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new Us.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};fa.default=Pv;var ya={},va={};Object.defineProperty(va,"__esModule",{value:!0});va.version=void 0;va.version="0.0.0-automated";Object.defineProperty(ya,"__esModule",{value:!0});ya.DEFAULT_HEADERS=void 0;const Ov=va;ya.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Ov.version}`};var xu=Ke&&Ke.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(lo,"__esModule",{value:!0});const Av=xu(fa),Mv=xu(hn),Iv=ya;let $v=class bu{constructor(e,{headers:t={},schema:s,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},Iv.DEFAULT_HEADERS),t),this.schemaName=s,this.fetch=n}from(e){const t=new URL(`${this.url}/${e}`);return new Av.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new bu(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:n=!1,count:a}={}){let i;const l=new URL(`${this.url}/rpc/${e}`);let c;s||n?(i=s?"HEAD":"GET",Object.entries(t).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{l.searchParams.append(u,h)})):(i="POST",c=t);const d=Object.assign({},this.headers);return a&&(d.Prefer=`count=${a}`),new Mv.default({method:i,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};lo.default=$v;var Rs=Ke&&Ke.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(rt,"__esModule",{value:!0});rt.PostgrestError=rt.PostgrestBuilder=rt.PostgrestTransformBuilder=rt.PostgrestFilterBuilder=rt.PostgrestQueryBuilder=rt.PostgrestClient=void 0;const wu=Rs(lo);rt.PostgrestClient=wu.default;const ku=Rs(fa);rt.PostgrestQueryBuilder=ku.default;const ju=Rs(hn);rt.PostgrestFilterBuilder=ju.default;const Su=Rs(ma);rt.PostgrestTransformBuilder=Su.default;const _u=Rs(pa);rt.PostgrestBuilder=_u.default;const Eu=Rs(ga);rt.PostgrestError=Eu.default;var Lv=rt.default={PostgrestClient:wu.default,PostgrestQueryBuilder:ku.default,PostgrestFilterBuilder:ju.default,PostgrestTransformBuilder:Su.default,PostgrestBuilder:_u.default,PostgrestError:Eu.default};const{PostgrestClient:Fv,PostgrestQueryBuilder:Aw,PostgrestFilterBuilder:Mw,PostgrestTransformBuilder:Iw,PostgrestBuilder:$w,PostgrestError:Lw}=Lv;class Uv{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const t=parseInt(process.versions.node.split(".")[0]);return t>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${t} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${t} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const s=this.getWebSocketConstructor();return new s(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Bv="2.15.1",zv=`realtime-js/${Bv}`,qv="1.0.0",bi=1e4,Wv=1e3,Kv=100;var Vs;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Vs||(Vs={}));var Te;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(Te||(Te={}));var pt;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(pt||(pt={}));var wi;(function(r){r.websocket="websocket"})(wi||(wi={}));var Rr;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Rr||(Rr={}));class Hv{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const n=t.getUint8(1),a=t.getUint8(2);let i=this.HEADER_LENGTH+2;const l=s.decode(e.slice(i,i+n));i=i+n;const c=s.decode(e.slice(i,i+a));i=i+a;const d=JSON.parse(s.decode(e.slice(i,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class Nu{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ke;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(ke||(ke={}));const Tl=(r,e,t={})=>{var s;const n=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((a,i)=>(a[i]=Vv(i,r,e,n),a),{})},Vv=(r,e,t,s)=>{const n=e.find(l=>l.name===r),a=n==null?void 0:n.type,i=t[r];return a&&!s.includes(a)?Cu(a,i):ki(i)},Cu=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return Jv(e,t)}switch(r){case ke.bool:return Gv(e);case ke.float4:case ke.float8:case ke.int2:case ke.int4:case ke.int8:case ke.numeric:case ke.oid:return Yv(e);case ke.json:case ke.jsonb:return Qv(e);case ke.timestamp:return Xv(e);case ke.abstime:case ke.date:case ke.daterange:case ke.int4range:case ke.int8range:case ke.money:case ke.reltime:case ke.text:case ke.time:case ke.timestamptz:case ke.timetz:case ke.tsrange:case ke.tstzrange:return ki(e);default:return ki(e)}},ki=r=>r,Gv=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Yv=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},Qv=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},Jv=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,s=r[t];if(r[0]==="{"&&s==="}"){let a;const i=r.slice(1,t);try{a=JSON.parse("["+i+"]")}catch{a=i?i.split(","):[]}return a.map(l=>Cu(e,l))}return r},Xv=r=>typeof r=="string"?r.replace(" ","T"):r,Ru=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Ia{constructor(e,t,s={},n=bi){this.channel=e,this.event=t,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Pl;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(Pl||(Pl={}));class Gs{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Gs.syncState(this.state,n,a,i),this.pendingDiffs.forEach(c=>{this.state=Gs.syncDiff(this.state,c,a,i)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},n=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Gs.syncDiff(this.state,n,a,i),l())}),this.onJoin((n,a,i)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:a,newPresences:i})}),this.onLeave((n,a,i)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:a,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,n){const a=this.cloneDeep(e),i=this.transformState(t),l={},c={};return this.map(a,(d,u)=>{i[d]||(c[d]=u)}),this.map(i,(d,u)=>{const h=a[d];if(h){const m=u.map(g=>g.presence_ref),p=h.map(g=>g.presence_ref),y=u.filter(g=>p.indexOf(g.presence_ref)<0),v=h.filter(g=>m.indexOf(g.presence_ref)<0);y.length>0&&(l[d]=y),v.length>0&&(c[d]=v)}else l[d]=u}),this.syncDiff(a,{joins:l,leaves:c},s,n)}static syncDiff(e,t,s,n){const{joins:a,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(a,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const h=e[l].map(p=>p.presence_ref),m=u.filter(p=>h.indexOf(p.presence_ref)<0);e[l].unshift(...m)}s(l,u,c)}),this.map(i,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[l]=d,n(l,d,c),d.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const n=e[s];return"metas"in n?t[s]=n.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):t[s]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ol;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(Ol||(Ol={}));var Ys;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(Ys||(Ys={}));var Mt;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Mt||(Mt={}));class co{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=Te.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Ia(this,pt.join,this.params,this.timeout),this.rejoinTimer=new Nu(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Te.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Te.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Te.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Te.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Te.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pt.reply,{},(n,a)=>{this._trigger(this._replyEventName(a),n)}),this.presence=new Gs(this),this.broadcastEndpointURL=Ru(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.state==Te.closed){const{config:{broadcast:a,presence:i,private:l}}=this.params,c=(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(m=>m.filter))!==null&&n!==void 0?n:[],d=!!this.bindings[Ys.PRESENCE]&&this.bindings[Ys.PRESENCE].length>0,u={},h={broadcast:a,presence:Object.assign(Object.assign({},i),{enabled:d}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(Mt.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(Mt.CLOSED)),this.updateJoinPayload(Object.assign({config:h},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:m})=>{var p;if(this.socket.setAuth(),m===void 0){e==null||e(Mt.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,v=(p=y==null?void 0:y.length)!==null&&p!==void 0?p:0,g=[];for(let x=0;x<v;x++){const b=y[x],{filter:{event:w,schema:E,table:R,filter:D}}=b,j=m&&m[x];if(j&&j.event===w&&j.schema===E&&j.table===R&&j.filter===D)g.push(Object.assign(Object.assign({},b),{id:j.id}));else{this.unsubscribe(),this.state=Te.errored,e==null||e(Mt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(Mt.SUBSCRIBED);return}}).receive("error",m=>{this.state=Te.errored,e==null||e(Mt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Mt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===Te.joined&&e===Ys.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async send(e,t={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:i}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=d.body)===null||n===void 0?void 0:n.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var i,l,c;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Te.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pt.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(n=>{s=new Ia(this,pt.leave,{},e),s.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Te.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const n=new AbortController,a=setTimeout(()=>n.abort(),s),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(a),i}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Ia(this,e,t,s);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Kv){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var n,a;const i=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=pt;if(s&&[l,c,d,u].indexOf(i)>=0&&s!==this._joinRef())return;let m=this._onMessage(i,t,s);if(t&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(p=>{var y,v,g;return((y=p.filter)===null||y===void 0?void 0:y.event)==="*"||((g=(v=p.filter)===null||v===void 0?void 0:v.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===i}).map(p=>p.callback(m,s)):(a=this.bindings[i])===null||a===void 0||a.filter(p=>{var y,v,g,x,b,w;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in p){const E=p.id,R=(y=p.filter)===null||y===void 0?void 0:y.event;return E&&((v=t.ids)===null||v===void 0?void 0:v.includes(E))&&(R==="*"||(R==null?void 0:R.toLocaleLowerCase())===((g=t.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const E=(b=(x=p==null?void 0:p.filter)===null||x===void 0?void 0:x.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return E==="*"||E===((w=t==null?void 0:t.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===i}).map(p=>{if(typeof m=="object"&&"ids"in m){const y=m.data,{schema:v,table:g,commit_timestamp:x,type:b,errors:w}=y;m=Object.assign(Object.assign({},{schema:v,table:g,commit_timestamp:x,eventType:b,new:{},old:{},errors:w}),this._getPayloadRecords(y))}p.callback(m,s)})}_isClosed(){return this.state===Te.closed}_isJoined(){return this.state===Te.joined}_isJoining(){return this.state===Te.joining}_isLeaving(){return this.state===Te.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const n=e.toLocaleLowerCase(),a={type:n,filter:t,callback:s};return this.bindings[n]?this.bindings[n].push(a):this.bindings[n]=[a],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(n=>{var a;return!(((a=n.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===s&&co.isEqual(n.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(pt.close,{},e)}_onError(e){this._on(pt.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Te.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Tl(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Tl(e.columns,e.old_record)),t}}const Al=()=>{},Cn={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Zv=[1e3,2e3,5e3,1e4],ex=1e4,tx=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class rx{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=bi,this.transport=null,this.heartbeatIntervalMs=Cn.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Al,this.ref=0,this.reconnectTimer=null,this.logger=Al,this.conn=null,this.sendBuffer=[],this.serializer=new Hv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=n=>{let a;return n?a=n:typeof fetch>"u"?a=(...i)=>yt(async()=>{const{default:l}=await Promise.resolve().then(()=>Cs);return{default:l}},void 0).then(({default:l})=>l(...i)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...i)=>a(...i)},!(!((s=t==null?void 0:t.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${wi.websocket}`,this.httpEndpoint=Ru(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Uv.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:qv}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Vs.connecting:return Rr.Connecting;case Vs.open:return Rr.Open;case Vs.closing:return Rr.Closing;default:return Rr.Closed}}isConnected(){return this.connectionState()===Rr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const s=`realtime:${e}`,n=this.getChannels().find(a=>a.topic===s);if(n)return n;{const a=new co(`realtime:${e}`,t,this);return this.channels.push(a),a}}push(e){const{topic:t,event:s,payload:n,ref:a}=e,i=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${t} ${s} (${a})`,n),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Wv,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Cn.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{t.topic==="phoenix"&&t.event==="phx_reply"&&this.heartbeatCallback(t.payload.status==="ok"?"ok":"error"),t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:n,payload:a,ref:i}=t,l=i?`(${i})`:"",c=a.status||"";this.log("receive",`${c} ${s} ${n} ${l}`.trim(),a),this.channels.filter(d=>d._isMember(s)).forEach(d=>d._trigger(n,a,i)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(pt.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${s}${n}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([tx],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const n={access_token:t,version:zv};t&&s.updateJoinPayload(n),s.joinedOnce&&s._isJoined()&&s._push(pt.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(n){this.log("error",`error in ${e} callback`,n)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new Nu(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Cn.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,n,a,i,l,c,d;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:bi,this.heartbeatIntervalMs=(n=e==null?void 0:e.heartbeatIntervalMs)!==null&&n!==void 0?n:Cn.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(i=e==null?void 0:e.accessToken)!==null&&i!==void 0?i:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:u=>Zv[u-1]||ex,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(u,h)=>h(JSON.stringify(u)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class uo extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function $e(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class sx extends uo{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ji extends uo{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var nx=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function l(u){try{d(s.next(u))}catch(h){i(h)}}function c(u){try{d(s.throw(u))}catch(h){i(h)}}function d(u){u.done?a(u.value):n(u.value).then(l,c)}d((s=s.apply(r,e||[])).next())})};const Du=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>yt(async()=>{const{default:s}=await Promise.resolve().then(()=>Cs);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},ax=()=>nx(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield yt(()=>Promise.resolve().then(()=>Cs),void 0)).Response:Response}),Si=r=>{if(Array.isArray(r))return r.map(t=>Si(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,s])=>{const n=t.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[n]=Si(s)}),e},ix=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)};var Vr=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function l(u){try{d(s.next(u))}catch(h){i(h)}}function c(u){try{d(s.throw(u))}catch(h){i(h)}}function d(u){u.done?a(u.value):n(u.value).then(l,c)}d((s=s.apply(r,e||[])).next())})};const $a=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),ox=(r,e,t)=>Vr(void 0,void 0,void 0,function*(){const s=yield ax();r instanceof s&&!(t!=null&&t.noResolveJson)?r.json().then(n=>{const a=r.status||500,i=(n==null?void 0:n.statusCode)||a+"";e(new sx($a(n),a,i))}).catch(n=>{e(new ji($a(n),n))}):e(new ji($a(r),r))}),lx=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"||!s?n:(ix(s)?(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(s)):n.body=s,e!=null&&e.duplex&&(n.duplex=e.duplex),Object.assign(Object.assign({},n),t))};function fn(r,e,t,s,n,a){return Vr(this,void 0,void 0,function*(){return new Promise((i,l)=>{r(t,lx(e,s,n,a)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>ox(c,l,s))})})}function Wn(r,e,t,s){return Vr(this,void 0,void 0,function*(){return fn(r,"GET",e,t,s)})}function It(r,e,t,s,n){return Vr(this,void 0,void 0,function*(){return fn(r,"POST",e,s,n,t)})}function _i(r,e,t,s,n){return Vr(this,void 0,void 0,function*(){return fn(r,"PUT",e,s,n,t)})}function cx(r,e,t,s){return Vr(this,void 0,void 0,function*(){return fn(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function Tu(r,e,t,s,n){return Vr(this,void 0,void 0,function*(){return fn(r,"DELETE",e,s,n,t)})}var Ze=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function l(u){try{d(s.next(u))}catch(h){i(h)}}function c(u){try{d(s.throw(u))}catch(h){i(h)}}function d(u){u.done?a(u.value):n(u.value).then(l,c)}d((s=s.apply(r,e||[])).next())})};const dx={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ml={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ux{constructor(e,t={},s,n){this.url=e,this.headers=t,this.bucketId=s,this.fetch=Du(n)}uploadOrUpdate(e,t,s,n){return Ze(this,void 0,void 0,function*(){try{let a;const i=Object.assign(Object.assign({},Ml),n);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&s instanceof Blob?(a=new FormData,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",s)):typeof FormData<"u"&&s instanceof FormData?(a=s,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=s,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),n!=null&&n.headers&&(l=Object.assign(Object.assign({},l),n.headers));const d=this._removeEmptyFolders(t),u=this._getFinalPath(d),h=yield(e=="PUT"?_i:It)(this.fetch,`${this.url}/object/${u}`,a,Object.assign({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:d,id:h.Id,fullPath:h.Key},error:null}}catch(a){if($e(a))return{data:null,error:a};throw a}})}upload(e,t,s){return Ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,n){return Ze(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),i=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",t);try{let c;const d=Object.assign({upsert:Ml.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",d.cacheControl)):(c=s,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield _i(this.fetch,l.toString(),c,{headers:u});return{data:{path:a,fullPath:h.Key},error:null}}catch(c){if($e(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return Ze(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const n=Object.assign({},this.headers);t!=null&&t.upsert&&(n["x-upsert"]="true");const a=yield It(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),i=new URL(this.url+a.url),l=i.searchParams.get("token");if(!l)throw new uo("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:l},error:null}}catch(s){if($e(s))return{data:null,error:s};throw s}})}update(e,t,s){return Ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return Ze(this,void 0,void 0,function*(){try{return{data:yield It(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}})}copy(e,t,s){return Ze(this,void 0,void 0,function*(){try{return{data:{path:(yield It(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,s){return Ze(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),a=yield It(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${i}`)},{data:a,error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,s){return Ze(this,void 0,void 0,function*(){try{const n=yield It(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${a}`):null})),error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}})}download(e,t){return Ze(this,void 0,void 0,function*(){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),i=a?`?${a}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Wn(this.fetch,`${this.url}/${n}/${l}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if($e(l))return{data:null,error:l};throw l}})}info(e){return Ze(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield Wn(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Si(s),error:null}}catch(s){if($e(s))return{data:null,error:s};throw s}})}exists(e){return Ze(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield cx(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if($e(s)&&s instanceof ji){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),n=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&n.push(a);const l=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&n.push(c);let d=n.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${d}`)}}}remove(e){return Ze(this,void 0,void 0,function*(){try{return{data:yield Tu(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if($e(t))return{data:null,error:t};throw t}})}list(e,t,s){return Ze(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},dx),t),{prefix:e||""});return{data:yield It(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const hx="2.10.5",fx={"X-Client-Info":`storage-js/${hx}`};var Qr=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function l(u){try{d(s.next(u))}catch(h){i(h)}}function c(u){try{d(s.throw(u))}catch(h){i(h)}}function d(u){u.done?a(u.value):n(u.value).then(l,c)}d((s=s.apply(r,e||[])).next())})};class mx{constructor(e,t={},s,n){const a=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},fx),t),this.fetch=Du(s)}listBuckets(){return Qr(this,void 0,void 0,function*(){try{return{data:yield Wn(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if($e(e))return{data:null,error:e};throw e}})}getBucket(e){return Qr(this,void 0,void 0,function*(){try{return{data:yield Wn(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if($e(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Qr(this,void 0,void 0,function*(){try{return{data:yield It(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if($e(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return Qr(this,void 0,void 0,function*(){try{return{data:yield _i(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if($e(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Qr(this,void 0,void 0,function*(){try{return{data:yield It(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if($e(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Qr(this,void 0,void 0,function*(){try{return{data:yield Tu(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if($e(t))return{data:null,error:t};throw t}})}}class px extends mx{constructor(e,t={},s,n){super(e,t,s,n)}from(e){return new ux(this.url,this.headers,e,this.fetch)}}const gx="2.55.0";let Ws="";typeof Deno<"u"?Ws="deno":typeof document<"u"?Ws="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ws="react-native":Ws="node";const yx={"X-Client-Info":`supabase-js-${Ws}/${gx}`},vx={headers:yx},xx={schema:"public"},bx={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},wx={};var kx=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function l(u){try{d(s.next(u))}catch(h){i(h)}}function c(u){try{d(s.throw(u))}catch(h){i(h)}}function d(u){u.done?a(u.value):n(u.value).then(l,c)}d((s=s.apply(r,e||[])).next())})};const jx=r=>{let e;return r?e=r:typeof fetch>"u"?e=gu:e=fetch,(...t)=>e(...t)},Sx=()=>typeof Headers>"u"?yu:Headers,_x=(r,e,t)=>{const s=jx(t),n=Sx();return(a,i)=>kx(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:r;let d=new n(i==null?void 0:i.headers);return d.has("apikey")||d.set("apikey",r),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),s(a,Object.assign(Object.assign({},i),{headers:d}))})};var Ex=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function l(u){try{d(s.next(u))}catch(h){i(h)}}function c(u){try{d(s.throw(u))}catch(h){i(h)}}function d(u){u.done?a(u.value):n(u.value).then(l,c)}d((s=s.apply(r,e||[])).next())})};function Nx(r){return r.endsWith("/")?r:r+"/"}function Cx(r,e){var t,s;const{db:n,auth:a,realtime:i,global:l}=r,{db:c,auth:d,realtime:u,global:h}=e,m={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},d),a),realtime:Object.assign(Object.assign({},u),i),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(t=h==null?void 0:h.headers)!==null&&t!==void 0?t:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>Ex(this,void 0,void 0,function*(){return""})};return r.accessToken?m.accessToken=r.accessToken:delete m.accessToken,m}const Pu="2.71.1",rs=30*1e3,Ei=3,La=Ei*rs,Rx="http://localhost:9999",Dx="supabase.auth.token",Tx={"X-Client-Info":`gotrue-js/${Pu}`},Ni="X-Supabase-Api-Version",Ou={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Px=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ox=10*60*1e3;class ho extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function ie(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class Ax extends ho{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function Mx(r){return ie(r)&&r.name==="AuthApiError"}class Au extends ho{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class vr extends ho{constructor(e,t,s,n){super(e,s,n),this.name=t,this.status=s}}class Zt extends vr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Ix(r){return ie(r)&&r.name==="AuthSessionMissingError"}class Rn extends vr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Dn extends vr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Tn extends vr{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function $x(r){return ie(r)&&r.name==="AuthImplicitGrantRedirectError"}class Il extends vr{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ci extends vr{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Fa(r){return ie(r)&&r.name==="AuthRetryableFetchError"}class $l extends vr{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class Ri extends vr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Kn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ll=` 	
\r=`.split(""),Lx=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<Ll.length;e+=1)r[Ll[e].charCodeAt(0)]=-2;for(let e=0;e<Kn.length;e+=1)r[Kn[e].charCodeAt(0)]=e;return r})();function Fl(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Kn[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Kn[s]),e.queuedBits-=6}}function Mu(r,e,t){const s=Lx[r];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function Ul(r){const e=[],t=i=>{e.push(String.fromCodePoint(i))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},a=i=>{Bx(i,s,t)};for(let i=0;i<r.length;i+=1)Mu(r.charCodeAt(i),n,a);return e.join("")}function Fx(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function Ux(r,e){for(let t=0;t<r.length;t+=1){let s=r.charCodeAt(t);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(r.charCodeAt(t+1)-56320&65535|n)+65536,t+=1}Fx(s,e)}}function Bx(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let s=1;s<6;s+=1)if(!(r>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function zx(r){const e=[],t={queue:0,queuedBits:0},s=n=>{e.push(n)};for(let n=0;n<r.length;n+=1)Mu(r.charCodeAt(n),t,s);return new Uint8Array(e)}function qx(r){const e=[];return Ux(r,t=>e.push(t)),new Uint8Array(e)}function Wx(r){const e=[],t={queue:0,queuedBits:0},s=n=>{e.push(n)};return r.forEach(n=>Fl(n,t,s)),Fl(null,t,s),e.join("")}function Kx(r){return Math.round(Date.now()/1e3)+r}function Hx(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const ft=()=>typeof window<"u"&&typeof document<"u",_r={tested:!1,writable:!1},Iu=()=>{if(!ft())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(_r.tested)return _r.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),_r.tested=!0,_r.writable=!0}catch{_r.tested=!0,_r.writable=!1}return _r.writable};function Vx(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,a)=>{e[a]=n})}catch{}return t.searchParams.forEach((s,n)=>{e[n]=s}),e}const $u=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>yt(async()=>{const{default:s}=await Promise.resolve().then(()=>Cs);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Gx=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",ss=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},Er=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Jt=async(r,e)=>{await r.removeItem(e)};class xa{constructor(){this.promise=new xa.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}xa.promiseConstructor=Promise;function Ua(r){const e=r.split(".");if(e.length!==3)throw new Ri("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!Px.test(e[s]))throw new Ri("JWT not in base64url format");return{header:JSON.parse(Ul(e[0])),payload:JSON.parse(Ul(e[1])),signature:zx(e[2]),raw:{header:e[0],payload:e[1]}}}async function Yx(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function Qx(r,e){return new Promise((s,n)=>{(async()=>{for(let a=0;a<1/0;a++)try{const i=await r(a);if(!e(a,null,i)){s(i);return}}catch(i){if(!e(a,i)){n(i);return}}})()})}function Jx(r){return("0"+r.toString(16)).substr(-2)}function Xx(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let n="";for(let a=0;a<56;a++)n+=t.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,Jx).join("")}async function Zx(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(s);return Array.from(n).map(a=>String.fromCharCode(a)).join("")}async function e0(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await Zx(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Jr(r,e,t=!1){const s=Xx();let n=s;t&&(n+="/PASSWORD_RECOVERY"),await ss(r,`${e}-code-verifier`,n);const a=await e0(s);return[a,s===a?"plain":"s256"]}const t0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function r0(r){const e=r.headers.get(Ni);if(!e||!e.match(t0))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function s0(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function n0(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const a0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Xr(r){if(!a0.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ba(){const r={};return new Proxy(r,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const s=t.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Bl(r){return JSON.parse(JSON.stringify(r))}var i0=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};const Nr=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),o0=[502,503,504];async function zl(r){var e;if(!Gx(r))throw new Ci(Nr(r),0);if(o0.includes(r.status))throw new Ci(Nr(r),r.status);let t;try{t=await r.json()}catch(a){throw new Au(Nr(a),a)}let s;const n=r0(r);if(n&&n.getTime()>=Ou["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new $l(Nr(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Zt}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0))throw new $l(Nr(t),r.status,t.weak_password.reasons);throw new Ax(Nr(t),r.status||500,s)}const l0=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),t))};async function fe(r,e,t,s){var n;const a=Object.assign({},s==null?void 0:s.headers);a[Ni]||(a[Ni]=Ou["2024-01-01"].name),s!=null&&s.jwt&&(a.Authorization=`Bearer ${s.jwt}`);const i=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(i.redirect_to=s.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await c0(r,e,t+l,{headers:a,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function c0(r,e,t,s,n,a){const i=l0(e,s,n,a);let l;try{l=await r(t,Object.assign({},i))}catch(c){throw console.error(c),new Ci(Nr(c),0)}if(l.ok||await zl(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(c){await zl(c)}}function At(r){var e;let t=null;f0(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=Kx(r.expires_in)));const s=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:s},error:null}}function ql(r){const e=At(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=r.weak_password),e}function rr(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function d0(r){return{data:r,error:null}}function u0(r){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:a}=r,i=i0(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:a},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function h0(r){return r}function f0(r){return r.access_token&&r.refresh_token&&r.expires_in}const za=["global","local","others"];var m0=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};class p0{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=$u(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=za[0]){if(za.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${za.join(", ")}`);try{return await fe(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(ie(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await fe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:rr})}catch(s){if(ie(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=m0(e,["options"]),n=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await fe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:u0,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(ie(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await fe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:rr})}catch(t){if(ie(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,n,a,i,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await fe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(a=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:""},xform:h0});if(u.error)throw u.error;const h=await u.json(),m=(i=u.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(y=>{const v=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(y.split(";")[1].split("=")[1]);d[`${g}Page`]=v}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(ie(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Xr(e);try{return await fe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:rr})}catch(t){if(ie(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Xr(e);try{return await fe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:rr})}catch(s){if(ie(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){Xr(e);try{return await fe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:rr})}catch(s){if(ie(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Xr(e.userId);try{const{data:t,error:s}=await fe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:s}}catch(t){if(ie(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Xr(e.userId),Xr(e.id);try{return{data:await fe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ie(t))return{data:null,error:t};throw t}}}function Wl(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function g0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Zr={debug:!!(globalThis&&Iu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Lu extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class y0 extends Lu{}async function v0(r,e,t){Zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Zr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){Zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,n.name);try{return await t()}finally{Zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,n.name)}}else{if(e===0)throw Zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new y0(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Zr.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}g0();const x0={url:Rx,storageKey:Dx,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Tx,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Kl(r,e,t){return await t()}const es={};class en{constructor(e){var t,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=en.nextInstanceID,en.nextInstanceID+=1,this.instanceID>0&&ft()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},x0),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new p0({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=$u(n.fetch),this.lock=n.lock||Kl,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:ft()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=v0:this.lock=Kl,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:Iu()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Wl(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=Wl(this.memoryStorage)),ft()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=es[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){es[this.storageKey]=Object.assign(Object.assign({},es[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=es[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){es[this.storageKey]=Object.assign(Object.assign({},es[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Pu}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Vx(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),ft()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:a}=await this._getSessionFromURL(t,s);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),$x(a)){const c=(e=a.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:i,redirectType:l}=n;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ie(t)?{error:t}:{error:new Au("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,n;try{const a=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:At}),{data:i,error:l}=a;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(ie(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,s,n;try{let a;if("email"in e){const{email:u,password:h,options:m}=e;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await Jr(this.storage,this.storageKey)),a=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:h,data:(t=m==null?void 0:m.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:y},xform:At})}else if("phone"in e){const{phone:u,password:h,options:m}=e;a=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},channel:(n=m==null?void 0:m.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:At})}else throw new Dn("You must provide either an email or phone number and a password");const{data:i,error:l}=a;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(ie(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:a,password:i,options:l}=e;t=await fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ql})}else if("phone"in e){const{phone:a,password:i,options:l}=e;t=await fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ql})}else throw new Dn("You must provide either an email or phone number and a password");const{data:s,error:n}=t;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Rn}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(t){if(ie(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,n,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,s,n,a,i,l,c,d,u,h,m,p;let y,v;if("message"in e)y=e.message,v=e.signature;else{const{chain:g,wallet:x,statement:b,options:w}=e;let E;if(ft())if(typeof x=="object")E=x;else{const D=window;if("solana"in D&&typeof D.solana=="object"&&("signIn"in D.solana&&typeof D.solana.signIn=="function"||"signMessage"in D.solana&&typeof D.solana.signMessage=="function"))E=D.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=x}const R=new URL((t=w==null?void 0:w.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in E&&E.signIn){const D=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:R.host,uri:R.href}),b?{statement:b}:null));let j;if(Array.isArray(D)&&D[0]&&typeof D[0]=="object")j=D[0];else if(D&&typeof D=="object"&&"signedMessage"in D&&"signature"in D)j=D;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)y=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),v=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${R.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${R.href}`,`Issued At: ${(n=(s=w==null?void 0:w.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((d=w==null?void 0:w.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(u=w==null?void 0:w.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const D=await E.signMessage(new TextEncoder().encode(y),"utf8");if(!D||!(D instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=D}}try{const{data:g,error:x}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:Wx(v)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:At});if(x)throw x;return!g||!g.session||!g.user?{data:{user:null,session:null},error:new Rn}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign({},g),error:x})}catch(g){if(ie(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(e){const t=await Er(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(t??"").split("/");try{const{data:a,error:i}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:At});if(await Jt(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Rn}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:n??null}),error:i})}catch(a){if(ie(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:s,token:n,access_token:a,nonce:i}=e,l=await fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:a,nonce:i,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:At}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Rn}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(t){if(ie(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,n,a,i;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Jr(this.storage,this.storageKey));const{error:h}=await fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new Dn("You must provide either an email or phone number.")}catch(l){if(ie(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,s;try{let n,a;"options"in e&&(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo,a=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:i,error:l}=await fe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:n,xform:At});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,d=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(n){if(ie(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,s,n;try{let a=null,i=null;return this.flowType==="pkce"&&([a,i]=await Jr(this.storage,this.storageKey)),await fe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:i}),headers:this.headers,xform:d0})}catch(a){if(ie(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Zt;const{error:n}=await fe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(ie(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:a}=e,{error:i}=await fe(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:s,type:n,options:a}=e,{data:i,error:l}=await fe(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new Dn("You must provide either an email or phone number and a type")}catch(t){if(ie(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Er(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<La:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const i=await Er(this.userStorage,this.storageKey+"-user");i!=null&&i.user?e.user=i.user:e.user=Ba()}if(this.storage.isServer&&e.user){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!i&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{session:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:rr}):await this._useSession(async t=>{var s,n,a;const{data:i,error:l}=t;if(l)throw l;return!(!((s=i.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Zt}:await fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0,xform:rr})})}catch(t){if(ie(t))return Ix(t)&&(await this._removeSession(),await Jt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:n,error:a}=s;if(a)throw a;if(!n.session)throw new Zt;const i=n.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Jr(this.storage,this.storageKey));const{data:d,error:u}=await fe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:rr});if(u)throw u;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(s){if(ie(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Zt;const t=Date.now()/1e3;let s=t,n=!0,a=null;const{payload:i}=Ua(e.access_token);if(i.exp&&(s=i.exp,n=s<=t),n){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;a={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(ie(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:i,error:l}=t;if(l)throw l;e=(s=i.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Zt;const{session:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(ie(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!ft())throw new Tn("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Tn(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Il("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Tn("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Il("No code detected.");const{data:b,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:a,refresh_token:i,expires_in:l,expires_at:c,token_type:d}=e;if(!a||!l||!i||!d)throw new Tn("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let m=u+h;c&&(m=parseInt(c));const p=m-u;p*1e3<=rs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const y=m-h;u-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,m,u):u-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,m,u);const{data:v,error:g}=await this._getUser(a);if(g)throw g;const x={provider_token:s,provider_refresh_token:n,access_token:a,expires_in:h,expires_at:m,refresh_token:i,token_type:d,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(s){if(ie(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Er(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:n,error:a}=t;if(a)return{error:a};const i=(s=n.session)===null||s===void 0?void 0:s.access_token;if(i){const{error:l}=await this.admin.signOut(i,e);if(l&&!(Mx(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Jt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Hx(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,n;try{const{data:{session:a},error:i}=t;if(i)throw i;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await Jr(this.storage,this.storageKey,!0));try{return await fe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(ie(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(ie(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:n}=await this._useSession(async a=>{var i,l,c,d,u;const{data:h,error:m}=a;if(m)throw m;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await fe(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return ft()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(ie(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,n;const{data:a,error:i}=t;if(i)throw i;return await fe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(t){if(ie(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await Qx(async n=>(n>0&&await Yx(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await fe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:At})),(n,a)=>{const i=200*Math.pow(2,n);return a&&Fa(a)&&Date.now()+i-s<rs})}catch(s){if(this._debug(t,"error",s),ie(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),ft()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await Er(this.storage,this.storageKey);if(n&&this.userStorage){let i=await Er(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:n.user},await ss(this.userStorage,this.storageKey+"-user",i)),n.user=(e=i==null?void 0:i.user)!==null&&e!==void 0?e:Ba()}else if(n&&!n.user&&!n.user){const i=await Er(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(n.user=i.user,await Jt(this.storage,this.storageKey+"-user"),await ss(this.storage,this.storageKey,n)):n.user=Ba()}if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const a=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<La;if(this._debug(s,`session has${a?"":" not"} expired with margin of ${La}s`),a){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),Fa(i)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(n.access_token);!l&&(i!=null&&i.user)?(n.user=i.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(s,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Zt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new xa;const{data:a,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!a.session)throw new Zt;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(n,"error",a),ie(a)){const i={session:null,error:a};return Fa(a)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(i),i}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(c){a.push(c)}});if(await Promise.all(i),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&t.user&&await ss(this.userStorage,this.storageKey+"-user",{user:t.user});const n=Object.assign({},t);delete n.user;const a=Bl(n);await ss(this.storage,this.storageKey,a)}else{const n=Bl(t);await ss(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),await Jt(this.storage,this.storageKey),await Jt(this.storage,this.storageKey+"-code-verifier"),await Jt(this.storage,this.storageKey+"-user"),this.userStorage&&await Jt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ft()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),rs);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/rs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${rs}ms, refresh threshold is ${Ei} ticks`),n<=Ei&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Lu)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ft()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const n=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[a,i]=await Jr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(i)}`});n.push(l.toString())}if(s!=null&&s.queryParams){const a=new URLSearchParams(s.queryParams);n.push(a.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:n,error:a}=t;return a?{data:null,error:a}:await fe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(ie(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,n;const{data:a,error:i}=t;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await fe(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(ie(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:a}=t;if(a)return{data:null,error:a};const{data:i,error:l}=await fe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:l})})}catch(t){if(ie(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:a}=t;return a?{data:null,error:a}:await fe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(ie(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],n=s.filter(i=>i.factor_type==="totp"&&i.status==="verified"),a=s.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:s,totp:n,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:n},error:a}=e;if(a)return{data:null,error:a};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Ua(n.access_token);let l=null;i.aal&&(l=i.aal);let c=l;((s=(t=n.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const u=i.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(l=>l.kid===e);if(s)return s;const n=Date.now();if(s=this.jwks.keys.find(l=>l.kid===e),s&&this.jwks_cached_at+Ox>n)return s;const{data:a,error:i}=await fe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=n,s=a.keys.find(l=>l.kid===e),!s)?null:s}async getClaims(e,t={}){try{let s=e;if(!s){const{data:p,error:y}=await this.getSession();if(y||!p.session)return{data:null,error:y};s=p.session.access_token}const{header:n,payload:a,signature:i,raw:{header:l,payload:c}}=Ua(s);t!=null&&t.allowExpired||s0(a.exp);const d=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!d){const{error:p}=await this.getUser(s);if(p)throw p;return{data:{claims:a,header:n,signature:i},error:null}}const u=n0(n.alg),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,i,qx(`${l}.${c}`)))throw new Ri("Invalid JWT signature");return{data:{claims:a,header:n,signature:i},error:null}}catch(s){if(ie(s))return{data:null,error:s};throw s}}}en.nextInstanceID=0;const b0=en;class w0 extends b0{constructor(e){super(e)}}var k0=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function l(u){try{d(s.next(u))}catch(h){i(h)}}function c(u){try{d(s.throw(u))}catch(h){i(h)}}function d(u){u.done?a(u.value):n(u.value).then(l,c)}d((s=s.apply(r,e||[])).next())})};class j0{constructor(e,t,s){var n,a,i;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const l=Nx(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:xx,realtime:wx,auth:Object.assign(Object.assign({},bx),{storageKey:d}),global:vx},h=Cx(s??{},u);this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=h.auth)!==null&&i!==void 0?i:{},this.headers,h.global.fetch),this.fetch=_x(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Fv(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new px(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new pv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return k0(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,storageKey:a,flowType:i,lock:l,debug:c},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new w0({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,flowType:i,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new rx(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const S0=(r,e,t)=>new j0(r,e,t);function _0(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const e=r.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}_0()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const E0="https://rvvunwqizlzlqrhmmera.supabase.co",N0="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ2dnVud3Fpemx6bHFyaG1tZXJhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUxNzg0NzQsImV4cCI6MjA3MDc1NDQ3NH0.ZzJxdSPJtRkcGTUMNHhig6G8nPVLdJsABr0VPq-wXLI",Ye=S0(E0,N0),Fu=f.createContext(void 0),Ds=()=>{const r=f.useContext(Fu);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r};function C0({children:r}){const[e,t]=f.useState(null),[s,n]=f.useState(!0);f.useEffect(()=>{(async()=>{try{const{data:{session:c}}=await Ye.auth.getSession();t((c==null?void 0:c.user)??null)}catch(c){console.error("Error checking session:",c),t(null)}finally{n(!1)}})();const{data:{subscription:l}}=Ye.auth.onAuthStateChange((c,d)=>{t((d==null?void 0:d.user)??null),n(!1)});return()=>l.unsubscribe()},[]);const a=async()=>{try{await Ye.auth.signOut(),t(null)}catch(i){console.error("Error signing out:",i)}};return o.jsx(Fu.Provider,{value:{user:e,loading:s,signOut:a},children:r})}function Uu(r){return{id:r.id,name:r.name,slug:r.slug,roomsCount:r.rooms_count,desksPerRoom:r.desks_per_room,currency:r.currency,timezone:r.timezone,createdAt:r.created_at,updatedAt:r.updated_at}}function R0(r){return{id:r.id,organizationId:r.organization_id,name:r.name,sortOrder:r.sort_order,createdAt:r.created_at}}function D0(r){return{id:r.id,roomId:r.room_id,organizationId:r.organization_id,label:r.label,deskId:r.desk_id,sortOrder:r.sort_order,createdAt:r.created_at}}function T0(){const{user:r}=Ds();return Nt({queryKey:["user-organizations",r==null?void 0:r.id],queryFn:async()=>{if(!r)return[];const{data:e,error:t}=await Ye.from("organization_members").select("role, organizations(*)").eq("user_id",r.id);if(t)throw t;return e?e.map(s=>({organization:Uu(s.organizations),role:s.role})):[]},enabled:!!r})}function P0(r){return Nt({queryKey:["org-rooms",r],queryFn:async()=>{if(!r)return[];const{data:e,error:t}=await Ye.from("rooms").select("*").eq("organization_id",r).order("sort_order");if(t)throw t;return(e||[]).map(R0)},enabled:!!r})}function O0(r){return Nt({queryKey:["org-desks",r],queryFn:async()=>{if(!r)return[];const{data:e,error:t}=await Ye.from("desks").select("*").eq("organization_id",r).order("sort_order");if(t)throw t;return(e||[]).map(D0)},enabled:!!r})}function A0(){const{user:r}=Ds(),e=vt();return Wr({mutationFn:async t=>{if(!r)throw new Error("Not authenticated");const{data:s,error:n}=await Ye.from("organizations").insert({name:t.name,slug:t.slug,rooms_count:t.roomsCount,desks_per_room:t.desksPerRoom,currency:t.currency}).select().single();if(n)throw n;const{error:a}=await Ye.from("organization_members").insert({organization_id:s.id,user_id:r.id,role:"owner"});if(a)throw a;const i=t.roomNames.map((m,p)=>({organization_id:s.id,name:m,sort_order:p})),{data:l,error:c}=await Ye.from("rooms").insert(i).select();if(c)throw c;const d=[];for(const m of l)for(let p=0;p<t.desksPerRoom;p++){const y=l.indexOf(m)+1,v=p+1;d.push({room_id:m.id,organization_id:s.id,label:`${m.name}, Desk ${v}`,desk_id:`room${y}-desk${v}`,sort_order:p})}const{error:u}=await Ye.from("desks").insert(d);if(u)throw u;const h=["desk_bookings","waiting_list_entries","expenses","recurring_expenses"];for(const m of h)await Ye.from(m).update({organization_id:s.id}).is("organization_id",null);return Uu(s)},onSuccess:()=>{e.invalidateQueries({queryKey:["user-organizations"]})}})}function M0(){return Wr({mutationFn:async r=>{const{data:e,error:t}=await Ye.from("organizations").select("id").eq("slug",r).limit(1);if(t)throw t;return!e||e.length===0}})}const Hl="deskplanner-current-org",Bu=f.createContext(void 0);function Ts(){const r=f.useContext(Bu);if(!r)throw new Error("useOrganization must be used within an OrganizationProvider");return r}function I0({children:r}){var v,g;const[e,t]=f.useState(()=>{try{return localStorage.getItem(Hl)}catch{return null}}),{data:s=[],isLoading:n}=T0(),a=((v=s.find(x=>x.organization.id===e))==null?void 0:v.organization)||((g=s[0])==null?void 0:g.organization)||null,i=a==null?void 0:a.id,{data:l=[],isLoading:c}=P0(i),{data:d=[],isLoading:u}=O0(i),h=d.map((x,b)=>{const w=l.find(R=>R.id===x.roomId),E=w?l.indexOf(w)+1:1;return{id:x.deskId,room:E,number:b+1,label:x.label}}),m=x=>{t(x.id);try{localStorage.setItem(Hl,x.id)}catch{}};f.useEffect(()=>{!e&&s.length>0&&m(s[0].organization)},[s,e]);const p=n||c||u,y=s.length>0;return o.jsx(Bu.Provider,{value:{currentOrg:a,setCurrentOrg:m,rooms:l,desks:d,legacyDesks:h,loading:p,hasOrganization:y},children:r})}const Lt=[{id:"room1-desk1",room:1,number:1,label:"Room 1, Desk 1"},{id:"room1-desk2",room:1,number:2,label:"Room 1, Desk 2"},{id:"room1-desk3",room:1,number:3,label:"Room 1, Desk 3"},{id:"room1-desk4",room:1,number:4,label:"Room 1, Desk 4"},{id:"room2-desk1",room:2,number:5,label:"Room 2, Desk 5"},{id:"room2-desk2",room:2,number:6,label:"Room 2, Desk 6"},{id:"room2-desk3",room:2,number:7,label:"Room 2, Desk 7"},{id:"room2-desk4",room:2,number:8,label:"Room 2, Desk 8"}],ls=Lt.length;class zu{constructor(e){this.DAYS_TO_KEEP=60,this.client=Ye,this.organizationId=e||null,this.checkAuthStatus()}async checkAuthStatus(){try{const{data:{user:e}}=await this.client.auth.getUser();e?console.log("Authenticated as:",e.email):console.log("No authentication - read-only mode")}catch(e){console.warn("Auth check failed:",e)}}isConfigured(){return!0}getBookingKey(e,t){return`${e}-${t}`}scopeQuery(e){return this.organizationId?e.eq("organization_id",this.organizationId):e}async getBooking(e,t){try{const{data:s,error:n}=await this.scopeQuery(this.client.from("desk_bookings").select("*").eq("desk_id",e).eq("date",t)).limit(1);return n?(console.error("Supabase error fetching booking:",n),null):!s||s.length===0?null:this.mapFromDatabase(s[0])}catch(s){return console.error("Error fetching booking:",s),null}}async getAllBookings(e,t){try{let s=this.scopeQuery(this.client.from("desk_bookings").select("*"));e&&(s=s.gte("date",e)),t&&(s=s.lte("date",t));const{data:n,error:a}=await s;if(a)return console.error("Supabase error fetching bookings:",a),{};const i={};for(const l of n||[]){const c=this.mapFromDatabase(l),d=this.getBookingKey(c.deskId,c.date);i[d]=c}return i}catch(s){return console.error("Error fetching all bookings:",s),{}}}async saveBooking(e){try{const t=this.mapToDatabase(e),{error:s}=await this.client.from("desk_bookings").upsert(t,{onConflict:"id",ignoreDuplicates:!1});if(s)throw console.error("Supabase upsert error:",s),s}catch(t){throw console.error("Error saving booking:",t),new Error("Failed to save booking")}}async deleteBooking(e,t){try{const{error:s}=await this.client.from("desk_bookings").delete().eq("desk_id",e).eq("date",t);if(s)throw s}catch(s){throw console.error("Error deleting booking:",s),new Error("Failed to delete booking")}}async bulkUpdateBookings(e){try{const t=e.map(n=>this.mapToDatabase(n)),{error:s}=await this.client.from("desk_bookings").upsert(t,{onConflict:"id"});if(s)throw s}catch(t){throw console.error("Error bulk updating bookings:",t),new Error("Failed to bulk update bookings")}}async bulkDeleteBookings(e){try{const t=e.map(({deskId:n,date:a})=>`and(desk_id.eq.${n},date.eq.${a})`),{error:s}=await this.client.from("desk_bookings").delete().or(t.join(","));if(s)throw s}catch(t){throw console.error("Error bulk deleting bookings:",t),new Error("Failed to bulk delete bookings")}}async getBookingsForDateRange(e,t){try{const{data:s,error:n}=await this.scopeQuery(this.client.from("desk_bookings").select("*").gte("date",e).lte("date",t)).order("date");if(n)throw n;return(s||[]).map(a=>this.mapFromDatabase(a))}catch(s){throw console.error("Error fetching bookings for date range:",s),new Error("Failed to fetch bookings for date range")}}async getBookingsForDesk(e,t,s){try{let n=this.scopeQuery(this.client.from("desk_bookings").select("*").eq("desk_id",e));t&&(n=n.gte("date",t)),s&&(n=n.lte("date",s)),n=n.order("date");const{data:a,error:i}=await n;if(i)throw i;return(a||[]).map(l=>this.mapFromDatabase(l))}catch(n){throw console.error("Error fetching bookings for desk:",n),new Error("Failed to fetch bookings for desk")}}async getDeskStats(e){try{const{data:t,error:s}=await this.scopeQuery(this.client.from("desk_bookings").select("status").in("date",e));if(s)throw s;const n=ls*e.length;let a=0,i=0;for(const c of t||[])switch(c.status){case"assigned":a++;break;case"booked":i++;break}return{available:n-a-i,assigned:a,booked:i}}catch(t){throw console.error("Error fetching desk stats:",t),new Error("Failed to fetch desk stats")}}async getMonthlyStats(e,t){const{getCurrency:s}=await yt(async()=>{const{getCurrency:u}=await Promise.resolve().then(()=>Hn);return{getCurrency:u}},void 0),n=s(),a=new Date(e,t,1),i=new Date(e,t+1,0),l=[];let c=new Date(a);for(;c<=i;){const u=c.getDay();u!==0&&u!==6&&l.push(c.toISOString().split("T")[0]),c.setDate(c.getDate()+1)}const d=ls*l.length;try{const{data:u,error:h}=await this.scopeQuery(this.client.from("desk_bookings").select("date, start_date, end_date, status, price, desk_id").in("date",l));if(h)throw h;const m=new Set;let p=0,y=0,v=0;for(const w of u||[]){(w.status==="assigned"||w.status==="booked")&&v++;const E=`${w.desk_id}-${w.start_date}`;if(m.has(E))continue;m.add(E);const R=new Date(w.start_date),D=new Date(w.end_date),j=this.countBusinessDays(R,D),$=R>a?R:a,N=D<i?D:i,A=this.countBusinessDays($,N),F=w.price||0,T=j>0?A/j*F:0;w.status==="assigned"?p+=T:w.status==="booked"&&(y+=T)}const g=p+y,x=d>0?v/d*100:0,b=v>0?g/v:0;return{totalRevenue:g,confirmedRevenue:p,expectedRevenue:y,occupiedDays:v,totalDeskDays:d,occupancyRate:x,revenuePerOccupiedDay:b,currency:n}}catch(u){return console.error("Error fetching monthly stats:",u),{totalRevenue:0,confirmedRevenue:0,expectedRevenue:0,occupiedDays:0,totalDeskDays:d,occupancyRate:0,revenuePerOccupiedDay:0,currency:n}}}countBusinessDays(e,t){let s=0;const n=new Date(e);for(;n<=t;){const a=n.getDay();a!==0&&a!==6&&s++,n.setDate(n.getDate()+1)}return s}async getStatsForDateRange(e,t){const{getCurrency:s}=await yt(async()=>{const{getCurrency:u}=await Promise.resolve().then(()=>Hn);return{getCurrency:u}},void 0),n=s(),a=new Date(e),i=new Date(t),l=[];let c=new Date(a);for(;c<=i;){const u=c.getDay();u!==0&&u!==6&&l.push(c.toISOString().split("T")[0]),c.setDate(c.getDate()+1)}const d=ls*l.length;try{const{data:u,error:h}=await this.scopeQuery(this.client.from("desk_bookings").select("date, start_date, end_date, status, price, desk_id").in("date",l));if(h)throw h;const m=new Set;let p=0,y=0,v=0;for(const w of u||[]){(w.status==="assigned"||w.status==="booked")&&v++;const E=`${w.desk_id}-${w.start_date}`;if(m.has(E))continue;m.add(E);const R=new Date(w.start_date),D=new Date(w.end_date),j=this.countBusinessDays(R,D),$=R>a?R:a,N=D<i?D:i,A=this.countBusinessDays($,N),F=w.price||0,T=j>0?A/j*F:0;w.status==="assigned"?p+=T:w.status==="booked"&&(y+=T)}const g=p+y,x=d>0?v/d*100:0,b=v>0?g/v:0;return{totalRevenue:g,confirmedRevenue:p,expectedRevenue:y,occupiedDays:v,totalDeskDays:d,occupancyRate:x,revenuePerOccupiedDay:b,currency:n}}catch(u){return console.error("Error fetching stats for date range:",u),{totalRevenue:0,confirmedRevenue:0,expectedRevenue:0,occupiedDays:0,totalDeskDays:d,occupancyRate:0,revenuePerOccupiedDay:0,currency:n}}}async clearAllBookings(){try{const{error:e}=await this.client.from("desk_bookings").delete().neq("id","");if(e)throw e}catch(e){throw console.error("Error clearing all bookings:",e),new Error("Failed to clear all bookings")}}async saveWaitingListEntry(e){try{let t;if(typeof e.id=="string"&&e.id.startsWith("waiting-")){const a=e.id.match(/waiting-(\d+)-/);t=a?parseInt(a[1]):Date.now()}else t=typeof e.id=="string"?parseInt(e.id)||Date.now():e.id;const s={id:t,name:e.name,preferred_dates:e.preferredDates,contact_info:e.contactInfo,notes:e.notes,created_at:e.createdAt};this.organizationId&&(s.organization_id=this.organizationId);const{error:n}=await this.client.from("waiting_list_entries").upsert(s,{onConflict:"id"});if(n)throw n}catch(t){throw console.error("Error saving waiting list entry:",t),new Error("Failed to save waiting list entry")}}async getWaitingListEntries(){try{const{data:e,error:t}=await this.scopeQuery(this.client.from("waiting_list_entries").select("*")).order("created_at");if(t)throw t;return(e||[]).map(s=>({id:s.id.toString(),name:s.name,preferredDates:s.preferred_dates,contactInfo:s.contact_info,notes:s.notes,createdAt:s.created_at}))}catch(e){throw console.error("Error fetching waiting list entries:",e),new Error("Failed to fetch waiting list entries")}}async deleteWaitingListEntry(e){try{let t;if(e.startsWith("waiting-")){const n=e.match(/waiting-(\d+)-/);t=n?parseInt(n[1]):parseInt(e)||0}else t=parseInt(e)||0;const{error:s}=await this.client.from("waiting_list_entries").delete().eq("id",t);if(s)throw s}catch(t){throw console.error("Error deleting waiting list entry:",t),new Error("Failed to delete waiting list entry")}}async getAppSettings(){try{const{data:e,error:t}=await this.client.from("app_settings").select("*").eq("id","default").limit(1);return t?(console.error("Supabase error fetching app settings:",t),null):!e||e.length===0?null:{currency:e[0].currency,createdAt:e[0].created_at,updatedAt:e[0].updated_at}}catch(e){return console.error("Error fetching app settings:",e),null}}async saveAppSettings(e){try{const t={id:"default",currency:e.currency,created_at:e.createdAt,updated_at:e.updatedAt},{error:s}=await this.client.from("app_settings").upsert(t,{onConflict:"id"});if(s)throw s}catch(t){throw console.error("Error saving app settings:",t),new Error("Failed to save app settings")}}mapToDatabase(e){const s={id:this.stringToNumericId(e.id),desk_id:e.deskId,date:e.date,start_date:e.startDate,end_date:e.endDate,status:e.status,person_name:e.personName,title:e.title,price:e.price,currency:e.currency,created_at:e.createdAt};return this.organizationId&&(s.organization_id=this.organizationId),s}mapFromDatabase(e){return{id:String(e.id),deskId:e.desk_id,date:e.date,startDate:e.start_date||e.date,endDate:e.end_date||e.date,status:e.status,personName:e.person_name,title:e.title,price:e.price,currency:e.currency||"EUR",createdAt:e.created_at}}stringToNumericId(e){let t=0;for(let s=0;s<e.length;s++){const n=e.charCodeAt(s);t=(t<<5)-t+n,t=t&t}return Math.abs(t)}async getExpenses(e,t){try{const{data:s,error:n}=await this.scopeQuery(this.client.from("expenses").select("*").gte("date",e).lte("date",t)).order("date");if(n)throw n;return(s||[]).map(a=>this.mapExpenseFromDatabase(a))}catch(s){return console.error("Error fetching expenses:",s),[]}}async saveExpense(e){try{const t=this.mapExpenseToDatabase(e),{error:s}=await this.client.from("expenses").upsert(t,{onConflict:"id"});if(s)throw s}catch(t){throw console.error("Error saving expense:",t),new Error("Failed to save expense")}}async deleteExpense(e){try{const t=parseInt(e,10),{error:s}=await this.client.from("expenses").delete().eq("id",t);if(s)throw s}catch(t){throw console.error("Error deleting expense:",t),new Error("Failed to delete expense")}}async getRecurringExpenses(){try{const{data:e,error:t}=await this.scopeQuery(this.client.from("recurring_expenses").select("*")).order("created_at");if(t)throw t;return(e||[]).map(s=>this.mapRecurringExpenseFromDatabase(s))}catch(e){return console.error("Error fetching recurring expenses:",e),[]}}async saveRecurringExpense(e){try{const t=this.mapRecurringExpenseToDatabase(e),{error:s}=await this.client.from("recurring_expenses").upsert(t,{onConflict:"id"});if(s)throw s}catch(t){throw console.error("Error saving recurring expense:",t),new Error("Failed to save recurring expense")}}async deleteRecurringExpense(e){try{const t=parseInt(e,10),{error:s}=await this.client.from("recurring_expenses").delete().eq("id",t);if(s)throw s}catch(t){throw console.error("Error deleting recurring expense:",t),new Error("Failed to delete recurring expense")}}async generateRecurringExpenses(e,t){try{const n=(await this.getRecurringExpenses()).filter(d=>d.isActive),a=`${e}-${String(t+1).padStart(2,"0")}-01`,i=new Date(e,t+1,0).toISOString().split("T")[0],l=await this.getExpenses(a,i),c=[];for(const d of n)if(!l.some(h=>h.isRecurring&&h.recurringExpenseId===d.id)){const h=`${e}-${String(t+1).padStart(2,"0")}-${String(d.dayOfMonth).padStart(2,"0")}`,m={id:`expense-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,date:h,amount:d.amount,currency:d.currency,category:d.category,description:d.description,isRecurring:!0,recurringExpenseId:d.id,createdAt:new Date().toISOString()};await this.saveExpense(m),c.push(m)}return c}catch(s){return console.error("Error generating recurring expenses:",s),[]}}mapExpenseToDatabase(e){const t=/^\d+$/.test(e.id)?parseInt(e.id,10):this.stringToNumericId(e.id),s=e.recurringExpenseId?/^\d+$/.test(e.recurringExpenseId)?parseInt(e.recurringExpenseId,10):this.stringToNumericId(e.recurringExpenseId):null,n={id:t,date:e.date,amount:e.amount,currency:e.currency,category:e.category,description:e.description,is_recurring:e.isRecurring,recurring_expense_id:s,created_at:e.createdAt};return this.organizationId&&(n.organization_id=this.organizationId),n}mapExpenseFromDatabase(e){return{id:String(e.id),date:e.date,amount:parseFloat(e.amount),currency:e.currency,category:e.category,description:e.description,isRecurring:e.is_recurring||!1,recurringExpenseId:e.recurring_expense_id?String(e.recurring_expense_id):void 0,createdAt:e.created_at}}mapRecurringExpenseToDatabase(e){const s={id:/^\d+$/.test(e.id)?parseInt(e.id,10):this.stringToNumericId(e.id),amount:e.amount,currency:e.currency,category:e.category,description:e.description,day_of_month:e.dayOfMonth,is_active:e.isActive,created_at:e.createdAt};return this.organizationId&&(s.organization_id=this.organizationId),s}mapRecurringExpenseFromDatabase(e){return{id:String(e.id),amount:parseFloat(e.amount),currency:e.currency,category:e.category,description:e.description,dayOfMonth:e.day_of_month,isActive:e.is_active,createdAt:e.created_at}}}class Pn{constructor(){this.STORAGE_KEY="deskBookings",this.DAYS_TO_KEEP=60,this.EXPENSES_KEY="coworking-expenses",this.RECURRING_EXPENSES_KEY="coworking-recurring-expenses",this.cleanupOldBookings()}getBookingKey(e,t){return`${e}-${t}`}cleanupOldBookings(){try{const e=this.getStorageData(),t=new Date;t.setHours(0,0,0,0);const s=new Date(t);s.setDate(s.getDate()-this.DAYS_TO_KEEP);let n=0;const a={};for(const[i,l]of Object.entries(e))new Date(l.date+"T00:00:00")>=s?a[i]=l:n++;n>0&&(this.saveStorageData(a),console.log(`Automatically cleaned up ${n} bookings older than ${this.DAYS_TO_KEEP} days`))}catch(e){console.error("Error during cleanup:",e)}}getStorageData(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(!e)return{};const t=JSON.parse(e),s={};for(const[n,a]of Object.entries(t)){const i=a;i.status!=="unavailable"&&(s[n]=i)}return s}catch(e){return console.error("Error reading from localStorage:",e),{}}}saveStorageData(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(t){throw console.error("Error saving to localStorage:",t),new Error("Failed to save booking data")}}async getBooking(e,t){const s=this.getStorageData(),n=this.getBookingKey(e,t);return s[n]||null}async getAllBookings(e,t){const s=this.getStorageData();if(!e||!t)return s;const n=new Date(e),a=new Date(t),i={};for(const[l,c]of Object.entries(s)){const d=new Date(c.date);d>=n&&d<=a&&(i[l]=c)}return i}async saveBooking(e){const t=this.getStorageData(),s=this.getBookingKey(e.deskId,e.date),n={...e,startDate:e.startDate||e.date,endDate:e.endDate||e.date};t[s]=n,this.saveStorageData(t)}async deleteBooking(e,t){const s=this.getStorageData(),n=this.getBookingKey(e,t);delete s[n],this.saveStorageData(s)}async bulkUpdateBookings(e){const t=this.getStorageData();for(const s of e){const n=this.getBookingKey(s.deskId,s.date);t[n]=s}this.saveStorageData(t)}async bulkDeleteBookings(e){const t=this.getStorageData();for(const{deskId:s,date:n}of e){const a=this.getBookingKey(s,n);delete t[a]}this.saveStorageData(t)}async getBookingsForDateRange(e,t){const s=this.getStorageData(),n=new Date(e),a=new Date(t);return Object.values(s).filter(i=>{const l=new Date(i.date);return l>=n&&l<=a})}async getBookingsForDesk(e,t,s){const n=this.getStorageData();let a=Object.values(n).filter(i=>i.deskId===e);if(t&&s){const i=new Date(t),l=new Date(s);a=a.filter(c=>{const d=new Date(c.date);return d>=i&&d<=l})}return a}async getDeskStats(e){const t=this.getStorageData(),s=ls*e.length;let n=0,a=0;for(const l of Object.values(t))if(e.includes(l.date))switch(l.status){case"assigned":n++;break;case"booked":a++;break}return{available:s-n-a,assigned:n,booked:a}}async getMonthlyStats(e,t){const s=this.getStorageData(),{getCurrency:n}=await yt(async()=>{const{getCurrency:b}=await Promise.resolve().then(()=>Hn);return{getCurrency:b}},void 0),a=n(),i=new Date(e,t,1),l=new Date(e,t+1,0),c=[];let d=new Date(i);for(;d<=l;){const b=d.getDay();b!==0&&b!==6&&c.push(d.toISOString().split("T")[0]),d.setDate(d.getDate()+1)}const u=ls*c.length,h=new Set;let m=0,p=0,y=0;for(const b of Object.values(s)){if(!c.includes(b.date))continue;(b.status==="assigned"||b.status==="booked")&&y++;const w=`${b.deskId}-${b.startDate}`;if(h.has(w))continue;h.add(w);const E=new Date(b.startDate),R=new Date(b.endDate),D=this.countBusinessDays(E,R),j=E>i?E:i,$=R<l?R:l,N=this.countBusinessDays(j,$),A=b.price||0,F=D>0?N/D*A:0;b.status==="assigned"?m+=F:b.status==="booked"&&(p+=F)}const v=m+p,g=u>0?y/u*100:0,x=y>0?v/y:0;return{totalRevenue:v,confirmedRevenue:m,expectedRevenue:p,occupiedDays:y,totalDeskDays:u,occupancyRate:g,revenuePerOccupiedDay:x,currency:a}}countBusinessDays(e,t){let s=0;const n=new Date(e);for(;n<=t;){const a=n.getDay();a!==0&&a!==6&&s++,n.setDate(n.getDate()+1)}return s}async getStatsForDateRange(e,t){const s=this.getStorageData(),{getCurrency:n}=await yt(async()=>{const{getCurrency:b}=await Promise.resolve().then(()=>Hn);return{getCurrency:b}},void 0),a=n(),i=new Date(e),l=new Date(t),c=[];let d=new Date(i);for(;d<=l;){const b=d.getDay();b!==0&&b!==6&&c.push(d.toISOString().split("T")[0]),d.setDate(d.getDate()+1)}const u=ls*c.length,h=new Set;let m=0,p=0,y=0;for(const b of Object.values(s)){if(!c.includes(b.date))continue;(b.status==="assigned"||b.status==="booked")&&y++;const w=`${b.deskId}-${b.startDate}`;if(h.has(w))continue;h.add(w);const E=new Date(b.startDate),R=new Date(b.endDate),D=this.countBusinessDays(E,R),j=E>i?E:i,$=R<l?R:l,N=this.countBusinessDays(j,$),A=b.price||0,F=D>0?N/D*A:0;b.status==="assigned"?m+=F:b.status==="booked"&&(p+=F)}const v=m+p,g=u>0?y/u*100:0,x=y>0?v/y:0;return{totalRevenue:v,confirmedRevenue:m,expectedRevenue:p,occupiedDays:y,totalDeskDays:u,occupancyRate:g,revenuePerOccupiedDay:x,currency:a}}async clearAllBookings(){localStorage.removeItem(this.STORAGE_KEY)}async getWaitingListEntries(){try{const e=localStorage.getItem("coworking-waiting-list"),t=e?JSON.parse(e):{};return Object.values(t).sort((s,n)=>new Date(n.createdAt).getTime()-new Date(s.createdAt).getTime())}catch(e){return console.error("Error loading waiting list from localStorage:",e),[]}}async saveWaitingListEntry(e){try{const t=localStorage.getItem("coworking-waiting-list"),s=t?JSON.parse(t):{};s[e.id]=e,localStorage.setItem("coworking-waiting-list",JSON.stringify(s))}catch(t){throw console.error("Error saving waiting list to localStorage:",t),new Error("Failed to save waiting list entry")}}async deleteWaitingListEntry(e){try{const t=localStorage.getItem("coworking-waiting-list"),s=t?JSON.parse(t):{};delete s[e],localStorage.setItem("coworking-waiting-list",JSON.stringify(s))}catch(t){throw console.error("Error deleting waiting list from localStorage:",t),new Error("Failed to delete waiting list entry")}}async getExpenses(e,t){try{const s=localStorage.getItem(this.EXPENSES_KEY),n=s?JSON.parse(s):{};return Object.values(n).filter(a=>a.date>=e&&a.date<=t).sort((a,i)=>a.date.localeCompare(i.date))}catch(s){return console.error("Error loading expenses from localStorage:",s),[]}}async saveExpense(e){try{const t=localStorage.getItem(this.EXPENSES_KEY),s=t?JSON.parse(t):{};s[e.id]=e,localStorage.setItem(this.EXPENSES_KEY,JSON.stringify(s))}catch(t){throw console.error("Error saving expense to localStorage:",t),new Error("Failed to save expense")}}async deleteExpense(e){try{const t=localStorage.getItem(this.EXPENSES_KEY),s=t?JSON.parse(t):{};delete s[e],localStorage.setItem(this.EXPENSES_KEY,JSON.stringify(s))}catch(t){throw console.error("Error deleting expense from localStorage:",t),new Error("Failed to delete expense")}}async getRecurringExpenses(){try{const e=localStorage.getItem(this.RECURRING_EXPENSES_KEY),t=e?JSON.parse(e):{};return Object.values(t).sort((s,n)=>s.createdAt.localeCompare(n.createdAt))}catch(e){return console.error("Error loading recurring expenses from localStorage:",e),[]}}async saveRecurringExpense(e){try{const t=localStorage.getItem(this.RECURRING_EXPENSES_KEY),s=t?JSON.parse(t):{};s[e.id]=e,localStorage.setItem(this.RECURRING_EXPENSES_KEY,JSON.stringify(s))}catch(t){throw console.error("Error saving recurring expense to localStorage:",t),new Error("Failed to save recurring expense")}}async deleteRecurringExpense(e){try{const t=localStorage.getItem(this.RECURRING_EXPENSES_KEY),s=t?JSON.parse(t):{};delete s[e],localStorage.setItem(this.RECURRING_EXPENSES_KEY,JSON.stringify(s))}catch(t){throw console.error("Error deleting recurring expense from localStorage:",t),new Error("Failed to delete recurring expense")}}async generateRecurringExpenses(e,t){try{const n=(await this.getRecurringExpenses()).filter(d=>d.isActive),a=`${e}-${String(t+1).padStart(2,"0")}-01`,i=new Date(e,t+1,0).toISOString().split("T")[0],l=await this.getExpenses(a,i),c=[];for(const d of n)if(!l.some(h=>h.isRecurring&&h.recurringExpenseId===d.id)){const h=`${e}-${String(t+1).padStart(2,"0")}-${String(d.dayOfMonth).padStart(2,"0")}`,m={id:`expense-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,date:h,amount:d.amount,currency:d.currency,category:d.category,description:d.description,isRecurring:!0,recurringExpenseId:d.id,createdAt:new Date().toISOString()};await this.saveExpense(m),c.push(m)}return c}catch(s){return console.error("Error generating recurring expenses:",s),[]}}}function qu(r,e){const t="supabase";switch(t){case"localStorage":return new Pn;case"supabase":try{const s=new zu(e);return s.isConfigured()?s:(console.warn("Supabase not configured, falling back to localStorage"),new Pn)}catch(s){return console.error("Error initializing Supabase, falling back to localStorage:",s),new Pn}default:return console.warn(`Unknown data store type: ${t}, using localStorage`),new Pn}}const de=qu(),$0=f.createContext(void 0);function L0({children:r}){const{currentOrg:e}=Ts(),t=f.useMemo(()=>qu(void 0,e==null?void 0:e.id),[e==null?void 0:e.id]);return o.jsx($0.Provider,{value:t,children:r})}const F0=Jn("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),re=f.forwardRef(({className:r,variant:e,size:t,asChild:s=!1,...n},a)=>{const i=s?Jh:"button";return o.jsx(i,{className:se(F0({variant:e,size:t,className:r})),ref:a,...n})});re.displayName="Button";class U0 extends uf.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught:",e,t)}render(){var e;return this.state.hasError?this.props.fallback?this.props.fallback:o.jsx("div",{className:"min-h-[400px] flex items-center justify-center p-8",children:o.jsxs("div",{className:"text-center max-w-md",children:[o.jsx($m,{className:"h-12 w-12 text-amber-500 mx-auto mb-4"}),o.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Something went wrong"}),o.jsx("p",{className:"text-sm text-gray-600 mb-4",children:((e=this.state.error)==null?void 0:e.message)||"An unexpected error occurred."}),o.jsxs(re,{onClick:()=>{this.setState({hasError:!1,error:null}),window.location.reload()},children:[o.jsx(Dm,{className:"h-4 w-4 mr-2"}),"Reload Page"]})]})}):this.props.children}}const B0=[{icon:pd,title:"Visual Calendar",description:"See all your desks and bookings at a glance with weekly and monthly views."},{icon:Wi,title:"Revenue Tracking",description:"Track confirmed and expected revenue, occupancy rates, and expenses in real time."},{icon:Vi,title:"Waiting List",description:"Manage demand with a built-in waiting list when all desks are occupied."},{icon:Br,title:"Multi-Room Support",description:"Configure any number of rooms and desks to match your physical space."}],z0=[{number:"1",title:"Sign Up",description:"Create your free account in seconds."},{number:"2",title:"Configure",description:"Set up your rooms, desks, and currency."},{number:"3",title:"Book",description:"Start managing bookings and tracking revenue."}],q0=[{name:"Free",price:"0",description:"For small coworking spaces getting started.",features:["Up to 2 rooms","Up to 8 desks","Revenue tracking","Waiting list"],cta:"Get Started",highlighted:!1},{name:"Pro",price:"29",description:"For growing spaces that need more flexibility.",features:["Unlimited rooms","Unlimited desks","Team members","Priority support","Custom branding"],cta:"Coming Soon",highlighted:!0,comingSoon:!0},{name:"Enterprise",price:"Custom",description:"For multi-location operators.",features:["Multiple locations","API access","Dedicated support","Custom integrations","SLA guarantee"],cta:"Contact Us",highlighted:!1,comingSoon:!0}];function W0(){return o.jsxs("div",{className:"min-h-screen bg-white",children:[o.jsx("nav",{className:"border-b bg-white/80 backdrop-blur-sm sticky top-0 z-50",children:o.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Br,{className:"h-6 w-6 text-blue-600"}),o.jsx("span",{className:"font-bold text-xl",children:"DeskPlanner"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Cr,{to:"/login",children:o.jsx(re,{variant:"ghost",size:"sm",children:"Log In"})}),o.jsx(Cr,{to:"/signup",children:o.jsx(re,{size:"sm",children:"Sign Up Free"})})]})]})}),o.jsx("section",{className:"py-20 sm:py-28",children:o.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[o.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold text-gray-900 tracking-tight",children:["Desk booking for",o.jsx("span",{className:"text-blue-600",children:" coworking spaces"})]}),o.jsx("p",{className:"mt-6 text-lg sm:text-xl text-gray-600 max-w-2xl mx-auto",children:"A simple, visual tool to manage desk availability, track revenue, and keep your coworking space running smoothly."}),o.jsxs("div",{className:"mt-10 flex flex-col sm:flex-row items-center justify-center gap-4",children:[o.jsx(Cr,{to:"/signup",children:o.jsxs(re,{size:"lg",className:"px-8",children:["Get Started Free ",o.jsx(ci,{className:"ml-2 h-4 w-4"})]})}),o.jsx(Cr,{to:"/login",children:o.jsx(re,{variant:"outline",size:"lg",className:"px-8",children:"Log In"})})]})]})}),o.jsx("section",{className:"py-20 bg-gray-50",children:o.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Everything you need to manage desks"}),o.jsx("p",{className:"mt-4 text-lg text-gray-600",children:"Simple tools that save you time and help you grow."})]}),o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:B0.map(r=>o.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border",children:[o.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4",children:o.jsx(r.icon,{className:"h-6 w-6 text-blue-600"})}),o.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:r.title}),o.jsx("p",{className:"text-sm text-gray-600",children:r.description})]},r.title))})]})}),o.jsx("section",{className:"py-20",children:o.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsx("div",{className:"text-center mb-16",children:o.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Up and running in minutes"})}),o.jsx("div",{className:"grid md:grid-cols-3 gap-8 max-w-3xl mx-auto",children:z0.map(r=>o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-12 h-12 bg-blue-600 text-white rounded-full flex items-center justify-center mx-auto mb-4 text-lg font-bold",children:r.number}),o.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:r.title}),o.jsx("p",{className:"text-sm text-gray-600",children:r.description})]},r.number))})]})}),o.jsx("section",{className:"py-20 bg-gray-50",children:o.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Simple pricing"}),o.jsx("p",{className:"mt-4 text-lg text-gray-600",children:"Start free, upgrade when you need more."})]}),o.jsx("div",{className:"grid md:grid-cols-3 gap-8 max-w-4xl mx-auto",children:q0.map(r=>o.jsxs("div",{className:`rounded-xl p-6 ${r.highlighted?"bg-blue-600 text-white shadow-lg ring-2 ring-blue-600":"bg-white border shadow-sm"}`,children:[o.jsx("h3",{className:`font-semibold text-lg ${r.highlighted?"text-white":"text-gray-900"}`,children:r.name}),o.jsx("div",{className:"mt-4 flex items-baseline gap-1",children:r.price!=="Custom"?o.jsxs(o.Fragment,{children:[o.jsxs("span",{className:`text-4xl font-bold ${r.highlighted?"text-white":"text-gray-900"}`,children:["$",r.price]}),o.jsx("span",{className:r.highlighted?"text-blue-100":"text-gray-500",children:"/month"})]}):o.jsx("span",{className:`text-4xl font-bold ${r.highlighted?"text-white":"text-gray-900"}`,children:"Custom"})}),o.jsx("p",{className:`mt-2 text-sm ${r.highlighted?"text-blue-100":"text-gray-600"}`,children:r.description}),o.jsx("ul",{className:"mt-6 space-y-3",children:r.features.map(e=>o.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[o.jsx(mr,{className:`h-4 w-4 ${r.highlighted?"text-blue-200":"text-blue-600"}`}),e]},e))}),o.jsx("div",{className:"mt-8",children:r.comingSoon?o.jsx(re,{variant:r.highlighted?"secondary":"outline",className:"w-full",disabled:!0,children:r.cta}):o.jsx(Cr,{to:"/signup",children:o.jsx(re,{variant:r.highlighted?"secondary":"default",className:"w-full",children:r.cta})})})]},r.name))})]})}),o.jsx("footer",{className:"border-t py-12",children:o.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Br,{className:"h-5 w-5 text-blue-600"}),o.jsx("span",{className:"font-bold",children:"DeskPlanner"})]}),o.jsxs("p",{className:"text-sm text-gray-500",children:[" ",new Date().getFullYear()," DeskPlanner. All rights reserved."]})]})})})]})}const xr=ef,K0=Xh,Wu=f.forwardRef(({className:r,...e},t)=>o.jsx(vc,{ref:t,className:se("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...e}));Wu.displayName=vc.displayName;const Wt=f.forwardRef(({className:r,children:e,...t},s)=>o.jsxs(K0,{children:[o.jsx(Wu,{}),o.jsxs(xc,{ref:s,className:se("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...t,children:[e,o.jsxs(Zh,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsx(Gi,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Wt.displayName=xc.displayName;const Kt=({className:r,...e})=>o.jsx("div",{className:se("flex flex-col space-y-1.5 text-center sm:text-left",r),...e});Kt.displayName="DialogHeader";const Ht=f.forwardRef(({className:r,...e},t)=>o.jsx(bc,{ref:t,className:se("text-lg font-semibold leading-none tracking-tight",r),...e}));Ht.displayName=bc.displayName;const Ku=f.forwardRef(({className:r,...e},t)=>o.jsx(wc,{ref:t,className:se("text-sm text-muted-foreground",r),...e}));Ku.displayName=wc.displayName;const Ne=f.forwardRef(({className:r,type:e,...t},s)=>o.jsx("input",{type:e,className:se("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:s,...t}));Ne.displayName="Input";var H0="Label",Hu=f.forwardRef((r,e)=>o.jsx(st.label,{...r,ref:e,onMouseDown:t=>{var n;t.target.closest("button, input, select, textarea")||((n=r.onMouseDown)==null||n.call(r,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));Hu.displayName=H0;var Vu=Hu;const V0=Jn("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),me=f.forwardRef(({className:r,...e},t)=>o.jsx(Vu,{ref:t,className:se(V0(),r),...e}));me.displayName=Vu.displayName;function G0({isOpen:r,onClose:e,booking:t,deskId:s,date:n,onSave:a}){const[i,l]=f.useState("");f.useEffect(()=>{r&&l((t==null?void 0:t.personName)||"")},[r,t]);const c=()=>{i.trim()&&(a(i.trim()),e())},d=m=>{m.key==="Enter"?c():m.key==="Escape"&&e()},u=Lt.find(m=>m.id===s),h=new Date(n).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return o.jsx(xr,{open:r,onOpenChange:e,children:o.jsxs(Wt,{className:"sm:max-w-md",children:[o.jsx(Kt,{children:o.jsxs(Ht,{className:"flex items-center gap-2",children:[o.jsx(on,{className:"h-5 w-5 text-blue-600"}),"Assign Person to Desk"]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(me,{className:"text-sm font-medium text-gray-700",children:"Desk Information"}),o.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[u==null?void 0:u.label," - ",h]})]}),o.jsxs("div",{children:[o.jsx(me,{htmlFor:"personName",className:"text-sm font-medium text-gray-700",children:"Person Name"}),o.jsx(Ne,{id:"personName",type:"text",value:i,onChange:m=>l(m.target.value),onKeyDown:d,placeholder:"Enter person's name",className:"mt-1",autoFocus:!0})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[o.jsx(re,{variant:"outline",onClick:e,children:"Cancel"}),o.jsx(re,{onClick:c,disabled:!i.trim(),className:"bg-blue-600 hover:bg-blue-700",children:"Save"})]})]})})}const mn=f.forwardRef(({className:r,...e},t)=>o.jsx("textarea",{className:se("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...e}));mn.displayName="Textarea";const zr=of,qr=lf,pr=f.forwardRef(({className:r,children:e,...t},s)=>o.jsxs(kc,{ref:s,className:se("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...t,children:[e,o.jsx(tf,{asChild:!0,children:o.jsx(Ki,{className:"h-4 w-4 opacity-50"})})]}));pr.displayName=kc.displayName;const Gu=f.forwardRef(({className:r,...e},t)=>o.jsx(jc,{ref:t,className:se("flex cursor-default items-center justify-center py-1",r),...e,children:o.jsx(gd,{className:"h-4 w-4"})}));Gu.displayName=jc.displayName;const Yu=f.forwardRef(({className:r,...e},t)=>o.jsx(Sc,{ref:t,className:se("flex cursor-default items-center justify-center py-1",r),...e,children:o.jsx(Ki,{className:"h-4 w-4"})}));Yu.displayName=Sc.displayName;const gr=f.forwardRef(({className:r,children:e,position:t="popper",...s},n)=>o.jsx(rf,{children:o.jsxs(_c,{ref:n,className:se("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:t,...s,children:[o.jsx(Gu,{}),o.jsx(sf,{className:se("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),o.jsx(Yu,{})]})}));gr.displayName=_c.displayName;const Y0=f.forwardRef(({className:r,...e},t)=>o.jsx(Ec,{ref:t,className:se("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...e}));Y0.displayName=Ec.displayName;const Fe=f.forwardRef(({className:r,children:e,...t},s)=>o.jsxs(Nc,{ref:s,className:se("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...t,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(nf,{children:o.jsx(mr,{className:"h-4 w-4"})})}),o.jsx(af,{children:e})]}));Fe.displayName=Nc.displayName;const Q0=f.forwardRef(({className:r,...e},t)=>o.jsx(Cc,{ref:t,className:se("-mx-1 my-1 h-px bg-muted",r),...e}));Q0.displayName=Cc.displayName;const Qu="coworking-settings",qa={currency:"EUR",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};function fo(){try{const r=localStorage.getItem(Qu);if(r){const e=JSON.parse(r);return{...qa,...e}}return qa}catch(r){return console.error("Failed to load settings:",r),qa}}function Ju(r){try{const t={...fo(),...r,updatedAt:new Date().toISOString()};localStorage.setItem(Qu,JSON.stringify(t))}catch(e){throw console.error("Failed to save settings:",e),new Error("Failed to save settings to local storage")}}function pn(){return fo().currency}function Xu(r){Ju({currency:r})}const Qe={USD:"$",EUR:"",GBP:"",BGN:""},Zu={USD:"US Dollar",EUR:"Euro",GBP:"British Pound",BGN:"Bulgarian Lev"},mo=["USD","EUR","GBP"],Hn=Object.freeze(Object.defineProperty({__proto__:null,activeCurrencies:mo,currencyLabels:Zu,currencySymbols:Qe,getCurrency:pn,getSettings:fo,saveSettings:Ju,setCurrency:Xu},Symbol.toStringTag,{value:"Module"}));function J0({isOpen:r,onClose:e,booking:t,deskId:s,date:n,currency:a,onSave:i}){const[l,c]=f.useState(""),[d,u]=f.useState(""),[h,m]=f.useState(""),[p,y]=f.useState("assigned"),[v,g]=f.useState(""),[x,b]=f.useState(""),[w,E]=f.useState(""),[R,D]=f.useState(!1);f.useEffect(()=>{var q;r&&(c((t==null?void 0:t.personName)||""),u((t==null?void 0:t.title)||""),m(((q=t==null?void 0:t.price)==null?void 0:q.toString())||"8"),y((t==null?void 0:t.status)||"assigned"),t?t.startDate===t.endDate?(g(n),b(n)):(g(t.startDate),b(t.endDate)):(g(n),b(n)),E(""))},[r,t,n]);const j=async()=>{const q=l.trim(),P=d.trim(),I=parseFloat(h);if(q&&I>=0&&v&&x)try{D(!0),E(""),await i({personName:q,title:P,price:I,status:p,startDate:v,endDate:x,currency:a}),e()}catch(O){O.message&&O.message.includes("conflict")?E(O.message):E("An error occurred while saving the booking.")}finally{D(!1)}},$=q=>{q.key==="Enter"&&q.ctrlKey?j():q.key==="Escape"&&e()},N=Lt.find(q=>q.id===s),F=(q=>{if(!q)return"Invalid Date";try{const P=new Date(q+"T00:00:00");return isNaN(P.getTime())?q:P.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch(P){return console.error("Date formatting error:",P),q}})(n),T=l.trim()&&h.trim()&&!isNaN(parseFloat(h))&&parseFloat(h)>=0&&v&&x&&v<=x;return o.jsx(xr,{open:r,onOpenChange:e,children:o.jsxs(Wt,{className:"sm:max-w-md max-h-[90vh] overflow-y-auto",children:[o.jsx(Kt,{children:o.jsxs(Ht,{className:"flex items-center gap-2",children:[o.jsx(fd,{className:"h-5 w-5 text-blue-600"}),"Book Desk"]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[o.jsx(me,{className:"text-sm font-medium text-blue-900",children:"Desk Information"}),o.jsxs("p",{className:"text-sm text-blue-800 mt-1",children:[N==null?void 0:N.label," - ",F]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(me,{htmlFor:"startDate",className:"text-sm font-medium text-gray-700",children:"Start Date *"}),o.jsx(Ne,{id:"startDate",type:"date",value:v,onChange:q=>g(q.target.value),className:"mt-1",required:!0})]}),o.jsxs("div",{children:[o.jsx(me,{htmlFor:"endDate",className:"text-sm font-medium text-gray-700",children:"End Date *"}),o.jsx(Ne,{id:"endDate",type:"date",value:x,onChange:q=>b(q.target.value),min:v,className:"mt-1",required:!0})]})]}),o.jsxs("div",{children:[o.jsx(me,{htmlFor:"personName",className:"text-sm font-medium text-gray-700",children:"Name *"}),o.jsx(Ne,{id:"personName",type:"text",value:l,onChange:q=>c(q.target.value.slice(0,20)),onKeyDown:$,placeholder:"Enter name",maxLength:20,className:"mt-1",autoFocus:!0}),o.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l.length,"/20 characters"]})]}),o.jsxs("div",{children:[o.jsx(me,{htmlFor:"title",className:"text-sm font-medium text-gray-700",children:"Booking Title/Purpose (Optional)"}),o.jsx(mn,{id:"title",value:d,onChange:q=>u(q.target.value),onKeyDown:$,placeholder:"e.g., Team meeting, Individual work, Client presentation...",className:"mt-1 resize-none",rows:2})]}),o.jsxs("div",{children:[o.jsx(me,{htmlFor:"status",className:"text-sm font-medium text-gray-700",children:"Booking Status *"}),o.jsxs(zr,{value:p,onValueChange:q=>y(q),children:[o.jsx(pr,{className:"mt-1",children:o.jsx(qr,{})}),o.jsxs(gr,{children:[o.jsx(Fe,{value:"booked",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Zn,{className:"h-4 w-4 text-orange-600"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:"Booked"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Reserved but not paid"})]})]})}),o.jsx(Fe,{value:"assigned",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(on,{className:"h-4 w-4 text-blue-600"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:"Assigned (Paid)"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Paid and confirmed"})]})]})})]})]}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Choose "Booked" for reservations or "Assigned" for paid bookings'})]}),o.jsxs("div",{children:[o.jsxs(me,{htmlFor:"price",className:"text-sm font-medium text-gray-700",children:["Price (",Qe[a],") *"]}),o.jsxs("div",{className:"relative mt-1",children:[o.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm",children:Qe[a]}),o.jsx(Ne,{id:"price",type:"number",value:h,onChange:q=>m(q.target.value),onKeyDown:$,placeholder:"8.00",min:"0",step:"0.01",className:"pl-8"})]}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter the total price for this booking"})]}),w&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(yd,{className:"h-5 w-5 text-red-500 mr-2 mt-0.5 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-red-800",children:"Booking Conflict"}),o.jsx("p",{className:"text-sm text-red-700 mt-1 whitespace-pre-line",children:w})]})]})})]}),o.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[o.jsx(re,{variant:"outline",onClick:e,children:"Cancel"}),o.jsx(re,{onClick:j,disabled:!T||R,className:"bg-blue-600 hover:bg-blue-700",children:R?o.jsxs(o.Fragment,{children:[o.jsx(zt,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):o.jsxs(o.Fragment,{children:[o.jsx(mr,{className:"h-4 w-4 mr-2"}),"Book Desk"]})})]}),o.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Tip: Press Ctrl+Enter to save quickly"})]})})}var po="Checkbox",[X0]=an(po),[Z0,eb]=X0(po),eh=f.forwardRef((r,e)=>{const{__scopeCheckbox:t,name:s,checked:n,defaultChecked:a,required:i,disabled:l,value:c="on",onCheckedChange:d,form:u,...h}=r,[m,p]=f.useState(null),y=Ss(e,E=>p(E)),v=f.useRef(!1),g=m?u||!!m.closest("form"):!0,[x=!1,b]=Oi({prop:n,defaultProp:a,onChange:d}),w=f.useRef(x);return f.useEffect(()=>{const E=m==null?void 0:m.form;if(E){const R=()=>b(w.current);return E.addEventListener("reset",R),()=>E.removeEventListener("reset",R)}},[m,b]),o.jsxs(Z0,{scope:t,state:x,disabled:l,children:[o.jsx(st.button,{type:"button",role:"checkbox","aria-checked":fr(x)?"mixed":x,"aria-required":i,"data-state":sh(x),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:y,onKeyDown:Pe(r.onKeyDown,E=>{E.key==="Enter"&&E.preventDefault()}),onClick:Pe(r.onClick,E=>{b(R=>fr(R)?!0:!R),g&&(v.current=E.isPropagationStopped(),v.current||E.stopPropagation())})}),g&&o.jsx(tb,{control:m,bubbles:!v.current,name:s,value:c,checked:x,required:i,disabled:l,form:u,style:{transform:"translateX(-100%)"},defaultChecked:fr(a)?!1:a})]})});eh.displayName=po;var th="CheckboxIndicator",rh=f.forwardRef((r,e)=>{const{__scopeCheckbox:t,forceMount:s,...n}=r,a=eb(th,t);return o.jsx(Ai,{present:s||fr(a.state)||a.state===!0,children:o.jsx(st.span,{"data-state":sh(a.state),"data-disabled":a.disabled?"":void 0,...n,ref:e,style:{pointerEvents:"none",...r.style}})})});rh.displayName=th;var tb=r=>{const{control:e,checked:t,bubbles:s=!0,defaultChecked:n,...a}=r,i=f.useRef(null),l=Rc(t),c=Dc(e);f.useEffect(()=>{const u=i.current,h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==t&&p){const y=new Event("click",{bubbles:s});u.indeterminate=fr(t),p.call(u,fr(t)?!1:t),u.dispatchEvent(y)}},[l,t,s]);const d=f.useRef(fr(t)?!1:t);return o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n??d.current,...a,tabIndex:-1,ref:i,style:{...r.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function fr(r){return r==="indeterminate"}function sh(r){return fr(r)?"indeterminate":r?"checked":"unchecked"}var nh=eh,rb=rh;const go=f.forwardRef(({className:r,...e},t)=>o.jsx(nh,{ref:t,className:se("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...e,children:o.jsx(rb,{className:se("flex items-center justify-center text-current"),children:o.jsx(mr,{className:"h-4 w-4"})})}));go.displayName=nh.displayName;var ah={exports:{}};(function(r,e){(function(t,s){r.exports=s()})(Ke,function(){var t=1e3,s=6e4,n=36e5,a="millisecond",i="second",l="minute",c="hour",d="day",u="week",h="month",m="quarter",p="year",y="date",v="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,x=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(P){var I=["th","st","nd","rd"],O=P%100;return"["+P+(I[(O-20)%10]||I[O]||I[0])+"]"}},w=function(P,I,O){var U=String(P);return!U||U.length>=I?P:""+Array(I+1-U.length).join(O)+P},E={s:w,z:function(P){var I=-P.utcOffset(),O=Math.abs(I),U=Math.floor(O/60),M=O%60;return(I<=0?"+":"-")+w(U,2,"0")+":"+w(M,2,"0")},m:function P(I,O){if(I.date()<O.date())return-P(O,I);var U=12*(O.year()-I.year())+(O.month()-I.month()),M=I.clone().add(U,h),z=O-M<0,W=I.clone().add(U+(z?-1:1),h);return+(-(U+(O-M)/(z?M-W:W-M))||0)},a:function(P){return P<0?Math.ceil(P)||0:Math.floor(P)},p:function(P){return{M:h,y:p,w:u,d,D:y,h:c,m:l,s:i,ms:a,Q:m}[P]||String(P||"").toLowerCase().replace(/s$/,"")},u:function(P){return P===void 0}},R="en",D={};D[R]=b;var j="$isDayjsObject",$=function(P){return P instanceof T||!(!P||!P[j])},N=function P(I,O,U){var M;if(!I)return R;if(typeof I=="string"){var z=I.toLowerCase();D[z]&&(M=z),O&&(D[z]=O,M=z);var W=I.split("-");if(!M&&W.length>1)return P(W[0])}else{var G=I.name;D[G]=I,M=G}return!U&&M&&(R=M),M||!U&&R},A=function(P,I){if($(P))return P.clone();var O=typeof I=="object"?I:{};return O.date=P,O.args=arguments,new T(O)},F=E;F.l=N,F.i=$,F.w=function(P,I){return A(P,{locale:I.$L,utc:I.$u,x:I.$x,$offset:I.$offset})};var T=function(){function P(O){this.$L=N(O.locale,null,!0),this.parse(O),this.$x=this.$x||O.x||{},this[j]=!0}var I=P.prototype;return I.parse=function(O){this.$d=function(U){var M=U.date,z=U.utc;if(M===null)return new Date(NaN);if(F.u(M))return new Date;if(M instanceof Date)return new Date(M);if(typeof M=="string"&&!/Z$/i.test(M)){var W=M.match(g);if(W){var G=W[2]-1||0,ne=(W[7]||"0").substring(0,3);return z?new Date(Date.UTC(W[1],G,W[3]||1,W[4]||0,W[5]||0,W[6]||0,ne)):new Date(W[1],G,W[3]||1,W[4]||0,W[5]||0,W[6]||0,ne)}}return new Date(M)}(O),this.init()},I.init=function(){var O=this.$d;this.$y=O.getFullYear(),this.$M=O.getMonth(),this.$D=O.getDate(),this.$W=O.getDay(),this.$H=O.getHours(),this.$m=O.getMinutes(),this.$s=O.getSeconds(),this.$ms=O.getMilliseconds()},I.$utils=function(){return F},I.isValid=function(){return this.$d.toString()!==v},I.isSame=function(O,U){var M=A(O);return this.startOf(U)<=M&&M<=this.endOf(U)},I.isAfter=function(O,U){return A(O)<this.startOf(U)},I.isBefore=function(O,U){return this.endOf(U)<A(O)},I.$g=function(O,U,M){return F.u(O)?this[U]:this.set(M,O)},I.unix=function(){return Math.floor(this.valueOf()/1e3)},I.valueOf=function(){return this.$d.getTime()},I.startOf=function(O,U){var M=this,z=!!F.u(U)||U,W=F.p(O),G=function(Xe,Ae){var nt=F.w(M.$u?Date.UTC(M.$y,Ae,Xe):new Date(M.$y,Ae,Xe),M);return z?nt:nt.endOf(d)},ne=function(Xe,Ae){return F.w(M.toDate()[Xe].apply(M.toDate("s"),(z?[0,0,0,0]:[23,59,59,999]).slice(Ae)),M)},ue=this.$W,pe=this.$M,Y=this.$D,be="set"+(this.$u?"UTC":"");switch(W){case p:return z?G(1,0):G(31,11);case h:return z?G(1,pe):G(0,pe+1);case u:var De=this.$locale().weekStart||0,Re=(ue<De?ue+7:ue)-De;return G(z?Y-Re:Y+(6-Re),pe);case d:case y:return ne(be+"Hours",0);case c:return ne(be+"Minutes",1);case l:return ne(be+"Seconds",2);case i:return ne(be+"Milliseconds",3);default:return this.clone()}},I.endOf=function(O){return this.startOf(O,!1)},I.$set=function(O,U){var M,z=F.p(O),W="set"+(this.$u?"UTC":""),G=(M={},M[d]=W+"Date",M[y]=W+"Date",M[h]=W+"Month",M[p]=W+"FullYear",M[c]=W+"Hours",M[l]=W+"Minutes",M[i]=W+"Seconds",M[a]=W+"Milliseconds",M)[z],ne=z===d?this.$D+(U-this.$W):U;if(z===h||z===p){var ue=this.clone().set(y,1);ue.$d[G](ne),ue.init(),this.$d=ue.set(y,Math.min(this.$D,ue.daysInMonth())).$d}else G&&this.$d[G](ne);return this.init(),this},I.set=function(O,U){return this.clone().$set(O,U)},I.get=function(O){return this[F.p(O)]()},I.add=function(O,U){var M,z=this;O=Number(O);var W=F.p(U),G=function(pe){var Y=A(z);return F.w(Y.date(Y.date()+Math.round(pe*O)),z)};if(W===h)return this.set(h,this.$M+O);if(W===p)return this.set(p,this.$y+O);if(W===d)return G(1);if(W===u)return G(7);var ne=(M={},M[l]=s,M[c]=n,M[i]=t,M)[W]||1,ue=this.$d.getTime()+O*ne;return F.w(ue,this)},I.subtract=function(O,U){return this.add(-1*O,U)},I.format=function(O){var U=this,M=this.$locale();if(!this.isValid())return M.invalidDate||v;var z=O||"YYYY-MM-DDTHH:mm:ssZ",W=F.z(this),G=this.$H,ne=this.$m,ue=this.$M,pe=M.weekdays,Y=M.months,be=M.meridiem,De=function(Ae,nt,je,Me){return Ae&&(Ae[nt]||Ae(U,z))||je[nt].slice(0,Me)},Re=function(Ae){return F.s(G%12||12,Ae,"0")},Xe=be||function(Ae,nt,je){var Me=Ae<12?"AM":"PM";return je?Me.toLowerCase():Me};return z.replace(x,function(Ae,nt){return nt||function(je){switch(je){case"YY":return String(U.$y).slice(-2);case"YYYY":return F.s(U.$y,4,"0");case"M":return ue+1;case"MM":return F.s(ue+1,2,"0");case"MMM":return De(M.monthsShort,ue,Y,3);case"MMMM":return De(Y,ue);case"D":return U.$D;case"DD":return F.s(U.$D,2,"0");case"d":return String(U.$W);case"dd":return De(M.weekdaysMin,U.$W,pe,2);case"ddd":return De(M.weekdaysShort,U.$W,pe,3);case"dddd":return pe[U.$W];case"H":return String(G);case"HH":return F.s(G,2,"0");case"h":return Re(1);case"hh":return Re(2);case"a":return Xe(G,ne,!0);case"A":return Xe(G,ne,!1);case"m":return String(ne);case"mm":return F.s(ne,2,"0");case"s":return String(U.$s);case"ss":return F.s(U.$s,2,"0");case"SSS":return F.s(U.$ms,3,"0");case"Z":return W}return null}(Ae)||W.replace(":","")})},I.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},I.diff=function(O,U,M){var z,W=this,G=F.p(U),ne=A(O),ue=(ne.utcOffset()-this.utcOffset())*s,pe=this-ne,Y=function(){return F.m(W,ne)};switch(G){case p:z=Y()/12;break;case h:z=Y();break;case m:z=Y()/3;break;case u:z=(pe-ue)/6048e5;break;case d:z=(pe-ue)/864e5;break;case c:z=pe/n;break;case l:z=pe/s;break;case i:z=pe/t;break;default:z=pe}return M?z:F.a(z)},I.daysInMonth=function(){return this.endOf(h).$D},I.$locale=function(){return D[this.$L]},I.locale=function(O,U){if(!O)return this.$L;var M=this.clone(),z=N(O,U,!0);return z&&(M.$L=z),M},I.clone=function(){return F.w(this.$d,this)},I.toDate=function(){return new Date(this.valueOf())},I.toJSON=function(){return this.isValid()?this.toISOString():null},I.toISOString=function(){return this.$d.toISOString()},I.toString=function(){return this.$d.toUTCString()},P}(),q=T.prototype;return A.prototype=q,[["$ms",a],["$s",i],["$m",l],["$H",c],["$W",d],["$M",h],["$y",p],["$D",y]].forEach(function(P){q[P[1]]=function(I){return this.$g(I,P[0],P[1])}}),A.extend=function(P,I){return P.$i||(P(I,T,A),P.$i=!0),A},A.locale=N,A.isDayjs=$,A.unix=function(P){return A(1e3*P)},A.en=D[R],A.Ls=D,A.p={},A})})(ah);var sb=ah.exports;const Le=Gn(sb);var ih={exports:{}};(function(r,e){(function(t,s){r.exports=s()})(Ke,function(){var t="week",s="year";return function(n,a,i){var l=a.prototype;l.week=function(c){if(c===void 0&&(c=null),c!==null)return this.add(7*(c-this.week()),"day");var d=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var u=i(this).startOf(s).add(1,s).date(d),h=i(this).endOf(t);if(u.isBefore(h))return 1}var m=i(this).startOf(s).date(d).startOf(t).subtract(1,"millisecond"),p=this.diff(m,t,!0);return p<0?i(this).startOf("week").week():Math.ceil(p)},l.weeks=function(c){return c===void 0&&(c=null),this.week(c)}}})})(ih);var nb=ih.exports;const ab=Gn(nb);var oh={exports:{}};(function(r,e){(function(t,s){r.exports=s()})(Ke,function(){var t="day";return function(s,n,a){var i=function(d){return d.add(4-d.isoWeekday(),t)},l=n.prototype;l.isoWeekYear=function(){return i(this).year()},l.isoWeek=function(d){if(!this.$utils().u(d))return this.add(7*(d-this.isoWeek()),t);var u,h,m,p,y=i(this),v=(u=this.isoWeekYear(),h=this.$u,m=(h?a.utc:a)().year(u).startOf("year"),p=4-m.isoWeekday(),m.isoWeekday()>4&&(p+=7),m.add(p,t));return y.diff(v,"week")+1},l.isoWeekday=function(d){return this.$utils().u(d)?this.day()||7:this.day(this.day()%7?d:d-7)};var c=l.startOf;l.startOf=function(d,u){var h=this.$utils(),m=!!h.u(u)||u;return h.p(d)==="isoweek"?m?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):c.bind(this)(d,u)}}})})(oh);var ib=oh.exports;const ob=Gn(ib);var lh={exports:{}};(function(r,e){(function(t,s){r.exports=s()})(Ke,function(){return function(t,s){s.prototype.isSameOrBefore=function(n,a){return this.isSame(n,a)||this.isBefore(n,a)}}})})(lh);var lb=lh.exports;const cb=Gn(lb);Le.extend(ab);Le.extend(ob);Le.extend(cb);function ch(r=0){const t=Le().add(r,"week").startOf("isoWeek"),s=[];for(let n=0;n<7;n++){const a=t.add(n,"day");s.push({date:a,dayName:a.format("ddd"),fullDate:a.format("MMM D"),dateString:a.format("YYYY-MM-DD")})}return s}function dh(r=0){const e=Le().add(r,"month"),t=e.startOf("month"),s=e.endOf("month"),n=[];let a=t;for(;a.isSameOrBefore(s,"day");)n.push({date:a,dayName:a.format("ddd"),fullDate:a.format("MMM D"),dateString:a.format("YYYY-MM-DD"),isCurrentMonth:a.isSame(e,"month")}),a=a.add(1,"day");return n}function db(r=0){const e=ch(r),t=e[0],s=e[6];return t.date.month()===s.date.month()?`${t.date.format("MMMM D")}-${s.date.format("D, YYYY")}`:`${t.date.format("MMM D")} - ${s.date.format("MMM D, YYYY")}`}function ub(r=0){return Le().add(r,"month").format("MMMM YYYY")}function hb(r,e){const t=Le(r),s=Le(e);return t.isSame(s,"day")?t.format("MMM D, YYYY"):t.isSame(s,"month")?`${t.format("MMM D")}-${s.format("D, YYYY")}`:`${t.format("MMM D")} - ${s.format("MMM D, YYYY")}`}function Wa(r,e){const t=Le(r),s=Le(e),n=[];let a=t;for(;a.isBefore(s)||a.isSame(s,"day");)n.push(a.format("YYYY-MM-DD")),a=a.add(1,"day");return n}function fb({isOpen:r,onClose:e,onApply:t}){const[s,n]=f.useState(""),[a,i]=f.useState(""),[l,c]=f.useState([]),[d,u]=f.useState("available");f.useEffect(()=>{if(r){const g=Le().format("YYYY-MM-DD"),x=Le().add(7,"day").format("YYYY-MM-DD");n(g),i(x),c([]),u("available")}},[r]);const h=(g,x)=>{c(b=>x?[...b,g]:b.filter(w=>w!==g))},m=()=>{l.length===Lt.length?c([]):c(Lt.map(g=>g.id))},p=()=>{!s||!a||l.length===0||Le(s).isAfter(Le(a))||(t(s,a,l,d),e())},y=s&&a&&l.length>0&&(Le(s).isSame(Le(a))||Le(s).isBefore(Le(a))),v=s&&a?hb(s,a):"";return o.jsx(xr,{open:r,onOpenChange:e,children:o.jsxs(Wt,{className:"sm:max-w-lg",children:[o.jsx(Kt,{children:o.jsxs(Ht,{className:"flex items-center gap-2",children:[o.jsx(qi,{className:"h-5 w-5 text-blue-600"}),"Set Desk Availability Range"]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(me,{htmlFor:"startDate",className:"text-sm font-medium text-gray-700",children:"Start Date"}),o.jsx(Ne,{id:"startDate",type:"date",value:s,onChange:g=>n(g.target.value),className:"mt-1"})]}),o.jsxs("div",{children:[o.jsx(me,{htmlFor:"endDate",className:"text-sm font-medium text-gray-700",children:"End Date"}),o.jsx(Ne,{id:"endDate",type:"date",value:a,onChange:g=>i(g.target.value),min:s,className:"mt-1"})]})]}),v&&o.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 p-2 rounded",children:[o.jsx("strong",{children:"Date Range:"})," ",v]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs(me,{className:"text-sm font-medium text-gray-700",children:["Select Desks (",l.length," of ",Lt.length," selected)"]}),o.jsx(re,{type:"button",variant:"outline",size:"sm",onClick:m,children:l.length===Lt.length?"Deselect All":"Select All"})]}),o.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto border rounded p-2",children:Lt.map(g=>o.jsxs("label",{className:"flex items-center p-2 rounded border hover:bg-gray-50 cursor-pointer",children:[o.jsx(go,{checked:l.includes(g.id),onCheckedChange:x=>h(g.id,!!x),className:"mr-2"}),o.jsx("span",{className:"text-sm",children:g.label})]},g.id))})]}),o.jsxs("div",{children:[o.jsx(me,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Status"}),o.jsxs(zr,{value:d,onValueChange:g=>u(g),children:[o.jsx(pr,{children:o.jsx(qr,{})}),o.jsxs(gr,{children:[o.jsx(Fe,{value:"available",children:"Available"}),o.jsx(Fe,{value:"booked",children:"Booked"})]})]})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[o.jsx(re,{variant:"outline",onClick:e,children:"Cancel"}),o.jsx(re,{onClick:p,disabled:!y,className:"bg-blue-600 hover:bg-blue-700",children:"Apply"})]})]})})}function mb({isOpen:r,onClose:e}){return o.jsx(xr,{open:r,onOpenChange:e,children:o.jsxs(Wt,{className:"max-w-5xl w-[90vw] max-h-[90vh] p-4",children:[o.jsx(Kt,{className:"mb-4",children:o.jsx(Ht,{className:"text-lg font-semibold",children:"Coworking Space Floor Plan"})}),o.jsx("div",{className:"flex items-center justify-center overflow-auto",style:{height:"calc(90vh - 100px)"},children:o.jsx("img",{src:"/DeskPlanner/plan.jpeg",alt:"Coworking Space Floor Plan",className:"w-auto h-auto max-w-full max-h-full object-contain rounded-md shadow-lg",style:{minWidth:"400px",minHeight:"300px"}})})]})})}class Ka{constructor(){this.errors=[],this.supabaseStore=new zu}generateNumericId(e){var n,a;const t=e.split("-");let s=0;if(t.length>=5){const i=parseInt(t[2])||2025,l=parseInt(t[3])||1,c=parseInt(t[4])||1,d=parseInt((n=t[1])==null?void 0:n.replace("desk",""))||1,u=parseInt((a=t[0])==null?void 0:a.replace("room",""))||1;s=i*1e7+l*1e5+c*1e3+u*10+d}else{let i=0;for(let l=0;l<e.length;l++){const c=e.charCodeAt(l);i=(i<<5)-i+c,i=i&i}s=Math.abs(i)}return s%2147483647}convertBooking(e){const t=this.generateNumericId(e.id);return{...e,id:t.toString(),startDate:e.startDate||e.date,endDate:e.endDate||e.date,createdAt:e.createdAt||new Date().toISOString(),currency:e.currency||"EUR"}}exportFromLocalStorage(){let e=window.localStorage.getItem("coworking-bookings");e||(e=window.localStorage.getItem("deskBookings"));const t=e?JSON.parse(e):{},s=Object.values(t);console.log("Found bookings in localStorage:",s.length);const n=window.localStorage.getItem("coworking-waiting-list"),a=n?JSON.parse(n):[],i=window.localStorage.getItem("coworking-settings"),l=i?JSON.parse(i):null;return{bookings:s,waitingList:a,settings:l}}async migrate(e={}){const{clearLocalStorageAfter:t=!1,dryRun:s=!1}=e;try{if(!this.supabaseStore.isConfigured())throw new Error("Supabase is not configured. Please set VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY");const{bookings:n,waitingList:a,settings:i}=this.exportFromLocalStorage();if(console.log(`Found ${n.length} bookings to migrate`),console.log(`Found ${a.length} waiting list entries to migrate`),s)return console.log("DRY RUN - No data will be migrated"),console.log("Sample converted bookings:",n.slice(0,3).map(h=>this.convertBooking(h))),{success:!0,bookingsMigrated:n.length,waitingListMigrated:a.length,errors:[]};let l=0,c=0;for(const h of n)try{const m=this.convertBooking(h);await this.supabaseStore.saveBooking(m),l++,l%10===0&&console.log(`Progress: ${l}/${n.length} bookings migrated`)}catch(m){c++;const p=`Failed to migrate booking ${h.id}: ${m}`;this.errors.push(p),console.error("Individual booking migration error:",m,h)}console.log(`Migration complete: ${l} bookings migrated successfully, ${c} failed`),c>0&&this.errors.push(`${c} bookings failed to migrate`);let d=0;const u=Array.isArray(a)?a:[];for(const h of u)try{const m={...h,id:this.generateNumericId(h.id).toString()};await this.supabaseStore.saveWaitingListEntry(m),d++}catch(m){this.errors.push(`Failed to migrate waiting list entry ${h.id}: ${m}`),console.error("Waiting list migration error:",m)}if(d>0&&console.log(`Successfully migrated ${d} waiting list entries`),i)try{await this.supabaseStore.saveAppSettings(i),console.log("Successfully migrated app settings")}catch(h){this.errors.push(`Failed to migrate app settings: ${h}`),console.error("Settings migration error:",h)}return t&&this.errors.length===0&&(window.localStorage.removeItem("coworking-bookings"),window.localStorage.removeItem("deskBookings"),window.localStorage.removeItem("coworking-waiting-list"),window.localStorage.removeItem("coworking-settings"),console.log("Cleared localStorage after successful migration")),{success:this.errors.length===0,bookingsMigrated:l,waitingListMigrated:d,errors:this.errors}}catch(n){const a=n instanceof Error?n.message:String(n);return this.errors.push(a),{success:!1,bookingsMigrated:0,waitingListMigrated:0,errors:this.errors}}}createBackup(){const t={...this.exportFromLocalStorage(),backupDate:new Date().toISOString(),version:"1.0"};return JSON.stringify(t,null,2)}async verifyMigration(){let e=window.localStorage.getItem("coworking-bookings");e||(e=window.localStorage.getItem("deskBookings"));const t=e?JSON.parse(e):{},s=Object.values(t),n=await this.supabaseStore.getAllBookings(),a=Object.values(n);return{localStorageCount:s.length,supabaseCount:a.length,matched:s.length===a.length}}}const We=f.forwardRef(({className:r,...e},t)=>o.jsx("div",{ref:t,className:se("rounded-lg border bg-card text-card-foreground shadow-sm",r),...e}));We.displayName="Card";const Ft=f.forwardRef(({className:r,...e},t)=>o.jsx("div",{ref:t,className:se("flex flex-col space-y-1.5 p-6",r),...e}));Ft.displayName="CardHeader";const Ut=f.forwardRef(({className:r,...e},t)=>o.jsx("div",{ref:t,className:se("text-2xl font-semibold leading-none tracking-tight",r),...e}));Ut.displayName="CardTitle";const Lr=f.forwardRef(({className:r,...e},t)=>o.jsx("div",{ref:t,className:se("text-sm text-muted-foreground",r),...e}));Lr.displayName="CardDescription";const Je=f.forwardRef(({className:r,...e},t)=>o.jsx("div",{ref:t,className:se("p-6 pt-0",r),...e}));Je.displayName="CardContent";const pb=f.forwardRef(({className:r,...e},t)=>o.jsx("div",{ref:t,className:se("flex items-center p-6 pt-0",r),...e}));pb.displayName="CardFooter";const gb=Jn("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Di=f.forwardRef(({className:r,variant:e,...t},s)=>o.jsx("div",{ref:s,role:"alert",className:se(gb({variant:e}),r),...t}));Di.displayName="Alert";const Ti=f.forwardRef(({className:r,...e},t)=>o.jsx("h5",{ref:t,className:se("mb-1 font-medium leading-none tracking-tight",r),...e}));Ti.displayName="AlertTitle";const Pi=f.forwardRef(({className:r,...e},t)=>o.jsx("div",{ref:t,className:se("text-sm [&_p]:leading-relaxed",r),...e}));Pi.displayName="AlertDescription";var yo="Progress",vo=100,[yb]=an(yo),[vb,xb]=yb(yo),uh=f.forwardRef((r,e)=>{const{__scopeProgress:t,value:s=null,max:n,getValueLabel:a=bb,...i}=r;(n||n===0)&&!Vl(n)&&console.error(wb(`${n}`,"Progress"));const l=Vl(n)?n:vo;s!==null&&!Gl(s,l)&&console.error(kb(`${s}`,"Progress"));const c=Gl(s,l)?s:null,d=Vn(c)?a(c,l):void 0;return o.jsx(vb,{scope:t,value:c,max:l,children:o.jsx(st.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Vn(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":mh(c,l),"data-value":c??void 0,"data-max":l,...i,ref:e})})});uh.displayName=yo;var hh="ProgressIndicator",fh=f.forwardRef((r,e)=>{const{__scopeProgress:t,...s}=r,n=xb(hh,t);return o.jsx(st.div,{"data-state":mh(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...s,ref:e})});fh.displayName=hh;function bb(r,e){return`${Math.round(r/e*100)}%`}function mh(r,e){return r==null?"indeterminate":r===e?"complete":"loading"}function Vn(r){return typeof r=="number"}function Vl(r){return Vn(r)&&!isNaN(r)&&r>0}function Gl(r,e){return Vn(r)&&!isNaN(r)&&r<=e&&r>=0}function wb(r,e){return`Invalid prop \`max\` of value \`${r}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${vo}\`.`}function kb(r,e){return`Invalid prop \`value\` of value \`${r}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${vo} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var ph=uh,jb=fh;const xo=f.forwardRef(({className:r,value:e,...t},s)=>o.jsx(ph,{ref:s,className:se("relative h-4 w-full overflow-hidden rounded-full bg-secondary",r),...t,children:o.jsx(jb,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));xo.displayName=ph.displayName;function Sb(){const[r,e]=f.useState("idle"),[t,s]=f.useState(null),[n,a]=f.useState(!1),[i,l]=f.useState(0),[c,d]=f.useState(null),u=()=>{try{const y=new Ka().createBackup(),v=new Blob([y],{type:"application/json"}),g=URL.createObjectURL(v),x=document.createElement("a");x.href=g,x.download=`deskplanner-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(g)}catch(p){console.error("Backup failed:",p),alert("Failed to create backup")}},h=async()=>{try{e("running"),l(50);const y=await new Ka().migrate({dryRun:!0});l(100),s(y),e(y.success?"success":"error")}catch(p){console.error("Dry run failed:",p),e("error"),s({success:!1,bookingsMigrated:0,waitingListMigrated:0,errors:[p instanceof Error?p.message:"Unknown error"]})}},m=async()=>{try{e("running"),l(0);const p=new Ka;l(30);const y=await p.migrate({clearLocalStorageAfter:n,dryRun:!1});l(70);const v=await p.verifyMigration();d(v),l(100),s(y),e(y.success?"success":"error"),y.success&&n&&setTimeout(()=>{window.location.reload()},3e3)}catch(p){console.error("Migration failed:",p),e("error"),s({success:!1,bookingsMigrated:0,waitingListMigrated:0,errors:[p instanceof Error?p.message:"Unknown error"]})}};return o.jsxs(We,{className:"w-full max-w-2xl mx-auto",children:[o.jsxs(Ft,{children:[o.jsxs(Ut,{className:"flex items-center gap-2",children:[o.jsx(Em,{className:"h-5 w-5"}),"Data Migration Tool"]}),o.jsx(Lr,{children:"Migrate your data from localStorage to Supabase database"})]}),o.jsxs(Je,{className:"space-y-4",children:[!1,r==="running"&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(zt,{className:"h-4 w-4 animate-spin"}),o.jsx("span",{className:"text-sm",children:"Migration in progress..."})]}),o.jsx(xo,{value:i})]}),t&&r!=="running"&&o.jsxs(Di,{variant:t.success?"default":"destructive",children:[t.success?o.jsx(jm,{className:"h-4 w-4"}):o.jsx(yd,{className:"h-4 w-4"}),o.jsx(Ti,{children:t.success?"Migration Successful":"Migration Failed"}),o.jsx(Pi,{children:o.jsxs("div",{className:"space-y-1 mt-2",children:[o.jsxs("p",{children:["Bookings migrated: ",t.bookingsMigrated]}),o.jsxs("p",{children:["Waiting list entries migrated: ",t.waitingListMigrated]}),t.errors.length>0&&o.jsxs("div",{className:"mt-2",children:[o.jsx("p",{className:"font-semibold",children:"Errors:"}),o.jsx("ul",{className:"list-disc list-inside text-sm",children:t.errors.map((p,y)=>o.jsx("li",{children:p},y))})]})]})})]}),c&&o.jsxs(Di,{variant:c.matched?"default":"destructive",children:[o.jsx(Ti,{children:"Verification Result"}),o.jsxs(Pi,{children:[o.jsxs("p",{children:["LocalStorage records: ",c.localStorageCount]}),o.jsxs("p",{children:["Supabase records: ",c.supabaseCount]}),o.jsxs("p",{children:["Status: ",c.matched?" Counts match":" Counts do not match"]})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(go,{id:"clear-storage",checked:n,onCheckedChange:p=>a(p),disabled:r==="running"}),o.jsx("label",{htmlFor:"clear-storage",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Clear localStorage after successful migration"})]}),o.jsxs("div",{className:"flex gap-2 flex-wrap",children:[o.jsxs(re,{onClick:u,variant:"outline",disabled:r==="running",children:[o.jsx(xd,{className:"mr-2 h-4 w-4"}),"Backup Data"]}),o.jsx(re,{onClick:h,variant:"outline",disabled:r==="running"||!1,children:"Dry Run"}),o.jsxs(re,{onClick:m,disabled:r==="running"||!1,children:[o.jsx(Lm,{className:"mr-2 h-4 w-4"}),"Start Migration"]})]}),o.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[o.jsx("p",{children:" Create a backup before migrating your data"}),o.jsx("p",{children:' Use "Dry Run" to preview what will be migrated'}),o.jsx("p",{children:" The migration will convert string IDs to numeric IDs automatically"}),o.jsx("p",{children:" Existing data in Supabase will be updated if IDs match"})]})]})]})}function _b({isOpen:r,onClose:e}){return o.jsx(xr,{open:r,onOpenChange:e,children:o.jsxs(Wt,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[o.jsxs(Kt,{children:[o.jsx(Ht,{children:"Database Migration"}),o.jsx(Ku,{children:"Transfer your data from browser storage to Supabase cloud database"})]}),o.jsx(Sb,{})]})})}function Eb({onCurrencyChange:r}){const[e,t]=f.useState("EUR");f.useEffect(()=>{t(pn())},[]);const s=n=>{t(n),Xu(n),r==null||r(n)};return o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Currency:"}),o.jsxs(zr,{value:e,onValueChange:s,children:[o.jsx(pr,{className:"w-32",children:o.jsx(qr,{})}),o.jsx(gr,{children:mo.map(n=>o.jsx(Fe,{value:n,children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{children:Qe[n]}),o.jsx("span",{children:n})]})},n))})]})]})}function Nb({onCurrencyChange:r,onFloorPlan:e,onSetAvailability:t,onExport:s}){return o.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4",children:[o.jsx(Eb,{onCurrencyChange:r}),o.jsxs(re,{variant:"outline",size:"sm",onClick:e,children:[o.jsx(Cm,{className:"h-4 w-4 mr-1"}),"Floor Plan"]}),o.jsxs(re,{variant:"outline",size:"sm",onClick:t,children:[o.jsx(qi,{className:"h-4 w-4 mr-1"}),"Set Availability"]}),o.jsxs(re,{variant:"outline",size:"sm",onClick:s,children:[o.jsx(xd,{className:"h-4 w-4 mr-1"}),"Export"]})]})}function Cb({viewMode:r,setViewMode:e,rangeString:t,onPrev:s,onNext:n,onQuickBook:a,quickBookDisabled:i,quickBookLoading:l}){return o.jsx(We,{className:"mb-6",children:o.jsxs(Je,{className:"p-4",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0",children:[o.jsxs("div",{className:"flex items-center space-x-4 justify-center sm:justify-start",children:[o.jsx(re,{variant:"ghost",size:"sm",onClick:s,className:"p-2 rounded-full touch-manipulation",children:o.jsx(wm,{className:"h-5 w-5 text-gray-600"})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("h2",{className:"text-lg font-medium text-gray-900",children:t}),o.jsx("p",{className:"text-sm text-gray-500",children:r==="week"?"Week View":"Month View"})]}),o.jsx(re,{variant:"ghost",size:"sm",onClick:n,className:"p-2 rounded-full touch-manipulation",children:o.jsx(km,{className:"h-5 w-5 text-gray-600"})})]}),o.jsxs("div",{className:"flex items-center space-x-2 w-full sm:w-auto justify-center sm:justify-end",children:[o.jsx(re,{variant:r==="week"?"secondary":"ghost",size:"sm",onClick:()=>e("week"),className:`touch-manipulation ${r==="week"?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,children:"Week"}),o.jsx(re,{variant:r==="month"?"secondary":"ghost",size:"sm",onClick:()=>e("month"),className:`touch-manipulation ${r==="month"?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,children:"Month"})]})]}),o.jsx("div",{className:"sm:hidden mt-4",children:o.jsxs(re,{onClick:a,disabled:i||l,className:"w-full bg-green-600 hover:bg-green-700 text-white touch-manipulation",children:[o.jsx(Sm,{className:"h-4 w-4 mr-2"}),l?"Loading...":"Book Now"]})})]})})}function Rb(){return o.jsx(We,{className:"mb-6",children:o.jsxs(Je,{className:"p-4",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Status Legend"}),o.jsxs("div",{className:"flex flex-wrap gap-4",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-4 h-4 bg-green-600 rounded mr-2"}),o.jsx("span",{className:"text-sm text-gray-700",children:"Available"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-4 h-4 bg-orange-600 rounded mr-2"}),o.jsx("span",{className:"text-sm text-gray-700",children:"Booked"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-4 h-4 bg-blue-100 border-2 border-blue-400 rounded mr-2"}),o.jsx("span",{className:"text-sm text-gray-700",children:"Person Assigned"})]})]})]})})}const Yl={available:{className:"desk-available",Icon:vd,iconColor:"text-green-700",label:"Available"},booked:{className:"desk-booked",Icon:Zn,iconColor:"text-orange-700",label:"Booked"},assigned:{className:"desk-assigned",Icon:on,iconColor:"text-blue-600",label:"Assigned"}};function Db({booking:r,onClick:e,isWeekend:t}){const s=(r==null?void 0:r.status)||"available",n=s==="unavailable"?"available":s,a=Yl[n]||Yl.available,i=n==="booked"&&(r==null?void 0:r.personName),l=n==="assigned"&&(r==null?void 0:r.personName),c=i||l,d=a.Icon;return t&&!c?o.jsxs("div",{className:"desk-cell rounded-lg p-1 sm:p-2 min-h-[60px] sm:min-h-[80px] bg-gray-100 cursor-not-allowed flex flex-col items-center justify-center text-center",style:{pointerEvents:"none"},children:[o.jsx(Om,{className:"h-4 w-4 text-gray-400"}),o.jsx("div",{className:"text-xs font-medium mt-1 text-gray-400",children:"Weekend"})]}):o.jsxs("div",{className:se("desk-cell rounded-lg p-1 sm:p-2 min-h-[60px] sm:min-h-[80px] flex flex-col items-center justify-center text-center cursor-pointer select-none touch-manipulation",a.className,t&&"opacity-50 cursor-not-allowed","hover:shadow-md active:scale-95 transition-all duration-150"),onClick:u=>!t&&e(u),onContextMenu:u=>!t&&e(u),style:{pointerEvents:t?"none":"auto"},children:[o.jsx(d,{className:se("h-4 w-4",a.iconColor)}),c?o.jsxs("div",{className:"mt-1",children:[o.jsx("div",{className:se("text-xs font-semibold",a.iconColor),children:r==null?void 0:r.personName}),(r==null?void 0:r.title)&&o.jsx("div",{className:se("text-[10px] leading-tight mt-0.5",a.iconColor),children:r.title.length>20?`${r.title.slice(0,20)}...`:r.title}),(r==null?void 0:r.price)&&o.jsxs("div",{className:se("text-[10px] font-medium mt-0.5",a.iconColor),children:[Qe[r.currency||"EUR"],r.price]})]}):o.jsx("div",{className:se("text-xs font-medium mt-1",a.iconColor),children:a.label})]})}function Ql(r){const t=new Date().toISOString().split("T")[0];return r===t}function Jl(r){const t=new Date(r+"T00:00:00").getDay();return t===0||t===6}const gh=f.forwardRef(({desks:r,currentDates:e,bookings:t,onDeskClick:s},n)=>{const a=(i,l)=>{const c=`${i}-${l}`;return t[c]||null};return o.jsx(We,{className:"overflow-hidden",children:o.jsx("div",{ref:n,className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50 border-b border-gray-200 sticky top-0 z-10",children:o.jsxs("tr",{children:[o.jsxs("th",{className:"px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20 sm:w-32 sticky left-0 bg-gray-50 z-20",children:[o.jsx("span",{className:"hidden sm:inline",children:"Desk"}),o.jsx("span",{className:"sm:hidden",children:"D"})]}),e.map(i=>{const l=Ql(i.dateString),c=Jl(i.dateString);return o.jsx("th",{className:`px-2 sm:px-3 py-3 text-center text-xs font-medium uppercase tracking-wider min-w-[100px] sm:min-w-[120px] ${l?"bg-blue-50 text-blue-700 border-l-2 border-r-2 border-blue-300":c?"bg-gray-100 text-gray-400":"text-gray-500"}`,children:o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:`font-semibold ${l?"text-blue-900":c?"text-gray-400":"text-gray-900"}`,children:i.dayName}),o.jsx("span",{className:"text-xs",children:i.fullDate}),l&&o.jsx("span",{className:"text-xs font-medium text-blue-600 mt-1",children:"TODAY"}),c&&o.jsx("span",{className:"text-xs font-medium text-gray-400 mt-1",children:"WEEKEND"})]})},i.dateString)})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(i=>o.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[o.jsx("td",{className:"px-2 sm:px-4 py-3 whitespace-nowrap sticky left-0 bg-white z-10 border-r border-gray-200",children:o.jsxs("div",{className:"flex flex-col",children:[o.jsxs("span",{className:"text-xs sm:text-sm font-semibold text-gray-900",children:[o.jsx("span",{className:"sm:hidden",children:i.number}),o.jsxs("span",{className:"hidden sm:inline",children:["Desk ",i.number]})]}),o.jsxs("span",{className:`text-[10px] sm:text-xs ${i.room===1?"text-blue-600":"text-pink-600"}`,children:[o.jsxs("span",{className:"sm:hidden",children:["R",i.room]}),o.jsxs("span",{className:"hidden sm:inline",children:["Room ",i.room]})]})]})}),e.map(l=>{const c=Ql(l.dateString),d=Jl(l.dateString);return o.jsx("td",{className:`px-1 sm:px-2 py-2 sm:py-3 text-center ${c?"bg-blue-50 border-l-2 border-r-2 border-blue-300":d?"bg-gray-100":""}`,children:o.jsx(Db,{deskId:i.id,date:l.dateString,booking:a(i.id,l.dateString),onClick:u=>s(i.id,l.dateString,u),isWeekend:d})},l.dateString)})]},i.id))})]})})})});gh.displayName="DeskGrid";function Tb({nextAvailableDates:r,nextBookedDates:e,expiringAssignments:t}){return o.jsx(We,{className:"mt-6",children:o.jsxs(Je,{className:"p-4",children:[o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(bm,{className:"h-5 w-5 text-green-600 mr-2"}),o.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Next Available Dates"})]}),o.jsx("div",{className:"flex flex-wrap gap-3",children:r.length>0?r.map(s=>{const n=new Date(s+"T00:00:00"),a=n.toLocaleDateString("en-US",{weekday:"short"}),i=n.toLocaleDateString("en-US",{month:"short"}),l=n.getDate();return o.jsx("div",{className:"px-3 py-2 bg-green-50 border border-green-200 rounded-lg text-sm",children:o.jsxs("div",{className:"font-medium text-green-700",children:[a,", ",i," ",l]})},s)}):o.jsx("span",{className:"text-sm text-gray-500",children:"No available dates found in the next 90 days"})})]}),e.length>0&&o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(Zn,{className:"h-5 w-5 text-orange-600 mr-2"}),o.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Next Booked Dates"})]}),o.jsx("div",{className:"flex flex-wrap gap-3",children:e.map(({date:s,names:n})=>{const a=new Date(s+"T00:00:00"),i=a.toLocaleDateString("en-US",{weekday:"short"}),l=a.toLocaleDateString("en-US",{month:"short"}),c=a.getDate();return o.jsxs("div",{className:"px-3 py-2 bg-orange-50 border border-orange-200 rounded-lg text-sm",children:[o.jsxs("div",{className:"font-medium text-orange-700",children:[i,", ",l," ",c]}),o.jsx("div",{className:"text-xs text-orange-600 mt-1",children:n.join(", ")})]},s)})})]}),t.length>0&&o.jsxs("div",{className:"mt-4",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(xm,{className:"h-5 w-5 text-red-600 mr-2"}),o.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Assignments Expiring in Next 10 Days"})]}),o.jsx("div",{className:"flex flex-wrap gap-3",children:t.map(({date:s,personName:n,deskNumber:a},i)=>{const l=new Date(s+"T00:00:00"),c=l.toLocaleDateString("en-US",{weekday:"short"}),d=l.toLocaleDateString("en-US",{month:"short"}),u=l.getDate(),h=new Date().toISOString().split("T")[0]===s,m=new Date(Date.now()+864e5).toISOString().split("T")[0]===s;return o.jsxs("div",{className:"px-3 py-2 bg-red-50 border border-red-200 rounded-lg text-sm",children:[o.jsxs("div",{className:"font-medium text-red-700",children:[c,", ",d," ",u,h&&o.jsx("span",{className:"ml-1 text-xs",children:"(Today)"}),m&&o.jsx("span",{className:"ml-1 text-xs",children:"(Tomorrow)"})]}),o.jsxs("div",{className:"text-xs text-red-600 mt-1",children:[o.jsx("div",{children:n}),o.jsxs("div",{className:"font-medium",children:["Desk ",a]})]})]},`${s}-${a}-${i}`)})})]})]})})}function Pb({stats:r}){return o.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx(We,{children:o.jsx(Je,{className:"p-4",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(vd,{className:"h-6 w-6 text-green-600"})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Available"}),o.jsx("p",{className:"text-lg font-semibold text-green-600",children:r.available})]})]})})}),o.jsx(We,{children:o.jsx(Je,{className:"p-4",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(Zn,{className:"h-6 w-6 text-orange-600"})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Booked"}),o.jsx("p",{className:"text-lg font-semibold text-orange-600",children:r.booked})]})]})})}),o.jsx(We,{children:o.jsx(Je,{className:"p-4",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(on,{className:"h-6 w-6 text-blue-600"})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Assigned"}),o.jsx("p",{className:"text-lg font-semibold text-blue-600",children:r.assigned})]})]})})})]})}const Xl=[{id:"room1-desk1",room:1,number:1,label:"Room 1 - Desk 1"},{id:"room1-desk2",room:1,number:2,label:"Room 1 - Desk 2"},{id:"room1-desk3",room:1,number:3,label:"Room 1 - Desk 3"},{id:"room1-desk4",room:1,number:4,label:"Room 1 - Desk 4"},{id:"room2-desk1",room:2,number:1,label:"Room 2 - Desk 1"},{id:"room2-desk2",room:2,number:2,label:"Room 2 - Desk 2"},{id:"room2-desk3",room:2,number:3,label:"Room 2 - Desk 3"},{id:"room2-desk4",room:2,number:4,label:"Room 2 - Desk 4"}],Zl=r=>{const t=new Date(r+"T00:00:00").getDay();return t===0||t===6};async function Ob(){const r=new Date;r.setHours(0,0,0,0);const e=new Date(r);e.setDate(e.getDate()+1);const t=new Date(r);t.setDate(t.getDate()+30);const s=await de.getAllBookings(e.toISOString().split("T")[0],t.toISOString().split("T")[0]),n=new Map;Object.values(s).forEach(p=>{const y=`${p.deskId}-${p.date}`;n.set(y,p)});const a=[],i=new Map;let l=new Date(r);l.setDate(l.getDate()+1);const c=30;let d=0;for(;(a.length<5||i.size<3)&&d<c;){const p=l.toISOString().split("T")[0];if(!Zl(p)){let y=!1;const v=new Set;for(const g of Xl){const x=`${g.id}-${p}`,b=n.get(x);b?b.status==="available"?y=!0:b.status==="booked"&&b.personName&&v.add(b.personName):y=!0}y&&a.length<5&&a.push(p),v.size>0&&i.size<3&&i.set(p,v)}l.setDate(l.getDate()+1),d++}const u=Array.from(i.entries()).map(([p,y])=>({date:p,names:Array.from(y)})),h=[],m=[];for(let p=1;p<=10;p++){const y=new Date(r);y.setDate(y.getDate()+p),m.push(y.toISOString().split("T")[0])}for(const p of m)if(!Zl(p))for(const y of Xl){const v=`${y.id}-${p}`,g=n.get(v);g&&g.status==="assigned"&&g.personName&&g.endDate===p&&h.push({date:p,personName:g.personName,deskNumber:y.number})}return{available:a,booked:u,expiring:h}}function Ab(){return Nt({queryKey:["next-dates"],queryFn:Ob,staleTime:5*60*1e3,gcTime:10*60*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1,retry:1})}function Mb(){const r=vt(),e=f.useRef(null);f.useEffect(()=>{console.log("Setting up real-time subscription for desk_bookings");const t=Ye.channel("desk_bookings_changes").on("postgres_changes",{event:"*",schema:"public",table:"desk_bookings"},s=>{console.log("Real-time update received:",s),e.current&&clearTimeout(e.current),e.current=setTimeout(()=>{Promise.all([r.refetchQueries({queryKey:["desk-bookings"],type:"active"}),r.refetchQueries({queryKey:["desk-stats"],type:"active"}),r.refetchQueries({queryKey:["next-dates"],type:"active"})]).catch(n=>{console.error("Error refetching queries after real-time update:",n)})},500)}).subscribe(s=>{console.log("Real-time subscription status:",s)});return()=>{console.log("Cleaning up real-time subscription"),t.unsubscribe(),e.current&&clearTimeout(e.current)}},[r])}function Ib(r,e){const t=r&&e?`${r}_${e}`:"all";return Nt({queryKey:["desk-bookings",t],queryFn:async()=>de.getAllBookings(r,e),staleTime:2*60*1e3,gcTime:5*60*1e3,refetchOnWindowFocus:!1,retry:1})}function $b(r){const e=[...r].sort(),t=e.length>0?`${e[0]}_${e[e.length-1]}_${e.length}`:"empty";return Nt({queryKey:["desk-stats",t],queryFn:()=>de.getDeskStats(e),staleTime:5*60*1e3,gcTime:10*60*1e3,refetchOnWindowFocus:!1,retry:1,enabled:r.length>0})}function Lb(r,e){return Nt({queryKey:["expenses",r,e],queryFn:()=>{var t;return((t=de.getExpenses)==null?void 0:t.call(de,r,e))??Promise.resolve([])},staleTime:2*60*1e3,gcTime:10*60*1e3,refetchOnWindowFocus:!1,retry:1,enabled:!!r&&!!e})}function Fb(){return Nt({queryKey:["recurring-expenses"],queryFn:()=>{var r;return((r=de.getRecurringExpenses)==null?void 0:r.call(de))??Promise.resolve([])},staleTime:2*60*1e3,gcTime:10*60*1e3,refetchOnWindowFocus:!1,retry:1})}function Ub(){const r=vt();return Wr({mutationFn:e=>de.saveExpense?de.saveExpense(e):Promise.reject(new Error("saveExpense not implemented")),onSuccess:()=>{r.invalidateQueries({queryKey:["expenses"]}),r.invalidateQueries({queryKey:["monthly-stats"]}),r.invalidateQueries({queryKey:["date-range-stats"]})}})}function Bb(){const r=vt();return Wr({mutationFn:e=>de.deleteExpense?de.deleteExpense(e):Promise.reject(new Error("deleteExpense not implemented")),onSuccess:()=>{r.invalidateQueries({queryKey:["expenses"]}),r.invalidateQueries({queryKey:["monthly-stats"]}),r.invalidateQueries({queryKey:["date-range-stats"]})}})}function zb(){const r=vt();return Wr({mutationFn:e=>de.saveRecurringExpense?de.saveRecurringExpense(e):Promise.reject(new Error("saveRecurringExpense not implemented")),onSuccess:()=>{r.invalidateQueries({queryKey:["recurring-expenses"]})}})}function qb(){const r=vt();return Wr({mutationFn:e=>de.deleteRecurringExpense?de.deleteRecurringExpense(e):Promise.reject(new Error("deleteRecurringExpense not implemented")),onSuccess:()=>{r.invalidateQueries({queryKey:["recurring-expenses"]})}})}function Wb(){const r=vt();return Wr({mutationFn:({year:e,month:t})=>de.generateRecurringExpenses?de.generateRecurringExpenses(e,t):Promise.reject(new Error("generateRecurringExpenses not implemented")),onSuccess:()=>{r.invalidateQueries({queryKey:["expenses"]}),r.invalidateQueries({queryKey:["monthly-stats"]}),r.invalidateQueries({queryKey:["date-range-stats"]})}})}function Kb({isOpen:r,onClose:e,onSave:t}){const[s,n]=f.useState(""),[a,i]=f.useState(""),[l,c]=f.useState(""),[d,u]=f.useState(""),h=()=>{const p=s.trim(),y=a.trim();p&&y&&(t({name:p,preferredDates:y,contactInfo:l.trim()||void 0,notes:d.trim()||void 0}),n(""),i(""),c(""),u(""),e())},m=p=>{p.key==="Enter"&&(p.ctrlKey||p.metaKey)&&h()};return o.jsx(xr,{open:r,onOpenChange:e,children:o.jsxs(Wt,{className:"max-w-md",children:[o.jsx(Kt,{children:o.jsxs(Ht,{className:"flex items-center gap-2",children:[o.jsx(wd,{className:"h-5 w-5 text-blue-600"}),"Add to Waiting List"]})}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{children:[o.jsx(me,{htmlFor:"name",className:"text-sm font-medium text-gray-700",children:"Name *"}),o.jsx(Ne,{id:"name",value:s,onChange:p=>n(p.target.value),onKeyDown:m,placeholder:"Enter person's name",className:"mt-1",maxLength:50})]}),o.jsxs("div",{children:[o.jsx(me,{htmlFor:"dates",className:"text-sm font-medium text-gray-700",children:"Preferred Dates *"}),o.jsx(Ne,{id:"dates",value:a,onChange:p=>i(p.target.value),onKeyDown:m,placeholder:"e.g., Jan 15-20, Weekdays only, etc.",className:"mt-1"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter preferred dates or date ranges"})]}),o.jsxs("div",{children:[o.jsx(me,{htmlFor:"contact",className:"text-sm font-medium text-gray-700",children:"Contact Info"}),o.jsx(Ne,{id:"contact",value:l,onChange:p=>c(p.target.value),onKeyDown:m,placeholder:"Phone or email (optional)",className:"mt-1"})]}),o.jsxs("div",{children:[o.jsx(me,{htmlFor:"notes",className:"text-sm font-medium text-gray-700",children:"Notes"}),o.jsx(mn,{id:"notes",value:d,onChange:p=>u(p.target.value),placeholder:"Additional notes (optional)",className:"mt-1",rows:3})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[o.jsx(re,{variant:"outline",onClick:e,children:"Cancel"}),o.jsxs(re,{onClick:h,disabled:!s.trim()||!a.trim(),className:"bg-blue-600 hover:bg-blue-700",children:[o.jsx(zn,{className:"h-4 w-4 mr-2"}),"Add to List"]})]})]})})}function yh(){const[r,e]=f.useState([]),[t,s]=f.useState(!1),{toast:n}=Kr();f.useEffect(()=>{a()},[]);const a=async()=>{try{const d=de.getWaitingListEntries?await de.getWaitingListEntries():[];e(d)}catch(d){console.error("Error loading waiting list:",d),n({title:"Error",description:"Failed to load waiting list",variant:"destructive"})}},i=async d=>{try{const u={...d,id:Date.now().toString(),createdAt:new Date().toISOString()};de.saveWaitingListEntry&&await de.saveWaitingListEntry(u),await a(),n({title:"Added to Waiting List",description:`${d.name} has been added to the waiting list`})}catch{n({title:"Error",description:"Failed to add entry to waiting list",variant:"destructive"})}},l=async(d,u)=>{try{de.deleteWaitingListEntry&&await de.deleteWaitingListEntry(d),await a(),n({title:"Removed from Waiting List",description:`${u} has been removed from the waiting list`})}catch{n({title:"Error",description:"Failed to remove entry",variant:"destructive"})}},c=d=>new Date(d).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return o.jsxs(We,{children:[o.jsx(Ft,{children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs(Ut,{className:"flex items-center gap-2",children:[o.jsx(Yo,{className:"h-5 w-5 text-orange-600"}),"Waiting List"]}),o.jsxs(re,{onClick:()=>s(!0),size:"sm",className:"bg-orange-600 hover:bg-orange-700",children:[o.jsx(wd,{className:"h-4 w-4 mr-2"}),"Add Person"]})]})}),o.jsx(Je,{children:r.length===0?o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(Vi,{className:"h-10 w-10 mb-2 mx-auto text-gray-300"}),o.jsx("p",{children:"No one on the waiting list yet"}),o.jsx("p",{className:"text-sm",children:"Add people who are interested in booking desks"})]}):o.jsx("div",{className:"space-y-3",children:r.map(d=>o.jsx("div",{className:"border rounded-lg p-4 bg-gray-50",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(on,{className:"h-4 w-4 text-orange-600"}),o.jsx("h4",{className:"font-medium text-gray-900",children:d.name})]}),o.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(qi,{className:"h-3 w-3"}),o.jsx("span",{children:d.preferredDates})]}),d.contactInfo&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Nm,{className:"h-3 w-3"}),o.jsx("span",{children:d.contactInfo})]}),d.notes&&o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(Am,{className:"h-3 w-3 mt-0.5"}),o.jsx("span",{children:d.notes})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 mt-2",children:[o.jsx(Yo,{className:"h-3 w-3"}),o.jsxs("span",{children:["Added ",c(d.createdAt)]})]})]})]}),o.jsx(re,{variant:"ghost",size:"sm",onClick:()=>l(d.id,d.name),className:"text-red-600 hover:text-red-800 hover:bg-red-50",children:o.jsx(Hi,{className:"h-4 w-4"})})]})},d.id))})}),o.jsx(Kb,{isOpen:t,onClose:()=>s(!1),onSave:i})]})}function Hb(r,e){return Nt({queryKey:["monthly-stats",r,e],queryFn:()=>de.getMonthlyStats(r,e),staleTime:2*60*1e3,gcTime:10*60*1e3,refetchOnWindowFocus:!1,retry:1})}function Vb(r,e){return Nt({queryKey:["date-range-stats",r,e],queryFn:()=>de.getStatsForDateRange(r,e),staleTime:2*60*1e3,gcTime:10*60*1e3,refetchOnWindowFocus:!1,retry:1,enabled:!!r&&!!e})}function ec({className:r,...e}){return o.jsx("div",{className:se("animate-pulse rounded-md bg-muted",r),...e})}const Gb={rent:"Rent",supplies:"Supplies (coffee, tea, water, etc.)",internet:"Internet",bills:"Bills (electricity, water)",accountant:"Accountant"};function Yb({isOpen:r,onClose:e,expense:t}){const[s,n]=f.useState(""),[a,i]=f.useState(""),[l,c]=f.useState("supplies"),[d,u]=f.useState(""),[h,m]=f.useState("EUR"),[p,y]=f.useState(!1),{toast:v}=Kr(),g=Ub();f.useEffect(()=>{if(r)if(t)n(t.date),i(t.amount.toString()),c(t.category),u(t.description||""),m(t.currency);else{const E=new Date().toISOString().split("T")[0];n(E),i(""),c("supplies"),u(""),m(pn())}},[r,t]);const x=async()=>{const E=parseFloat(a);if(s&&E>=0)try{y(!0);const R={id:(t==null?void 0:t.id)||`expense-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,date:s,amount:E,currency:h,category:l,description:d.trim()||void 0,isRecurring:(t==null?void 0:t.isRecurring)||!1,recurringExpenseId:t==null?void 0:t.recurringExpenseId,createdAt:(t==null?void 0:t.createdAt)||new Date().toISOString()};await g.mutateAsync(R),v({title:t?"Expense Updated":"Expense Added",description:`${Gb[l]} - ${Qe[h]}${E.toFixed(2)}`}),e()}catch{v({title:"Error",description:"Failed to save expense",variant:"destructive"})}finally{y(!1)}},b=E=>{E.key==="Enter"&&E.ctrlKey?x():E.key==="Escape"&&e()},w=s&&a.trim()&&!isNaN(parseFloat(a))&&parseFloat(a)>=0;return o.jsx(xr,{open:r,onOpenChange:e,children:o.jsxs(Wt,{className:"sm:max-w-md",children:[o.jsx(Kt,{children:o.jsxs(Ht,{className:"flex items-center gap-2",children:[o.jsx(ui,{className:"h-5 w-5 text-red-600"}),t?"Edit Expense":"Add Expense"]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(me,{htmlFor:"expenseDate",className:"text-sm font-medium text-gray-700",children:"Date *"}),o.jsx(Ne,{id:"expenseDate",type:"date",value:s,onChange:E=>n(E.target.value),onKeyDown:b,className:"mt-1",required:!0})]}),o.jsxs("div",{children:[o.jsx(me,{htmlFor:"category",className:"text-sm font-medium text-gray-700",children:"Category *"}),o.jsxs(zr,{value:l,onValueChange:E=>c(E),children:[o.jsx(pr,{className:"mt-1",children:o.jsx(qr,{})}),o.jsxs(gr,{children:[o.jsx(Fe,{value:"rent",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ta,{className:"h-4 w-4 text-purple-600"}),o.jsx("span",{children:"Rent"})]})}),o.jsx(Fe,{value:"supplies",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ea,{className:"h-4 w-4 text-green-600"}),o.jsx("span",{children:"Supplies (coffee, tea, water, etc.)"})]})}),o.jsx(Fe,{value:"internet",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ra,{className:"h-4 w-4 text-blue-600"}),o.jsx("span",{children:"Internet"})]})}),o.jsx(Fe,{value:"bills",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(sa,{className:"h-4 w-4 text-yellow-600"}),o.jsx("span",{children:"Bills (electricity, water)"})]})}),o.jsx(Fe,{value:"accountant",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Xn,{className:"h-4 w-4 text-indigo-600"}),o.jsx("span",{children:"Accountant"})]})})]})]})]}),o.jsxs("div",{children:[o.jsxs(me,{htmlFor:"expenseAmount",className:"text-sm font-medium text-gray-700",children:["Amount (",Qe[h],") *"]}),o.jsxs("div",{className:"relative mt-1",children:[o.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm",children:Qe[h]}),o.jsx(Ne,{id:"expenseAmount",type:"number",value:a,onChange:E=>i(E.target.value),onKeyDown:b,placeholder:"0.00",min:"0",step:"0.01",className:"pl-8",autoFocus:!0})]})]}),o.jsxs("div",{children:[o.jsx(me,{htmlFor:"expenseDescription",className:"text-sm font-medium text-gray-700",children:"Description (Optional)"}),o.jsx(mn,{id:"expenseDescription",value:d,onChange:E=>u(E.target.value),onKeyDown:b,placeholder:"e.g., Monthly rent, Coffee beans and filters...",className:"mt-1 resize-none",rows:2})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[o.jsx(re,{variant:"outline",onClick:e,children:"Cancel"}),o.jsx(re,{onClick:x,disabled:!w||p,className:"bg-red-600 hover:bg-red-700",children:p?o.jsxs(o.Fragment,{children:[o.jsx(zt,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):o.jsxs(o.Fragment,{children:[o.jsx(mr,{className:"h-4 w-4 mr-2"}),t?"Update":"Add"," Expense"]})})]}),o.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Tip: Press Ctrl+Enter to save quickly"})]})})}var bo="Switch",[Qb]=an(bo),[Jb,Xb]=Qb(bo),vh=f.forwardRef((r,e)=>{const{__scopeSwitch:t,name:s,checked:n,defaultChecked:a,required:i,disabled:l,value:c="on",onCheckedChange:d,form:u,...h}=r,[m,p]=f.useState(null),y=Ss(e,w=>p(w)),v=f.useRef(!1),g=m?u||!!m.closest("form"):!0,[x=!1,b]=Oi({prop:n,defaultProp:a,onChange:d});return o.jsxs(Jb,{scope:t,checked:x,disabled:l,children:[o.jsx(st.button,{type:"button",role:"switch","aria-checked":x,"aria-required":i,"data-state":wh(x),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:y,onClick:Pe(r.onClick,w=>{b(E=>!E),g&&(v.current=w.isPropagationStopped(),v.current||w.stopPropagation())})}),g&&o.jsx(Zb,{control:m,bubbles:!v.current,name:s,value:c,checked:x,required:i,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});vh.displayName=bo;var xh="SwitchThumb",bh=f.forwardRef((r,e)=>{const{__scopeSwitch:t,...s}=r,n=Xb(xh,t);return o.jsx(st.span,{"data-state":wh(n.checked),"data-disabled":n.disabled?"":void 0,...s,ref:e})});bh.displayName=xh;var Zb=r=>{const{control:e,checked:t,bubbles:s=!0,...n}=r,a=f.useRef(null),i=Rc(t),l=Dc(e);return f.useEffect(()=>{const c=a.current,d=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(d,"checked").set;if(i!==t&&h){const m=new Event("click",{bubbles:s});h.call(c,t),c.dispatchEvent(m)}},[i,t,s]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...n,tabIndex:-1,ref:a,style:{...r.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function wh(r){return r?"checked":"unchecked"}var kh=vh,ew=bh;const jh=f.forwardRef(({className:r,...e},t)=>o.jsx(kh,{className:se("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...e,ref:t,children:o.jsx(ew,{className:se("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));jh.displayName=kh.displayName;const tc={rent:"Rent",supplies:"Supplies",internet:"Internet",bills:"Bills",accountant:"Accountant"},tw={rent:{Icon:ta,color:"text-purple-600"},supplies:{Icon:ea,color:"text-green-600"},internet:{Icon:ra,color:"text-blue-600"},bills:{Icon:sa,color:"text-yellow-600"},accountant:{Icon:Xn,color:"text-indigo-600"}};function rw({isOpen:r,onClose:e}){const[t,s]=f.useState(!1),[n,a]=f.useState(null),[i,l]=f.useState(""),[c,d]=f.useState("supplies"),[u,h]=f.useState(""),[m,p]=f.useState("1"),[y,v]=f.useState(!0),[g,x]=f.useState("EUR"),{toast:b}=Kr(),{data:w=[],isLoading:E}=Fb(),R=zb(),D=qb();f.useEffect(()=>{r&&!t&&j()},[r]);const j=()=>{s(!1),a(null),l(""),d("supplies"),h(""),p("1"),v(!0),x(pn())},$=T=>{s(!0),a(T.id),l(T.amount.toString()),d(T.category),h(T.description||""),p(T.dayOfMonth.toString()),v(T.isActive),x(T.currency)},N=async()=>{const T=parseFloat(i),q=parseInt(m);if(T>=0&&q>=1&&q<=28)try{const P={id:n||`recurring-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,amount:T,currency:g,category:c,description:u.trim()||void 0,dayOfMonth:q,isActive:y,createdAt:new Date().toISOString()};await R.mutateAsync(P),b({title:n?"Recurring Expense Updated":"Recurring Expense Added",description:`${tc[c]} - ${Qe[g]}${T.toFixed(2)}/month on day ${q}`}),j()}catch{b({title:"Error",description:"Failed to save recurring expense",variant:"destructive"})}},A=async T=>{try{await D.mutateAsync(T),b({title:"Recurring Expense Deleted",description:"The recurring expense has been removed"})}catch{b({title:"Error",description:"Failed to delete recurring expense",variant:"destructive"})}},F=i.trim()&&!isNaN(parseFloat(i))&&parseFloat(i)>=0&&m.trim()&&!isNaN(parseInt(m))&&parseInt(m)>=1&&parseInt(m)<=28;return o.jsx(xr,{open:r,onOpenChange:e,children:o.jsxs(Wt,{className:"sm:max-w-lg max-h-[90vh] overflow-y-auto",children:[o.jsx(Kt,{children:o.jsxs(Ht,{className:"flex items-center gap-2",children:[o.jsx(Tm,{className:"h-5 w-5 text-purple-600"}),"Manage Recurring Expenses"]})}),o.jsxs("div",{className:"space-y-6",children:[w.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx(me,{className:"text-sm font-medium text-gray-700",children:"Active Templates"}),o.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:w.map(T=>{const{Icon:q,color:P}=tw[T.category];return o.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${T.isActive?"bg-white border-gray-200":"bg-gray-50 border-gray-100"}`,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(q,{className:`h-5 w-5 ${P}`}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`font-medium ${T.isActive?"text-gray-900":"text-gray-500"}`,children:tc[T.category]}),!T.isActive&&o.jsx("span",{className:"text-xs bg-gray-200 text-gray-600 px-2 py-0.5 rounded",children:"Inactive"})]}),o.jsxs("div",{className:"text-sm text-gray-500",children:[Qe[T.currency],T.amount.toFixed(2)," on day ",T.dayOfMonth]}),T.description&&o.jsx("div",{className:"text-xs text-gray-400",children:T.description})]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(re,{variant:"ghost",size:"sm",onClick:()=>$(T),className:"h-8 w-8 p-0",children:o.jsx(di,{className:"h-4 w-4"})}),o.jsx(re,{variant:"ghost",size:"sm",onClick:()=>A(T.id),className:"h-8 w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",children:o.jsx(Hi,{className:"h-4 w-4"})})]})]},T.id)})})]}),o.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[t?o.jsx(di,{className:"h-4 w-4 text-purple-600"}):o.jsx(zn,{className:"h-4 w-4 text-purple-600"}),o.jsx(me,{className:"text-sm font-medium text-gray-700",children:t?"Edit Recurring Expense":"Add New Recurring Expense"})]}),o.jsxs("div",{children:[o.jsx(me,{htmlFor:"recurringCategory",className:"text-sm font-medium text-gray-700",children:"Category *"}),o.jsxs(zr,{value:c,onValueChange:T=>d(T),children:[o.jsx(pr,{className:"mt-1",children:o.jsx(qr,{})}),o.jsxs(gr,{children:[o.jsx(Fe,{value:"rent",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ta,{className:"h-4 w-4 text-purple-600"}),o.jsx("span",{children:"Rent"})]})}),o.jsx(Fe,{value:"supplies",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ea,{className:"h-4 w-4 text-green-600"}),o.jsx("span",{children:"Supplies"})]})}),o.jsx(Fe,{value:"internet",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ra,{className:"h-4 w-4 text-blue-600"}),o.jsx("span",{children:"Internet"})]})}),o.jsx(Fe,{value:"bills",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(sa,{className:"h-4 w-4 text-yellow-600"}),o.jsx("span",{children:"Bills"})]})}),o.jsx(Fe,{value:"accountant",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Xn,{className:"h-4 w-4 text-indigo-600"}),o.jsx("span",{children:"Accountant"})]})})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs(me,{htmlFor:"recurringAmount",className:"text-sm font-medium text-gray-700",children:["Amount (",Qe[g],") *"]}),o.jsxs("div",{className:"relative mt-1",children:[o.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm",children:Qe[g]}),o.jsx(Ne,{id:"recurringAmount",type:"number",value:i,onChange:T=>l(T.target.value),placeholder:"0.00",min:"0",step:"0.01",className:"pl-8"})]})]}),o.jsxs("div",{children:[o.jsx(me,{htmlFor:"dayOfMonth",className:"text-sm font-medium text-gray-700",children:"Day of Month *"}),o.jsx(Ne,{id:"dayOfMonth",type:"number",value:m,onChange:T=>p(T.target.value),placeholder:"1",min:"1",max:"28",className:"mt-1"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"1-28 only"})]})]}),o.jsxs("div",{children:[o.jsx(me,{htmlFor:"recurringDescription",className:"text-sm font-medium text-gray-700",children:"Description (Optional)"}),o.jsx(mn,{id:"recurringDescription",value:u,onChange:T=>h(T.target.value),placeholder:"e.g., Monthly office rent...",className:"mt-1 resize-none",rows:2})]}),o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(jh,{id:"isActive",checked:y,onCheckedChange:v}),o.jsx(me,{htmlFor:"isActive",className:"text-sm text-gray-700",children:"Active (auto-generate each month)"})]})}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[t&&o.jsx(re,{variant:"outline",onClick:j,children:"Cancel Edit"}),o.jsx(re,{onClick:N,disabled:!F||R.isPending,className:"bg-purple-600 hover:bg-purple-700",children:R.isPending?o.jsxs(o.Fragment,{children:[o.jsx(zt,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):o.jsxs(o.Fragment,{children:[t?o.jsx(mr,{className:"h-4 w-4 mr-2"}):o.jsx(zn,{className:"h-4 w-4 mr-2"}),t?"Update":"Add"," Template"]})})]})]})]}),o.jsx("div",{className:"flex justify-end mt-6 pt-4 border-t",children:o.jsx(re,{variant:"outline",onClick:e,children:"Close"})})]})})}const sw={rent:"Rent",supplies:"Supplies",internet:"Internet",bills:"Bills",accountant:"Accountant"},nw={rent:{Icon:ta,color:"text-purple-600"},supplies:{Icon:ea,color:"text-green-600"},internet:{Icon:ra,color:"text-blue-600"},bills:{Icon:sa,color:"text-yellow-600"},accountant:{Icon:Xn,color:"text-indigo-600"}};function Sh({viewMode:r,monthOffset:e=0,startDate:t,endDate:s}){const[n,a]=f.useState(!1),[i,l]=f.useState(!1),[c,d]=f.useState(null),[u,h]=f.useState(!1),{toast:m}=Kr(),p=Bb(),y=new Date;y.setMonth(y.getMonth()+e);const v=y.getFullYear(),g=y.getMonth(),x=`${v}-${String(g+1).padStart(2,"0")}-01`,b=new Date(v,g+1,0).toISOString().split("T")[0],w=Hb(v,g),E=Vb(t||"",s||""),R=r==="week"&&t||x,D=r==="week"&&s||b,{data:j=[],isLoading:$}=Lb(R,D),N=r==="week",{data:A,isLoading:F}=N?E:w,T=j.reduce((Y,be)=>Y+be.amount,0),q=((A==null?void 0:A.totalRevenue)||0)-T,P=100,I=N&&t&&s?(()=>{const Y=new Date(t),be=new Date(s);let De=0;const Re=new Date(Y);for(;Re<=be;){const Xe=Re.getDay();Xe!==0&&Xe!==6&&De++,Re.setDate(Re.getDate()+1)}return De/22*P})():P,O=q+I,U=N&&t&&s?`${new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`:y.toLocaleDateString("en-US",{month:"long",year:"numeric"}),M=A?Qe[A.currency]:"$",z=Y=>`${M}${Y.toFixed(2)}`,W=N?"Weekly Revenue & Occupancy":"Monthly Revenue & Occupancy",G=Y=>{d(Y),a(!0)},ne=async Y=>{try{await p.mutateAsync(Y),m({title:"Expense Deleted",description:"The expense has been removed"})}catch{m({title:"Error",description:"Failed to delete expense",variant:"destructive"})}},ue=()=>{a(!1),d(null)},pe=Y=>new Date(Y+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"});return o.jsxs(o.Fragment,{children:[o.jsxs(We,{className:"mt-6",children:[o.jsx(Ft,{className:"pb-3",children:o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[o.jsxs("div",{children:[o.jsx(Ut,{className:"text-lg font-semibold",children:W}),o.jsx("p",{className:"text-sm text-gray-500",children:U})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(re,{variant:"outline",size:"sm",onClick:()=>a(!0),className:"text-red-600 border-red-200 hover:bg-red-50 flex-1 sm:flex-none",children:[o.jsx(zn,{className:"h-4 w-4 sm:mr-1"}),o.jsx("span",{className:"hidden sm:inline",children:"Add Expense"}),o.jsx("span",{className:"sm:hidden",children:"Expense"})]}),o.jsxs(re,{variant:"outline",size:"sm",onClick:()=>l(!0),className:"text-purple-600 border-purple-200 hover:bg-purple-50 flex-1 sm:flex-none",children:[o.jsx(bd,{className:"h-4 w-4 sm:mr-1"}),o.jsx("span",{className:"hidden sm:inline",children:"Recurring"}),o.jsx("span",{className:"sm:hidden",children:"Recurring"})]})]})]})}),o.jsx(Je,{children:F?o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[...Array(5)].map((Y,be)=>o.jsx(ec,{className:"h-20"},be))}),o.jsx(ec,{className:"h-6"})]}):A?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2 sm:gap-4 mb-6",children:[o.jsxs("div",{className:`p-3 sm:p-4 rounded-lg border ${q>=0?"bg-green-50 border-green-100":"bg-red-50 border-red-100"}`,children:[o.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[q>=0?o.jsx(Im,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"}):o.jsx(Mm,{className:"h-4 w-4 sm:h-5 sm:w-5 text-red-600"}),o.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"Net Profit"})]}),o.jsx("div",{className:`text-lg sm:text-2xl font-bold mt-1 ${q>=0?"text-green-600":"text-red-600"}`,children:z(q)}),o.jsxs("div",{className:"text-xs text-gray-400",children:[z(O)," (if I paid)"]})]}),o.jsxs("div",{className:"p-3 sm:p-4 bg-yellow-50 rounded-lg border border-yellow-100",children:[o.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[o.jsx(vm,{className:"h-4 w-4 sm:h-5 sm:w-5 text-yellow-600"}),o.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"Revenue"})]}),o.jsx("div",{className:"text-lg sm:text-2xl font-bold text-yellow-600 mt-1",children:z(A.totalRevenue)})]}),o.jsxs("div",{className:"p-3 sm:p-4 bg-red-50 rounded-lg border border-red-100",children:[o.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[o.jsx(ui,{className:"h-4 w-4 sm:h-5 sm:w-5 text-red-600"}),o.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"Expenses"})]}),o.jsx("div",{className:"text-lg sm:text-2xl font-bold text-red-600 mt-1",children:z(T)}),o.jsxs("div",{className:"text-xs text-gray-400",children:[j.length," items"]})]}),o.jsxs("div",{className:"p-3 sm:p-4 bg-purple-50 rounded-lg border border-purple-100",children:[o.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[o.jsx(fd,{className:"h-4 w-4 sm:h-5 sm:w-5 text-purple-600"}),o.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"Occupancy"})]}),o.jsxs("div",{className:"text-lg sm:text-2xl font-bold text-purple-600 mt-1",children:[A.occupancyRate.toFixed(1),"%"]}),o.jsxs("div",{className:"text-xs text-gray-400",children:[A.occupiedDays,"/",A.totalDeskDays]})]}),o.jsxs("div",{className:"p-3 sm:p-4 bg-teal-50 rounded-lg border border-teal-100 col-span-2 md:col-span-1",children:[o.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[o.jsx(Wi,{className:"h-4 w-4 sm:h-5 sm:w-5 text-teal-600"}),o.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"Avg/Day"})]}),o.jsx("div",{className:"text-lg sm:text-2xl font-bold text-teal-600 mt-1",children:z(A.revenuePerOccupiedDay)})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[o.jsx("span",{className:"text-gray-600",children:"Occupancy Rate"}),o.jsxs("span",{className:"font-medium",children:[A.occupancyRate.toFixed(1),"%"]})]}),o.jsx(xo,{value:A.occupancyRate,className:"h-3"})]}),j.length>0&&o.jsxs("div",{className:"border rounded-lg",children:[o.jsxs("button",{className:"w-full flex items-center justify-between p-3 sm:p-4 hover:bg-gray-50 transition-colors",onClick:()=>h(!u),children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ui,{className:"h-4 w-4 sm:h-5 sm:w-5 text-red-600"}),o.jsx("span",{className:"font-medium text-gray-900 text-sm sm:text-base",children:"Expenses"}),o.jsxs("span",{className:"text-xs sm:text-sm text-gray-500",children:["(",j.length,")"]})]}),u?o.jsx(gd,{className:"h-5 w-5 text-gray-400"}):o.jsx(Ki,{className:"h-5 w-5 text-gray-400"})]}),u&&o.jsx("div",{className:"border-t divide-y",children:j.map(Y=>{const{Icon:be,color:De}=nw[Y.category];return o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 hover:bg-gray-50 gap-2",children:[o.jsxs("div",{className:"flex items-start sm:items-center gap-2 sm:gap-3",children:[o.jsx(be,{className:`h-4 w-4 sm:h-5 sm:w-5 ${De}`}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-1 sm:gap-2",children:[o.jsx("span",{className:"font-medium text-gray-900 text-sm",children:pe(Y.date)}),o.jsx("span",{className:"text-gray-600 text-sm",children:sw[Y.category]}),Y.isRecurring&&o.jsx("span",{className:"text-xs bg-purple-100 text-purple-600 px-1.5 py-0.5 rounded",children:"Auto"})]}),Y.description&&o.jsx("div",{className:"text-xs sm:text-sm text-gray-500 truncate",children:Y.description})]})]}),o.jsxs("div",{className:"flex items-center justify-between sm:justify-end gap-2 pl-6 sm:pl-0",children:[o.jsxs("span",{className:"font-bold text-red-600 text-sm sm:text-base",children:[M,Y.amount.toFixed(2)]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(re,{variant:"ghost",size:"sm",onClick:()=>G(Y),className:"h-7 w-7 sm:h-8 sm:w-8 p-0",children:o.jsx(di,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})}),o.jsx(re,{variant:"ghost",size:"sm",onClick:()=>ne(Y.id),className:"h-7 w-7 sm:h-8 sm:w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",children:o.jsx(Hi,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})]})]})]},Y.id)})})]})]}):o.jsxs("div",{className:"text-center text-gray-500 py-8",children:["No data available for this ",N?"week":"month"]})})]}),o.jsx(Yb,{isOpen:n,onClose:ue,expense:c}),o.jsx(rw,{isOpen:i,onClose:()=>l(!1)})]})}function aw(r){const t=new Date(r+"T00:00:00").getDay();return t===0||t===6}function rc(r){r.invalidateQueries({queryKey:["desk-bookings"]}),r.invalidateQueries({queryKey:["desk-stats"]}),r.invalidateQueries({queryKey:["next-dates"]})}async function sc(r){}function iw(r,e,t,s,n,a){const{toast:i}=Kr(),l=vt(),c=f.useCallback(async(y,v,g)=>{if(aw(v))return;const x=await de.getBooking(y,v);if(g!=null&&g.ctrlKey||(g==null?void 0:g.button)===2){g==null||g.preventDefault();const b=(x==null?void 0:x.status)||"available",w=["available","booked"],R=(w.indexOf(b)+1)%w.length,D=w[R];if(D==="available")await de.deleteBooking(y,v);else{const j={id:`${y}-${v}`,deskId:y,date:v,startDate:v,endDate:v,status:D,personName:x==null?void 0:x.personName,title:x==null?void 0:x.title,price:x==null?void 0:x.price,currency:(x==null?void 0:x.currency)||r||"EUR",createdAt:(x==null?void 0:x.createdAt)||new Date().toISOString()};await de.saveBooking(j)}rc(l),i({title:"Desk Status Updated",description:`Desk status set to ${D}`});return}(x==null?void 0:x.status)==="booked"||(x==null?void 0:x.status)==="assigned"?(t({booking:x,deskId:y,date:v}),s(!0)):((x==null?void 0:x.status)==="available"||!x)&&(t({booking:null,deskId:y,date:v}),s(!0))},[i,r,l,t,s]),d=f.useCallback(async y=>{if(!e)return;const{deskId:v,booking:g}=e,x=Wa(y.startDate,y.endDate);let b=[];g&&(b=Wa(g.startDate,g.endDate));const w=[];for(const N of x){if(g&&b.includes(N))continue;const A=await de.getBooking(v,N);if(A&&A.status!=="available"){const T=new Date(N+"T00:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"});A.personName?w.push(`${T}: ${A.personName} (${A.status})`):w.push(`${T}: Desk is ${A.status}`)}}if(w.length>0)throw new Error(`Cannot create booking due to conflicts on the following dates:

${w.join(`
`)}

Please choose different dates or select available time slots.`);if(g&&b.length>0){const N=b.filter(A=>!x.includes(A));for(const A of N)await de.deleteBooking(v,A)}const E=x.map(N=>({id:`${v}-${N}`,deskId:v,date:N,startDate:y.startDate,endDate:y.endDate,status:y.status,personName:y.personName,title:y.title,price:y.price,currency:y.currency||r,createdAt:g&&b.includes(N)?g.createdAt:new Date().toISOString()}));await de.bulkUpdateBookings(E),await sc();const R=y.status==="assigned"?"assigned (paid)":"booked",D=x.length,j=Qe[y.currency];i({title:g!==null?"Desk Booking Updated":"Desk Booking Created",description:`${y.personName} ${R} for ${D} day${D>1?"s":""} - ${j}${y.price} total`})},[e,i,l,r]),u=f.useCallback(async y=>{var b,w,E,R,D,j;if(!e)return;const{deskId:v,date:g}=e,x={id:`${v}-${g}`,deskId:v,date:g,startDate:((b=e.booking)==null?void 0:b.startDate)||g,endDate:((w=e.booking)==null?void 0:w.endDate)||g,status:"assigned",personName:y,title:(E=e.booking)==null?void 0:E.title,price:(R=e.booking)==null?void 0:R.price,currency:((D=e.booking)==null?void 0:D.currency)||r||"EUR",createdAt:((j=e.booking)==null?void 0:j.createdAt)||new Date().toISOString()};await de.saveBooking(x),t(null),rc(l),i({title:"Person Assigned",description:`${y} assigned to desk`})},[e,i,r,l,t]),h=f.useCallback(async(y,v,g,x)=>{const b=Wa(y,v),w=[],E=[];for(const R of g)for(const D of b)x==="available"?E.push({deskId:R,date:D}):w.push({id:`${R}-${D}`,deskId:R,date:D,startDate:D,endDate:D,status:x,personName:void 0,title:void 0,price:void 0,currency:r||"EUR",createdAt:new Date().toISOString()});await Promise.all([E.length>0?de.bulkDeleteBookings?de.bulkDeleteBookings(E):Promise.all(E.map(({deskId:R,date:D})=>de.deleteBooking(R,D).catch(j=>console.error(`Failed to delete booking ${R}-${D}:`,j)))):Promise.resolve(),w.length>0?de.bulkUpdateBookings(w):Promise.resolve()]),await sc(),i({title:"Bulk Update Applied",description:`${g.length} desks updated for ${b.length} days`})},[i,r,l]),m=f.useCallback(async()=>{try{const y=await de.getAllBookings(),v={bookings:y,exportDate:new Date().toISOString(),version:"1.0",totalBookings:Object.keys(y).length},g=JSON.stringify(v,null,2),x=new Blob([g],{type:"application/json"}),b=URL.createObjectURL(x),w=document.createElement("a");w.href=b,w.download=`desk-bookings-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(b),i({title:"Data Exported",description:`Successfully exported ${Object.keys(y).length} bookings`})}catch(y){console.error("Export error:",y),i({title:"Export Failed",description:"Failed to export data",variant:"destructive"})}},[i]),p=f.useCallback(async()=>{if(n.length===0){i({title:"No Availability",description:"No available desks found in the next 30 days",variant:"destructive"});return}const y=n[0];for(const v of a){const g=await de.getBooking(v.id,y);if(!g||g.status==="available"){t({booking:null,deskId:v.id,date:y}),s(!0);return}}i({title:"No Available Desk",description:"Could not find an available desk",variant:"destructive"})},[n,i,t,s]);return{handleDeskClick:c,handleBookingSave:d,handlePersonSave:u,handleBulkAvailability:h,handleExport:m,handleQuickBook:p}}function ow(){var nt,je;const{legacyDesks:r,currentOrg:e}=Ts(),t=r.length>0?r:Lt,[s,n]=f.useState("month"),[a,i]=f.useState(0),[l,c]=f.useState(0),[d,u]=f.useState(null),[h,m]=f.useState((e==null?void 0:e.currency)||"EUR"),[p,y]=f.useState(!1),[v,g]=f.useState(!1),[x,b]=f.useState(!1),[w,E]=f.useState(!1),[R,D]=f.useState(!1),j=f.useRef(null),$=f.useMemo(()=>ch(a),[a]),N=f.useMemo(()=>dh(l),[l]),A=f.useMemo(()=>db(a),[a]),F=f.useMemo(()=>ub(l),[l]),T=f.useMemo(()=>s==="week"?$:N,[s,$,N]),q=f.useMemo(()=>T.map(Me=>Me.dateString),[T]),P=f.useMemo(()=>q.length>0?q[0]:void 0,[q]),I=f.useMemo(()=>q.length>0?q[q.length-1]:void 0,[q]),{data:O={}}=Ib(P,I),{data:U={available:0,assigned:0,booked:0}}=$b(q),{data:M,isLoading:z}=Ab();Mb();const W=Wb();f.useEffect(()=>{const Me=new Date;W.mutate({year:Me.getFullYear(),month:Me.getMonth()},{onSuccess:Vt=>{Vt.length>0&&console.log(`Auto-generated ${Vt.length} recurring expense(s)`)}})},[]);const G=(M==null?void 0:M.available)||[],ne=(M==null?void 0:M.booked)||[],ue=(M==null?void 0:M.expiring)||[];f.useEffect(()=>{e!=null&&e.currency?m(e.currency):m(pn())},[e==null?void 0:e.currency]),f.useEffect(()=>{if(s==="month"&&l===0&&j.current){const Me=Gr=>Gr===new Date().toISOString().split("T")[0],Vt=T.findIndex(Gr=>Me(Gr.dateString));Vt>=0&&setTimeout(()=>{j.current&&(j.current.scrollLeft=Math.max(0,Vt*120-32))},100)}},[s,l,T]);const{handleDeskClick:pe,handleBookingSave:Y,handlePersonSave:be,handleBulkAvailability:De,handleExport:Re,handleQuickBook:Xe}=iw(h,d,u,g,G,t),Ae=s==="week"?A:F;return o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsx(Nb,{onCurrencyChange:m,onFloorPlan:()=>E(!0),onSetAvailability:()=>b(!0),onExport:Re,onMigrate:()=>D(!0)}),o.jsxs("div",{children:[o.jsx(Cb,{viewMode:s,setViewMode:n,rangeString:Ae,onPrev:()=>{s==="week"?i(a-1):c(l-1)},onNext:()=>{s==="week"?i(a+1):c(l+1)},onQuickBook:Xe,quickBookDisabled:G.length===0,quickBookLoading:z}),o.jsx(Rb,{}),o.jsx(gh,{ref:j,desks:t,currentDates:T,bookings:O,onDeskClick:pe}),o.jsx(Tb,{nextAvailableDates:G,nextBookedDates:ne,expiringAssignments:ue}),o.jsx("div",{className:"mt-6",children:o.jsx(yh,{})}),o.jsx(Pb,{stats:U}),o.jsx(Sh,{viewMode:s,monthOffset:l,startDate:(nt=T[0])==null?void 0:nt.dateString,endDate:(je=T[T.length-1])==null?void 0:je.dateString})]}),o.jsx(J0,{isOpen:v,onClose:()=>{g(!1),u(null)},booking:(d==null?void 0:d.booking)||null,deskId:(d==null?void 0:d.deskId)||"",date:(d==null?void 0:d.date)||"",currency:h,onSave:Y}),o.jsx(G0,{isOpen:p,onClose:()=>{y(!1),u(null)},booking:(d==null?void 0:d.booking)||null,deskId:(d==null?void 0:d.deskId)||"",date:(d==null?void 0:d.date)||"",onSave:be}),o.jsx(fb,{isOpen:x,onClose:()=>b(!1),onApply:De}),o.jsx(mb,{isOpen:w,onClose:()=>E(!1)}),o.jsx(_b,{isOpen:R,onClose:()=>D(!1)})]})}function lw(r){return r.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").slice(0,48)}const nc=["Space Info","Rooms & Desks","Currency"];function cw(){const r=ca(),e=A0(),t=M0(),{hasOrganization:s}=Ts();f.useEffect(()=>{s&&r("/app/calendar",{replace:!0})},[s,r]);const[n,a]=f.useState(0),[i,l]=f.useState(""),[c,d]=f.useState(""),[u,h]=f.useState(!1),[m,p]=f.useState(null),[y,v]=f.useState(2),[g,x]=f.useState(4),[b,w]=f.useState(["Room 1","Room 2"]),[E,R]=f.useState("EUR");f.useEffect(()=>{!u&&i&&d(lw(i))},[i,u]),f.useEffect(()=>{if(!c){p(null);return}const N=setTimeout(()=>{t.mutate(c,{onSuccess:A=>p(A),onError:()=>p(null)})},500);return()=>clearTimeout(N)},[c]),f.useEffect(()=>{w(N=>{const A=[...N];for(;A.length<y;)A.push(`Room ${A.length+1}`);return A.slice(0,y)})},[y]);const D=async()=>{try{await e.mutateAsync({name:i,slug:c,roomsCount:y,desksPerRoom:g,currency:E,roomNames:b}),r("/app/calendar",{replace:!0})}catch(N){console.error("Failed to create organization:",N)}},j=i.trim().length>0&&c.length>0&&m===!0,$=y>0&&g>0&&b.every(N=>N.trim().length>0);return o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"w-full max-w-lg",children:[o.jsx("div",{className:"flex items-center justify-center mb-8 gap-2",children:nc.map((N,A)=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${A<n||A===n?"bg-blue-600 text-white":"bg-gray-200 text-gray-500"}`,children:A<n?o.jsx(mr,{className:"w-4 h-4"}):A+1}),o.jsx("span",{className:`text-sm hidden sm:inline ${A===n?"text-blue-600 font-medium":"text-gray-500"}`,children:N}),A<nc.length-1&&o.jsx("div",{className:"w-8 h-px bg-gray-300"})]},N))}),n===0&&o.jsxs(We,{children:[o.jsxs(Ft,{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(md,{className:"h-5 w-5 text-blue-600"}),o.jsx(Ut,{children:"Name your coworking space"})]}),o.jsx(Lr,{children:"This will be visible to your team members."})]}),o.jsxs(Je,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(me,{htmlFor:"name",children:"Space Name"}),o.jsx(Ne,{id:"name",value:i,onChange:N=>l(N.target.value),placeholder:"e.g. Downtown Hub",autoFocus:!0})]}),o.jsxs("div",{children:[o.jsx(me,{htmlFor:"slug",children:"URL Slug"}),o.jsx(Ne,{id:"slug",value:c,onChange:N=>{d(N.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"")),h(!0)},placeholder:"downtown-hub"}),c&&m===!0&&o.jsx("p",{className:"text-sm text-green-600 mt-1",children:"Slug is available"}),c&&m===!1&&o.jsx("p",{className:"text-sm text-red-600 mt-1",children:"Slug is already taken"})]}),o.jsxs(re,{className:"w-full",onClick:()=>a(1),disabled:!j,children:["Next ",o.jsx(ci,{className:"ml-2 h-4 w-4"})]})]})]}),n===1&&o.jsxs(We,{children:[o.jsxs(Ft,{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(Br,{className:"h-5 w-5 text-blue-600"}),o.jsx(Ut,{children:"Set up rooms & desks"})]}),o.jsx(Lr,{children:"Configure how many rooms and desks you have."})]}),o.jsxs(Je,{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(me,{children:"Number of Rooms"}),o.jsxs(zr,{value:String(y),onValueChange:N=>v(Number(N)),children:[o.jsx(pr,{children:o.jsx(qr,{})}),o.jsx(gr,{children:[1,2,3,4,5,6,7,8].map(N=>o.jsx(Fe,{value:String(N),children:N},N))})]})]}),o.jsxs("div",{children:[o.jsx(me,{children:"Desks per Room"}),o.jsxs(zr,{value:String(g),onValueChange:N=>x(Number(N)),children:[o.jsx(pr,{children:o.jsx(qr,{})}),o.jsx(gr,{children:[1,2,3,4,5,6,7,8,10,12].map(N=>o.jsx(Fe,{value:String(N),children:N},N))})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(me,{children:"Room Names"}),b.map((N,A)=>o.jsx(Ne,{value:N,onChange:F=>{const T=[...b];T[A]=F.target.value,w(T)},placeholder:`Room ${A+1}`},A))]}),o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:o.jsxs("p",{className:"text-sm text-blue-700 font-medium",children:["Preview: ",y," room",y>1?"s":""," x ",g," desks = ",y*g," total desks"]})}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(re,{variant:"outline",onClick:()=>a(0),children:[o.jsx(Go,{className:"mr-2 h-4 w-4"})," Back"]}),o.jsxs(re,{className:"flex-1",onClick:()=>a(2),disabled:!$,children:["Next ",o.jsx(ci,{className:"ml-2 h-4 w-4"})]})]})]})]}),n===2&&o.jsxs(We,{children:[o.jsxs(Ft,{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(_m,{className:"h-5 w-5 text-blue-600"}),o.jsx(Ut,{children:"Choose your currency"})]}),o.jsx(Lr,{children:"This will be used for all pricing and revenue tracking."})]}),o.jsxs(Je,{className:"space-y-4",children:[o.jsx("div",{className:"grid grid-cols-2 gap-3",children:mo.map(N=>o.jsxs("button",{onClick:()=>R(N),className:`p-4 rounded-lg border-2 text-left transition-colors ${E===N?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[o.jsx("div",{className:"text-2xl mb-1",children:Qe[N]}),o.jsx("div",{className:"font-medium text-sm",children:N}),o.jsx("div",{className:"text-xs text-gray-500",children:Zu[N]})]},N))}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(re,{variant:"outline",onClick:()=>a(1),children:[o.jsx(Go,{className:"mr-2 h-4 w-4"})," Back"]}),o.jsx(re,{className:"flex-1",onClick:D,disabled:e.isPending,children:e.isPending?o.jsxs(o.Fragment,{children:[o.jsx(zt,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):o.jsxs(o.Fragment,{children:["Create Space ",o.jsx(mr,{className:"ml-2 h-4 w-4"})]})})]}),e.isError&&o.jsx("p",{className:"text-sm text-red-600 mt-2",children:"Failed to create organization. Please try again."})]})]})]})})}const ac=[{to:"/app/calendar",label:"Calendar",icon:pd},{to:"/app/revenue",label:"Revenue",icon:Wi},{to:"/app/waiting-list",label:"Waiting List",icon:Vi},{to:"/app/settings",label:"Settings",icon:bd}];function dw(){var l;const{user:r,signOut:e}=Ds(),{currentOrg:t}=Ts(),s=ca(),[n,a]=f.useState(!1),i=async()=>{await e(),s("/login")};return o.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[o.jsxs("aside",{className:"hidden lg:flex lg:flex-col w-64 bg-white border-r",children:[o.jsxs("div",{className:"p-4 border-b",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Br,{className:"h-6 w-6 text-blue-600"}),o.jsx("span",{className:"font-bold text-lg",children:"DeskPlanner"})]}),t&&o.jsx("p",{className:"text-sm text-gray-500 mt-1 truncate",children:t.name})]}),o.jsx("nav",{className:"flex-1 p-3 space-y-1",children:ac.map(c=>o.jsxs(vi,{to:c.to,className:({isActive:d})=>`flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors ${d?"bg-blue-50 text-blue-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[o.jsx(c.icon,{className:"h-5 w-5"}),c.label]},c.to))}),o.jsxs("div",{className:"p-3 border-t",children:[o.jsxs("div",{className:"px-3 py-2 mb-2",children:[o.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:((l=r==null?void 0:r.user_metadata)==null?void 0:l.full_name)||(r==null?void 0:r.email)}),o.jsx("p",{className:"text-xs text-gray-500 truncate",children:r==null?void 0:r.email})]}),o.jsxs("button",{onClick:i,className:"flex items-center gap-3 w-full px-3 py-2.5 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100 hover:text-gray-900 transition-colors",children:[o.jsx(Qo,{className:"h-5 w-5"}),"Sign Out"]})]})]}),o.jsxs("div",{className:"lg:hidden fixed top-0 left-0 right-0 z-50 bg-white border-b",children:[o.jsxs("div",{className:"flex items-center justify-between px-4 h-14",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Br,{className:"h-5 w-5 text-blue-600"}),o.jsx("span",{className:"font-bold",children:"DeskPlanner"})]}),o.jsx(re,{variant:"ghost",size:"sm",onClick:()=>a(!n),children:n?o.jsx(Gi,{className:"h-5 w-5"}):o.jsx(Rm,{className:"h-5 w-5"})})]}),n&&o.jsx("div",{className:"bg-white border-b shadow-lg",children:o.jsxs("nav",{className:"p-3 space-y-1",children:[ac.map(c=>o.jsxs(vi,{to:c.to,onClick:()=>a(!1),className:({isActive:d})=>`flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors ${d?"bg-blue-50 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:[o.jsx(c.icon,{className:"h-5 w-5"}),c.label]},c.to)),o.jsxs("button",{onClick:i,className:"flex items-center gap-3 w-full px-3 py-2.5 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",children:[o.jsx(Qo,{className:"h-5 w-5"}),"Sign Out"]})]})})]}),o.jsxs("main",{className:"flex-1 lg:overflow-auto",children:[o.jsx("div",{className:"lg:hidden h-14"})," ",o.jsx(ua,{})]})]})}function uw(){var a,i;const[r,e]=f.useState(0),t=f.useMemo(()=>dh(r),[r]),s=(a=t[0])==null?void 0:a.dateString,n=(i=t[t.length-1])==null?void 0:i.dateString;return o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Revenue Dashboard"}),o.jsx(Sh,{viewMode:"month",monthOffset:r,startDate:s,endDate:n})]})}function hw(){return o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Waiting List"}),o.jsx(yh,{})]})}function fw(){const{currentOrg:r,rooms:e,desks:t}=Ts(),{toast:s}=Kr(),n=vt(),[a,i]=f.useState(!1),[l,c]=f.useState((r==null?void 0:r.name)||""),d=async()=>{if(r){i(!0);try{const{error:u}=await Ye.from("organizations").update({name:l}).eq("id",r.id);if(u)throw u;n.invalidateQueries({queryKey:["user-organizations"]}),s({title:"Settings Saved",description:"Organization name updated."})}catch{s({title:"Error",description:"Failed to save settings.",variant:"destructive"})}finally{i(!1)}}};return r?o.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Settings"}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(We,{children:[o.jsxs(Ft,{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(md,{className:"h-5 w-5 text-blue-600"}),o.jsx(Ut,{children:"Organization"})]}),o.jsx(Lr,{children:"Manage your coworking space details."})]}),o.jsxs(Je,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(me,{htmlFor:"orgName",children:"Space Name"}),o.jsx(Ne,{id:"orgName",value:l,onChange:u=>c(u.target.value)})]}),o.jsxs("div",{children:[o.jsx(me,{children:"Slug"}),o.jsx(Ne,{value:r.slug,disabled:!0}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Slug cannot be changed after creation."})]}),o.jsxs("div",{children:[o.jsx(me,{children:"Currency"}),o.jsx(Ne,{value:r.currency,disabled:!0})]}),o.jsxs(re,{onClick:d,disabled:a,children:[o.jsx(Pm,{className:"mr-2 h-4 w-4"}),a?"Saving...":"Save Changes"]})]})]}),o.jsxs(We,{children:[o.jsxs(Ft,{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Br,{className:"h-5 w-5 text-blue-600"}),o.jsx(Ut,{children:"Rooms & Desks"})]}),o.jsx(Lr,{children:"Your current space configuration."})]}),o.jsx(Je,{children:o.jsxs("div",{className:"space-y-3",children:[e.map(u=>{const h=t.filter(m=>m.roomId===u.id);return o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h4",{className:"font-medium text-gray-900",children:u.name}),o.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[h.length," desk",h.length!==1?"s":""]}),o.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:h.map(m=>o.jsx("span",{className:"px-2 py-1 bg-white border rounded text-xs text-gray-600",children:m.label},m.id))})]},u.id)}),e.length===0&&o.jsx("p",{className:"text-sm text-gray-500",children:"No rooms configured yet."})]})})]})]})]}):null}function mw(){return o.jsx(C0,{children:o.jsx(ua,{})})}function pw(){const{user:r,loading:e}=Ds();return e?o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(zt,{className:"h-8 w-8 animate-spin text-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):r?o.jsx(I0,{children:o.jsx(gw,{})}):o.jsx(da,{to:"/login",replace:!0})}function gw(){const{hasOrganization:r,loading:e}=Ts(),t=qt();return e?o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(zt,{className:"h-8 w-8 animate-spin text-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading workspace..."})]})}):!r&&!t.pathname.endsWith("/onboarding")?o.jsx(da,{to:"/app/onboarding",replace:!0}):o.jsx(L0,{children:o.jsx(U0,{children:o.jsx(ua,{})})})}function yw(){const{user:r,loading:e}=Ds();return e?o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(zt,{className:"h-8 w-8 animate-spin text-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):r?o.jsx(da,{to:"/app/calendar",replace:!0}):o.jsx(ua,{})}function vw(){const{user:r,loading:e}=Ds();return e?o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(zt,{className:"h-8 w-8 animate-spin text-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):r?o.jsx(da,{to:"/app/calendar",replace:!0}):o.jsx(W0,{})}const xw="/DeskPlanner/".replace(/\/$/,"")||"/",bw=Xy([{element:o.jsx(mw,{}),children:[{path:"/",element:o.jsx(vw,{})},{element:o.jsx(yw,{}),children:[{path:"/login",lazy:()=>yt(()=>import("./login-sJSnfE4P.js"),__vite__mapDeps([0,1,2,3])).then(r=>({Component:r.default}))},{path:"/signup",lazy:()=>yt(()=>import("./signup-CSsp5mA2.js"),__vite__mapDeps([4,1,2,3])).then(r=>({Component:r.default}))}]},{path:"/app",element:o.jsx(pw,{}),children:[{path:"onboarding",element:o.jsx(cw,{})},{element:o.jsx(dw,{}),children:[{path:"calendar",element:o.jsx(ow,{})},{path:"revenue",element:o.jsx(uw,{})},{path:"waiting-list",element:o.jsx(hw,{})},{path:"settings",element:o.jsx(fw,{})}]}]}]}],{basename:xw});function ww(){return o.jsx(Tf,{client:Kf,children:o.jsxs(Lp,{children:[o.jsx(bp,{}),o.jsx(cv,{router:bw})]})})}Tc(document.getElementById("root")).render(o.jsx(ww,{}));export{Di as A,re as B,We as C,Ne as I,zt as L,wd as U,Ft as a,Ut as b,ee as c,Lr as d,Je as e,Pi as f,Cr as g,Ye as s,ca as u};
